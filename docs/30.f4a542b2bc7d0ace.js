var rg=Object.defineProperty,hg=(bt,lt,nt)=>lt in bt?rg(bt,lt,{enumerable:!0,configurable:!0,writable:!0,value:nt}):bt[lt]=nt,W=(bt,lt,nt)=>(hg(bt,"symbol"!=typeof lt?lt+"":lt,nt),nt);(self.webpackChunktanks=self.webpackChunktanks||[]).push([[30],{3815:function(bt,lt,nt){var Xi;bt=nt.nmd(bt),function(){var l,gt="Expected a function",Ei="__lodash_hash_undefined__",Ui="__lodash_placeholder__",ii=1/0,Y=9007199254740991,u=NaN,f=4294967295,L=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],N="[object Arguments]",ut="[object Array]",S="[object Boolean]",dt="[object Date]",ve="[object Error]",Ie="[object Function]",Fs="[object GeneratorFunction]",Nt="[object Map]",ji="[object Number]",ei="[object Object]",Gs="[object Promise]",te="[object RegExp]",$t="[object Set]",ie="[object String]",ye="[object Symbol]",ee="[object WeakMap]",ne="[object ArrayBuffer]",Bi="[object DataView]",In="[object Float32Array]",yn="[object Float64Array]",An="[object Int8Array]",Cn="[object Int16Array]",kn="[object Int32Array]",xn="[object Uint8Array]",Rn="[object Uint8ClampedArray]",Tn="[object Uint16Array]",Mn="[object Uint32Array]",Au=/\b__p \+= '';/g,Cu=/\b(__p \+=) '' \+/g,ku=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ns=/&(?:amp|lt|gt|quot|#39);/g,$s=/[&<>"']/g,xu=RegExp(Ns.source),Ru=RegExp($s.source),Tu=/<%-([\s\S]+?)%>/g,Mu=/<%([\s\S]+?)%>/g,Ks=/<%=([\s\S]+?)%>/g,Yu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xu=/^\w*$/,Eu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yn=/[\\^$.*+?()[\]{}|]/g,Uu=RegExp(Yn.source),Xn=/^\s+/,Su=/\s/,Bu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Lu=/\{\n\/\* \[wrapped with (.+)\] \*/,Pu=/,? & /,Hu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ou=/[()=,{}\[\]\/\s]/,Du=/\\(\\)?/g,Fu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qs=/\w*$/,Gu=/^[-+]0x[0-9a-f]+$/i,Nu=/^0b[01]+$/i,$u=/^\[object .+?Constructor\]$/,Ku=/^0o[0-7]+$/i,qu=/^(?:0|[1-9]\d*)$/,zu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ae=/($^)/,Zu=/['\n\r\u2028\u2029\\]/g,Ce="\\ud800-\\udfff",zs="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Zs="\\u2700-\\u27bf",Js="a-z\\xdf-\\xf6\\xf8-\\xff",Qs="A-Z\\xc0-\\xd6\\xd8-\\xde",Vs="\\ufe0e\\ufe0f",js="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",no="["+Ce+"]",tr="["+js+"]",ke="["+zs+"]",ir="\\d+",so="["+Zs+"]",er="["+Js+"]",nr="[^"+Ce+js+ir+Zs+Js+Qs+"]",Un="\\ud83c[\\udffb-\\udfff]",sr="[^"+Ce+"]",Sn="(?:\\ud83c[\\udde6-\\uddff]){2}",Bn="[\\ud800-\\udbff][\\udc00-\\udfff]",Li="["+Qs+"]",hr="(?:"+er+"|"+nr+")",ho="(?:"+Li+"|"+nr+")",ur="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",or="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ar="(?:"+ke+"|"+Un+")?",lr="["+Vs+"]?",fr=lr+ar+"(?:\\u200d(?:"+[sr,Sn,Bn].join("|")+")"+lr+ar+")*",lo="(?:"+[so,Sn,Bn].join("|")+")"+fr,fo="(?:"+[sr+ke+"?",ke,Sn,Bn,no].join("|")+")",co=RegExp("['\u2019]","g"),po=RegExp(ke,"g"),Ln=RegExp(Un+"(?="+Un+")|"+fo+fr,"g"),go=RegExp([Li+"?"+er+"+"+ur+"(?="+[tr,Li,"$"].join("|")+")",ho+"+"+or+"(?="+[tr,Li+hr,"$"].join("|")+")",Li+"?"+hr+"+"+ur,Li+"+"+or,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ir,lo].join("|"),"g"),mo=RegExp("[\\u200d"+Ce+zs+Vs+"]"),_o=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wo=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wo=-1,J={};J[In]=J[yn]=J[An]=J[Cn]=J[kn]=J[xn]=J[Rn]=J[Tn]=J[Mn]=!0,J[N]=J[ut]=J[ne]=J[S]=J[Bi]=J[dt]=J[ve]=J[Ie]=J[Nt]=J[ji]=J[ei]=J[te]=J[$t]=J[ie]=J[ee]=!1;var Z={};Z[N]=Z[ut]=Z[ne]=Z[Bi]=Z[S]=Z[dt]=Z[In]=Z[yn]=Z[An]=Z[Cn]=Z[kn]=Z[Nt]=Z[ji]=Z[ei]=Z[te]=Z[$t]=Z[ie]=Z[ye]=Z[xn]=Z[Rn]=Z[Tn]=Z[Mn]=!0,Z[ve]=Z[Ie]=Z[ee]=!1;var yo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ao=parseFloat,Co=parseInt,dr="object"==typeof global&&global&&global.Object===Object&&global,ko="object"==typeof self&&self&&self.Object===Object&&self,ot=dr||ko||Function("return this")(),cr=lt&&!lt.nodeType&&lt,se=cr&&bt&&!bt.nodeType&&bt,pr=se&&se.exports===cr,Pn=pr&&dr.process,Ut=function(){try{return se&&se.require&&se.require("util").types||Pn&&Pn.binding&&Pn.binding("util")}catch{}}(),gr=Ut&&Ut.isArrayBuffer,mr=Ut&&Ut.isDate,_r=Ut&&Ut.isMap,Wr=Ut&&Ut.isRegExp,wr=Ut&&Ut.isSet,br=Ut&&Ut.isTypedArray;function kt(c,w,m){switch(m.length){case 0:return c.call(w);case 1:return c.call(w,m[0]);case 2:return c.call(w,m[0],m[1]);case 3:return c.call(w,m[0],m[1],m[2])}return c.apply(w,m)}function xo(c,w,m,x){for(var U=-1,$=null==c?0:c.length;++U<$;){var st=c[U];w(x,st,m(st),c)}return x}function St(c,w){for(var m=-1,x=null==c?0:c.length;++m<x&&!1!==w(c[m],m,c););return c}function Ro(c,w){for(var m=null==c?0:c.length;m--&&!1!==w(c[m],m,c););return c}function vr(c,w){for(var m=-1,x=null==c?0:c.length;++m<x;)if(!w(c[m],m,c))return!1;return!0}function gi(c,w){for(var m=-1,x=null==c?0:c.length,U=0,$=[];++m<x;){var st=c[m];w(st,m,c)&&($[U++]=st)}return $}function xe(c,w){return!(null==c||!c.length)&&Pi(c,w,0)>-1}function Hn(c,w,m){for(var x=-1,U=null==c?0:c.length;++x<U;)if(m(w,c[x]))return!0;return!1}function Q(c,w){for(var m=-1,x=null==c?0:c.length,U=Array(x);++m<x;)U[m]=w(c[m],m,c);return U}function mi(c,w){for(var m=-1,x=w.length,U=c.length;++m<x;)c[U+m]=w[m];return c}function On(c,w,m,x){var U=-1,$=null==c?0:c.length;for(x&&$&&(m=c[++U]);++U<$;)m=w(m,c[U],U,c);return m}function To(c,w,m,x){var U=null==c?0:c.length;for(x&&U&&(m=c[--U]);U--;)m=w(m,c[U],U,c);return m}function Dn(c,w){for(var m=-1,x=null==c?0:c.length;++m<x;)if(w(c[m],m,c))return!0;return!1}var Mo=Fn("length");function Ir(c,w,m){var x;return m(c,function(U,$,st){if(w(U,$,st))return x=$,!1}),x}function Re(c,w,m,x){for(var U=c.length,$=m+(x?1:-1);x?$--:++$<U;)if(w(c[$],$,c))return $;return-1}function Pi(c,w,m){return w==w?function No(c,w,m){for(var x=m-1,U=c.length;++x<U;)if(c[x]===w)return x;return-1}(c,w,m):Re(c,yr,m)}function Eo(c,w,m,x){for(var U=m-1,$=c.length;++U<$;)if(x(c[U],w))return U;return-1}function yr(c){return c!=c}function Ar(c,w){var m=null==c?0:c.length;return m?Nn(c,w)/m:u}function Fn(c){return function(w){return null==w?l:w[c]}}function Gn(c){return function(w){return null==c?l:c[w]}}function Cr(c,w,m,x,U){return U(c,function($,st,z){m=x?(x=!1,$):w(m,$,st,z)}),m}function Nn(c,w){for(var m,x=-1,U=c.length;++x<U;){var $=w(c[x]);$!==l&&(m=m===l?$:m+$)}return m}function $n(c,w){for(var m=-1,x=Array(c);++m<c;)x[m]=w(m);return x}function kr(c){return c&&c.slice(0,Mr(c)+1).replace(Xn,"")}function xt(c){return function(w){return c(w)}}function Kn(c,w){return Q(w,function(m){return c[m]})}function re(c,w){return c.has(w)}function xr(c,w){for(var m=-1,x=c.length;++m<x&&Pi(w,c[m],0)>-1;);return m}function Rr(c,w){for(var m=c.length;m--&&Pi(w,c[m],0)>-1;);return m}function Bo(c,w){for(var m=c.length,x=0;m--;)c[m]===w&&++x;return x}var Lo=Gn({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Po=Gn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ho(c){return"\\"+yo[c]}function Hi(c){return mo.test(c)}function qn(c){var w=-1,m=Array(c.size);return c.forEach(function(x,U){m[++w]=[U,x]}),m}function Tr(c,w){return function(m){return c(w(m))}}function _i(c,w){for(var m=-1,x=c.length,U=0,$=[];++m<x;){var st=c[m];(st===w||st===Ui)&&(c[m]=Ui,$[U++]=m)}return $}function Te(c){var w=-1,m=Array(c.size);return c.forEach(function(x){m[++w]=x}),m}function Oi(c){return Hi(c)?function qo(c){for(var w=Ln.lastIndex=0;Ln.test(c);)++w;return w}(c):Mo(c)}function Kt(c){return Hi(c)?function zo(c){return c.match(Ln)||[]}(c):function Yo(c){return c.split("")}(c)}function Mr(c){for(var w=c.length;w--&&Su.test(c.charAt(w)););return w}var Ko=Gn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Me=function c(w){var t,m=(w=null==w?ot:Me.defaults(ot.Object(),w,Me.pick(ot,Wo))).Array,x=w.Date,U=w.Error,$=w.Function,st=w.Math,z=w.Object,zn=w.RegExp,Qo=w.String,Bt=w.TypeError,Ye=m.prototype,Di=z.prototype,Xe=w["__core-js_shared__"],Ee=$.prototype.toString,q=Di.hasOwnProperty,jo=0,Yr=(t=/[^.]+$/.exec(Xe&&Xe.keys&&Xe.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",Ue=Di.toString,ta=Ee.call(z),ia=ot._,ea=zn("^"+Ee.call(q).replace(Yn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Se=pr?w.Buffer:l,Wi=w.Symbol,Be=w.Uint8Array,Xr=Se?Se.allocUnsafe:l,Le=Tr(z.getPrototypeOf,z),Er=z.create,Ur=Di.propertyIsEnumerable,Pe=Ye.splice,Sr=Wi?Wi.isConcatSpreadable:l,he=Wi?Wi.iterator:l,Ai=Wi?Wi.toStringTag:l,He=function(){try{var t=Ti(z,"defineProperty");return t({},"",{}),t}catch{}}(),na=w.clearTimeout!==ot.clearTimeout&&w.clearTimeout,sa=x&&x.now!==ot.Date.now&&x.now,ra=w.setTimeout!==ot.setTimeout&&w.setTimeout,Oe=st.ceil,De=st.floor,Zn=z.getOwnPropertySymbols,ha=Se?Se.isBuffer:l,Br=w.isFinite,ua=Ye.join,oa=Tr(z.keys,z),rt=st.max,ct=st.min,aa=x.now,la=w.parseInt,Lr=st.random,fa=Ye.reverse,Jn=Ti(w,"DataView"),ue=Ti(w,"Map"),Qn=Ti(w,"Promise"),Fi=Ti(w,"Set"),oe=Ti(w,"WeakMap"),ae=Ti(z,"create"),Fe=oe&&new oe,Gi={},da=Mi(Jn),ca=Mi(ue),pa=Mi(Qn),ga=Mi(Fi),ma=Mi(oe),Ge=Wi?Wi.prototype:l,le=Ge?Ge.valueOf:l,Pr=Ge?Ge.toString:l;function h(t){if(tt(t)&&!B(t)&&!(t instanceof F)){if(t instanceof Lt)return t;if(q.call(t,"__wrapped__"))return Hh(t)}return new Lt(t)}var Ni=function(){function t(){}return function(i){if(!j(i))return{};if(Er)return Er(i);t.prototype=i;var e=new t;return t.prototype=l,e}}();function Ne(){}function Lt(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=l}function F(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Ci(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}function ni(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}function si(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}function ki(t){var i=-1,e=null==t?0:t.length;for(this.__data__=new si;++i<e;)this.add(t[i])}function qt(t){var i=this.__data__=new ni(t);this.size=i.size}function Hr(t,i){var e=B(t),n=!e&&Yi(t),s=!e&&!n&&yi(t),o=!e&&!n&&!s&&zi(t),a=e||n||s||o,d=a?$n(t.length,Qo):[],p=d.length;for(var b in t)(i||q.call(t,b))&&(!a||!("length"==b||s&&("offset"==b||"parent"==b)||o&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||oi(b,p)))&&d.push(b);return d}function Or(t){var i=t.length;return i?t[os(0,i-1)]:l}function Fa(t,i){return rn(It(t),xi(i,0,t.length))}function Ga(t){return rn(It(t))}function Vn(t,i,e){(e!==l&&!zt(t[i],e)||e===l&&!(i in t))&&ri(t,i,e)}function fe(t,i,e){var n=t[i];(!q.call(t,i)||!zt(n,e)||e===l&&!(i in t))&&ri(t,i,e)}function $e(t,i){for(var e=t.length;e--;)if(zt(t[e][0],i))return e;return-1}function Na(t,i,e,n){return wi(t,function(s,o,a){i(n,s,e(s),a)}),n}function Dr(t,i){return t&&Vt(i,ht(i),t)}function ri(t,i,e){"__proto__"==i&&He?He(t,i,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[i]=e}function jn(t,i){for(var e=-1,n=i.length,s=m(n),o=null==t;++e<n;)s[e]=o?l:Es(t,i[e]);return s}function xi(t,i,e){return t==t&&(e!==l&&(t=t<=e?t:e),i!==l&&(t=t>=i?t:i)),t}function Pt(t,i,e,n,s,o){var a,d=1&i,p=2&i,b=4&i;if(e&&(a=s?e(t,n,s,o):e(t)),a!==l)return a;if(!j(t))return t;var v=B(t);if(v){if(a=function El(t){var i=t.length,e=new t.constructor(i);return i&&"string"==typeof t[0]&&q.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!d)return It(t,a)}else{var I=pt(t),C=I==Ie||I==Fs;if(yi(t))return fh(t,d);if(I==ei||I==N||C&&!s){if(a=p||C?{}:Mh(t),!d)return p?function Il(t,i){return Vt(t,Rh(t),i)}(t,function $a(t,i){return t&&Vt(i,At(i),t)}(a,t)):function vl(t,i){return Vt(t,Is(t),i)}(t,Dr(a,t))}else{if(!Z[I])return s?t:{};a=function Ul(t,i,e){var n=t.constructor;switch(i){case ne:return gs(t);case S:case dt:return new n(+t);case Bi:return function _l(t,i){var e=i?gs(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case In:case yn:case An:case Cn:case kn:case xn:case Rn:case Tn:case Mn:return dh(t,e);case Nt:return new n;case ji:case ie:return new n(t);case te:return function Wl(t){var i=new t.constructor(t.source,qs.exec(t));return i.lastIndex=t.lastIndex,i}(t);case $t:return new n;case ye:return function wl(t){return le?z(le.call(t)):{}}(t)}}(t,I,d)}}o||(o=new qt);var R=o.get(t);if(R)return R;o.set(t,a),ru(t)?t.forEach(function(E){a.add(Pt(E,i,e,E,t,o))}):nu(t)&&t.forEach(function(E,D){a.set(D,Pt(E,i,e,D,t,o))});var H=v?l:(b?p?ws:Ws:p?At:ht)(t);return St(H||t,function(E,D){H&&(E=t[D=E]),fe(a,D,Pt(E,i,e,D,t,o))}),a}function Fr(t,i,e){var n=e.length;if(null==t)return!n;for(t=z(t);n--;){var s=e[n],a=t[s];if(a===l&&!(s in t)||!(0,i[s])(a))return!1}return!0}function Gr(t,i,e){if("function"!=typeof t)throw new Bt(gt);return We(function(){t.apply(l,e)},i)}function de(t,i,e,n){var s=-1,o=xe,a=!0,d=t.length,p=[],b=i.length;if(!d)return p;e&&(i=Q(i,xt(e))),n?(o=Hn,a=!1):i.length>=200&&(o=re,a=!1,i=new ki(i));t:for(;++s<d;){var v=t[s],I=null==e?v:e(v);if(v=n||0!==v?v:0,a&&I==I){for(var C=b;C--;)if(i[C]===I)continue t;p.push(v)}else o(i,I,n)||p.push(v)}return p}h.templateSettings={escape:Tu,evaluate:Mu,interpolate:Ks,variable:"",imports:{_:h}},(h.prototype=Ne.prototype).constructor=h,(Lt.prototype=Ni(Ne.prototype)).constructor=Lt,(F.prototype=Ni(Ne.prototype)).constructor=F,Ci.prototype.clear=function ba(){this.__data__=ae?ae(null):{},this.size=0},Ci.prototype.delete=function va(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},Ci.prototype.get=function Ia(t){var i=this.__data__;if(ae){var e=i[t];return e===Ei?l:e}return q.call(i,t)?i[t]:l},Ci.prototype.has=function ya(t){var i=this.__data__;return ae?i[t]!==l:q.call(i,t)},Ci.prototype.set=function Aa(t,i){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=ae&&i===l?Ei:i,this},ni.prototype.clear=function Ca(){this.__data__=[],this.size=0},ni.prototype.delete=function ka(t){var i=this.__data__,e=$e(i,t);return!(e<0||(e==i.length-1?i.pop():Pe.call(i,e,1),--this.size,0))},ni.prototype.get=function xa(t){var i=this.__data__,e=$e(i,t);return e<0?l:i[e][1]},ni.prototype.has=function Ra(t){return $e(this.__data__,t)>-1},ni.prototype.set=function Ta(t,i){var e=this.__data__,n=$e(e,t);return n<0?(++this.size,e.push([t,i])):e[n][1]=i,this},si.prototype.clear=function Ma(){this.size=0,this.__data__={hash:new Ci,map:new(ue||ni),string:new Ci}},si.prototype.delete=function Ya(t){var i=sn(this,t).delete(t);return this.size-=i?1:0,i},si.prototype.get=function Xa(t){return sn(this,t).get(t)},si.prototype.has=function Ea(t){return sn(this,t).has(t)},si.prototype.set=function Ua(t,i){var e=sn(this,t),n=e.size;return e.set(t,i),this.size+=e.size==n?0:1,this},ki.prototype.add=ki.prototype.push=function Sa(t){return this.__data__.set(t,Ei),this},ki.prototype.has=function Ba(t){return this.__data__.has(t)},qt.prototype.clear=function La(){this.__data__=new ni,this.size=0},qt.prototype.delete=function Pa(t){var i=this.__data__,e=i.delete(t);return this.size=i.size,e},qt.prototype.get=function Ha(t){return this.__data__.get(t)},qt.prototype.has=function Oa(t){return this.__data__.has(t)},qt.prototype.set=function Da(t,i){var e=this.__data__;if(e instanceof ni){var n=e.__data__;if(!ue||n.length<199)return n.push([t,i]),this.size=++e.size,this;e=this.__data__=new si(n)}return e.set(t,i),this.size=e.size,this};var wi=mh(Qt),Nr=mh(is,!0);function qa(t,i){var e=!0;return wi(t,function(n,s,o){return e=!!i(n,s,o)}),e}function Ke(t,i,e){for(var n=-1,s=t.length;++n<s;){var o=t[n],a=i(o);if(null!=a&&(d===l?a==a&&!Tt(a):e(a,d)))var d=a,p=o}return p}function $r(t,i){var e=[];return wi(t,function(n,s,o){i(n,s,o)&&e.push(n)}),e}function at(t,i,e,n,s){var o=-1,a=t.length;for(e||(e=Bl),s||(s=[]);++o<a;){var d=t[o];i>0&&e(d)?i>1?at(d,i-1,e,n,s):mi(s,d):n||(s[s.length]=d)}return s}var ts=_h(),Kr=_h(!0);function Qt(t,i){return t&&ts(t,i,ht)}function is(t,i){return t&&Kr(t,i,ht)}function qe(t,i){return gi(i,function(e){return ai(t[e])})}function Ri(t,i){for(var e=0,n=(i=vi(i,t)).length;null!=t&&e<n;)t=t[jt(i[e++])];return e&&e==n?t:l}function qr(t,i,e){var n=i(t);return B(t)?n:mi(n,e(t))}function _t(t){return null==t?t===l?"[object Undefined]":"[object Null]":Ai&&Ai in z(t)?function Ml(t){var i=q.call(t,Ai),e=t[Ai];try{t[Ai]=l;var n=!0}catch{}var s=Ue.call(t);return n&&(i?t[Ai]=e:delete t[Ai]),s}(t):function Gl(t){return Ue.call(t)}(t)}function es(t,i){return t>i}function Za(t,i){return null!=t&&q.call(t,i)}function Ja(t,i){return null!=t&&i in z(t)}function ns(t,i,e){for(var n=e?Hn:xe,s=t[0].length,o=t.length,a=o,d=m(o),p=1/0,b=[];a--;){var v=t[a];a&&i&&(v=Q(v,xt(i))),p=ct(v.length,p),d[a]=!e&&(i||s>=120&&v.length>=120)?new ki(a&&v):l}v=t[0];var I=-1,C=d[0];t:for(;++I<s&&b.length<p;){var R=v[I],X=i?i(R):R;if(R=e||0!==R?R:0,!(C?re(C,X):n(b,X,e))){for(a=o;--a;){var H=d[a];if(!(H?re(H,X):n(t[a],X,e)))continue t}C&&C.push(X),b.push(R)}}return b}function ce(t,i,e){var n=null==(t=Uh(t,i=vi(i,t)))?t:t[jt(Ot(i))];return null==n?l:kt(n,t,e)}function zr(t){return tt(t)&&_t(t)==N}function pe(t,i,e,n,s){return t===i||(null==t||null==i||!tt(t)&&!tt(i)?t!=t&&i!=i:function il(t,i,e,n,s,o){var a=B(t),d=B(i),p=a?ut:pt(t),b=d?ut:pt(i),v=(p=p==N?ei:p)==ei,I=(b=b==N?ei:b)==ei,C=p==b;if(C&&yi(t)){if(!yi(i))return!1;a=!0,v=!1}if(C&&!v)return o||(o=new qt),a||zi(t)?xh(t,i,e,n,s,o):function Rl(t,i,e,n,s,o,a){switch(e){case Bi:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case ne:return!(t.byteLength!=i.byteLength||!o(new Be(t),new Be(i)));case S:case dt:case ji:return zt(+t,+i);case ve:return t.name==i.name&&t.message==i.message;case te:case ie:return t==i+"";case Nt:var d=qn;case $t:if(d||(d=Te),t.size!=i.size&&!(1&n))return!1;var b=a.get(t);if(b)return b==i;n|=2,a.set(t,i);var v=xh(d(t),d(i),n,s,o,a);return a.delete(t),v;case ye:if(le)return le.call(t)==le.call(i)}return!1}(t,i,p,e,n,s,o);if(!(1&e)){var R=v&&q.call(t,"__wrapped__"),X=I&&q.call(i,"__wrapped__");if(R||X){var H=R?t.value():t,E=X?i.value():i;return o||(o=new qt),s(H,E,e,n,o)}}return!!C&&(o||(o=new qt),function Tl(t,i,e,n,s,o){var a=1&e,d=Ws(t),p=d.length;if(p!=Ws(i).length&&!a)return!1;for(var I=p;I--;){var C=d[I];if(!(a?C in i:q.call(i,C)))return!1}var R=o.get(t),X=o.get(i);if(R&&X)return R==i&&X==t;var H=!0;o.set(t,i),o.set(i,t);for(var E=a;++I<p;){var D=t[C=d[I]],G=i[C];if(n)var Mt=a?n(G,D,C,i,t,o):n(D,G,C,t,i,o);if(!(Mt===l?D===G||s(D,G,e,n,o):Mt)){H=!1;break}E||(E="constructor"==C)}if(H&&!E){var wt=t.constructor,Yt=i.constructor;wt!=Yt&&"constructor"in t&&"constructor"in i&&!("function"==typeof wt&&wt instanceof wt&&"function"==typeof Yt&&Yt instanceof Yt)&&(H=!1)}return o.delete(t),o.delete(i),H}(t,i,e,n,s,o))}(t,i,e,n,pe,s))}function ss(t,i,e,n){var s=e.length,o=s,a=!n;if(null==t)return!o;for(t=z(t);s--;){var d=e[s];if(a&&d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++s<o;){var p=(d=e[s])[0],b=t[p],v=d[1];if(a&&d[2]){if(b===l&&!(p in t))return!1}else{var I=new qt;if(n)var C=n(b,v,p,t,i,I);if(!(C===l?pe(v,b,3,n,I):C))return!1}}return!0}function Zr(t){return!(!j(t)||function Pl(t){return!!Yr&&Yr in t}(t))&&(ai(t)?ea:$u).test(Mi(t))}function Jr(t){return"function"==typeof t?t:null==t?Ct:"object"==typeof t?B(t)?jr(t[0],t[1]):Vr(t):Wu(t)}function rs(t){if(!_e(t))return oa(t);var i=[];for(var e in z(t))q.call(t,e)&&"constructor"!=e&&i.push(e);return i}function hs(t,i){return t<i}function Qr(t,i){var e=-1,n=yt(t)?m(t.length):[];return wi(t,function(s,o,a){n[++e]=i(s,o,a)}),n}function Vr(t){var i=vs(t);return 1==i.length&&i[0][2]?Xh(i[0][0],i[0][1]):function(e){return e===t||ss(e,t,i)}}function jr(t,i){return ys(t)&&Yh(i)?Xh(jt(t),i):function(e){var n=Es(e,t);return n===l&&n===i?Us(e,t):pe(i,n,3)}}function ze(t,i,e,n,s){t!==i&&ts(i,function(o,a){if(s||(s=new qt),j(o))!function ul(t,i,e,n,s,o,a){var d=Cs(t,e),p=Cs(i,e),b=a.get(p);if(b)Vn(t,e,b);else{var v=o?o(d,p,e+"",t,i,a):l,I=v===l;if(I){var C=B(p),R=!C&&yi(p),X=!C&&!R&&zi(p);v=p,C||R||X?B(d)?v=d:it(d)?v=It(d):R?(I=!1,v=fh(p,!0)):X?(I=!1,v=dh(p,!0)):v=[]:we(p)||Yi(p)?(v=d,Yi(d)?v=ou(d):(!j(d)||ai(d))&&(v=Mh(p))):I=!1}I&&(a.set(p,v),s(v,p,n,o,a),a.delete(p)),Vn(t,e,v)}}(t,i,a,e,ze,n,s);else{var d=n?n(Cs(t,a),o,a+"",t,i,s):l;d===l&&(d=o),Vn(t,a,d)}},At)}function th(t,i){var e=t.length;if(e)return oi(i+=i<0?e:0,e)?t[i]:l}function ih(t,i,e){i=i.length?Q(i,function(o){return B(o)?function(a){return Ri(a,1===o.length?o[0]:o)}:o}):[Ct];var n=-1;return i=Q(i,xt(M())),function Uo(c,w){var m=c.length;for(c.sort(w);m--;)c[m]=c[m].value;return c}(Qr(t,function(o,a,d){return{criteria:Q(i,function(b){return b(o)}),index:++n,value:o}}),function(o,a){return function bl(t,i,e){for(var n=-1,s=t.criteria,o=i.criteria,a=s.length,d=e.length;++n<a;){var p=ch(s[n],o[n]);if(p)return n>=d?p:p*("desc"==e[n]?-1:1)}return t.index-i.index}(o,a,e)})}function eh(t,i,e){for(var n=-1,s=i.length,o={};++n<s;){var a=i[n],d=Ri(t,a);e(d,a)&&ge(o,vi(a,t),d)}return o}function us(t,i,e,n){var s=n?Eo:Pi,o=-1,a=i.length,d=t;for(t===i&&(i=It(i)),e&&(d=Q(t,xt(e)));++o<a;)for(var p=0,b=i[o],v=e?e(b):b;(p=s(d,v,p,n))>-1;)d!==t&&Pe.call(d,p,1),Pe.call(t,p,1);return t}function nh(t,i){for(var e=t?i.length:0,n=e-1;e--;){var s=i[e];if(e==n||s!==o){var o=s;oi(s)?Pe.call(t,s,1):fs(t,s)}}return t}function os(t,i){return t+De(Lr()*(i-t+1))}function as(t,i){var e="";if(!t||i<1||i>Y)return e;do{i%2&&(e+=t),(i=De(i/2))&&(t+=t)}while(i);return e}function O(t,i){return ks(Eh(t,i,Ct),t+"")}function fl(t){return Or(Zi(t))}function dl(t,i){var e=Zi(t);return rn(e,xi(i,0,e.length))}function ge(t,i,e,n){if(!j(t))return t;for(var s=-1,o=(i=vi(i,t)).length,a=o-1,d=t;null!=d&&++s<o;){var p=jt(i[s]),b=e;if("__proto__"===p||"constructor"===p||"prototype"===p)return t;if(s!=a){var v=d[p];(b=n?n(v,p,d):l)===l&&(b=j(v)?v:oi(i[s+1])?[]:{})}fe(d,p,b),d=d[p]}return t}var sh=Fe?function(t,i){return Fe.set(t,i),t}:Ct,cl=He?function(t,i){return He(t,"toString",{configurable:!0,enumerable:!1,value:Bs(i),writable:!0})}:Ct;function pl(t){return rn(Zi(t))}function Ht(t,i,e){var n=-1,s=t.length;i<0&&(i=-i>s?0:s+i),(e=e>s?s:e)<0&&(e+=s),s=i>e?0:e-i>>>0,i>>>=0;for(var o=m(s);++n<s;)o[n]=t[n+i];return o}function gl(t,i){var e;return wi(t,function(n,s,o){return!(e=i(n,s,o))}),!!e}function Ze(t,i,e){var n=0,s=null==t?n:t.length;if("number"==typeof i&&i==i&&s<=2147483647){for(;n<s;){var o=n+s>>>1,a=t[o];null!==a&&!Tt(a)&&(e?a<=i:a<i)?n=o+1:s=o}return s}return ls(t,i,Ct,e)}function ls(t,i,e,n){var s=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(i=e(i))!=i,d=null===i,p=Tt(i),b=i===l;s<o;){var v=De((s+o)/2),I=e(t[v]),C=I!==l,R=null===I,X=I==I,H=Tt(I);if(a)var E=n||X;else E=b?X&&(n||C):d?X&&C&&(n||!R):p?X&&C&&!R&&(n||!H):!R&&!H&&(n?I<=i:I<i);E?s=v+1:o=v}return ct(o,4294967294)}function rh(t,i){for(var e=-1,n=t.length,s=0,o=[];++e<n;){var a=t[e],d=i?i(a):a;if(!e||!zt(d,p)){var p=d;o[s++]=0===a?0:a}}return o}function hh(t){return"number"==typeof t?t:Tt(t)?u:+t}function Rt(t){if("string"==typeof t)return t;if(B(t))return Q(t,Rt)+"";if(Tt(t))return Pr?Pr.call(t):"";var i=t+"";return"0"==i&&1/t==-ii?"-0":i}function bi(t,i,e){var n=-1,s=xe,o=t.length,a=!0,d=[],p=d;if(e)a=!1,s=Hn;else if(o>=200){var b=i?null:kl(t);if(b)return Te(b);a=!1,s=re,p=new ki}else p=i?[]:d;t:for(;++n<o;){var v=t[n],I=i?i(v):v;if(v=e||0!==v?v:0,a&&I==I){for(var C=p.length;C--;)if(p[C]===I)continue t;i&&p.push(I),d.push(v)}else s(p,I,e)||(p!==d&&p.push(I),d.push(v))}return d}function fs(t,i){return null==(t=Uh(t,i=vi(i,t)))||delete t[jt(Ot(i))]}function uh(t,i,e,n){return ge(t,i,e(Ri(t,i)),n)}function Je(t,i,e,n){for(var s=t.length,o=n?s:-1;(n?o--:++o<s)&&i(t[o],o,t););return e?Ht(t,n?0:o,n?o+1:s):Ht(t,n?o+1:0,n?s:o)}function oh(t,i){var e=t;return e instanceof F&&(e=e.value()),On(i,function(n,s){return s.func.apply(s.thisArg,mi([n],s.args))},e)}function ds(t,i,e){var n=t.length;if(n<2)return n?bi(t[0]):[];for(var s=-1,o=m(n);++s<n;)for(var a=t[s],d=-1;++d<n;)d!=s&&(o[s]=de(o[s]||a,t[d],i,e));return bi(at(o,1),i,e)}function ah(t,i,e){for(var n=-1,s=t.length,o=i.length,a={};++n<s;)e(a,t[n],n<o?i[n]:l);return a}function cs(t){return it(t)?t:[]}function ps(t){return"function"==typeof t?t:Ct}function vi(t,i){return B(t)?t:ys(t,i)?[t]:Ph(K(t))}var ml=O;function Ii(t,i,e){var n=t.length;return e=e===l?n:e,!i&&e>=n?t:Ht(t,i,e)}var lh=na||function(t){return ot.clearTimeout(t)};function fh(t,i){if(i)return t.slice();var e=t.length,n=Xr?Xr(e):new t.constructor(e);return t.copy(n),n}function gs(t){var i=new t.constructor(t.byteLength);return new Be(i).set(new Be(t)),i}function dh(t,i){var e=i?gs(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function ch(t,i){if(t!==i){var e=t!==l,n=null===t,s=t==t,o=Tt(t),a=i!==l,d=null===i,p=i==i,b=Tt(i);if(!d&&!b&&!o&&t>i||o&&a&&p&&!d&&!b||n&&a&&p||!e&&p||!s)return 1;if(!n&&!o&&!b&&t<i||b&&e&&s&&!n&&!o||d&&e&&s||!a&&s||!p)return-1}return 0}function ph(t,i,e,n){for(var s=-1,o=t.length,a=e.length,d=-1,p=i.length,b=rt(o-a,0),v=m(p+b),I=!n;++d<p;)v[d]=i[d];for(;++s<a;)(I||s<o)&&(v[e[s]]=t[s]);for(;b--;)v[d++]=t[s++];return v}function gh(t,i,e,n){for(var s=-1,o=t.length,a=-1,d=e.length,p=-1,b=i.length,v=rt(o-d,0),I=m(v+b),C=!n;++s<v;)I[s]=t[s];for(var R=s;++p<b;)I[R+p]=i[p];for(;++a<d;)(C||s<o)&&(I[R+e[a]]=t[s++]);return I}function It(t,i){var e=-1,n=t.length;for(i||(i=m(n));++e<n;)i[e]=t[e];return i}function Vt(t,i,e,n){var s=!e;e||(e={});for(var o=-1,a=i.length;++o<a;){var d=i[o],p=n?n(e[d],t[d],d,e,t):l;p===l&&(p=t[d]),s?ri(e,d,p):fe(e,d,p)}return e}function Qe(t,i){return function(e,n){var s=B(e)?xo:Na,o=i?i():{};return s(e,t,M(n,2),o)}}function $i(t){return O(function(i,e){var n=-1,s=e.length,o=s>1?e[s-1]:l,a=s>2?e[2]:l;for(o=t.length>3&&"function"==typeof o?(s--,o):l,a&&Wt(e[0],e[1],a)&&(o=s<3?l:o,s=1),i=z(i);++n<s;){var d=e[n];d&&t(i,d,n,o)}return i})}function mh(t,i){return function(e,n){if(null==e)return e;if(!yt(e))return t(e,n);for(var s=e.length,o=i?s:-1,a=z(e);(i?o--:++o<s)&&!1!==n(a[o],o,a););return e}}function _h(t){return function(i,e,n){for(var s=-1,o=z(i),a=n(i),d=a.length;d--;){var p=a[t?d:++s];if(!1===e(o[p],p,o))break}return i}}function Wh(t){return function(i){var e=Hi(i=K(i))?Kt(i):l,n=e?e[0]:i.charAt(0),s=e?Ii(e,1).join(""):i.slice(1);return n[t]()+s}}function Ki(t){return function(i){return On(mu(gu(i).replace(co,"")),t,"")}}function me(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var e=Ni(t.prototype),n=t.apply(e,i);return j(n)?n:e}}function wh(t){return function(i,e,n){var s=z(i);if(!yt(i)){var o=M(e,3);i=ht(i),e=function(d){return o(s[d],d,s)}}var a=t(i,e,n);return a>-1?s[o?i[a]:a]:l}}function bh(t){return ui(function(i){var e=i.length,n=e,s=Lt.prototype.thru;for(t&&i.reverse();n--;){var o=i[n];if("function"!=typeof o)throw new Bt(gt);if(s&&!a&&"wrapper"==nn(o))var a=new Lt([],!0)}for(n=a?n:e;++n<e;){var d=nn(o=i[n]),p="wrapper"==d?bs(o):l;a=p&&As(p[0])&&424==p[1]&&!p[4].length&&1==p[9]?a[nn(p[0])].apply(a,p[3]):1==o.length&&As(o)?a[d]():a.thru(o)}return function(){var b=arguments,v=b[0];if(a&&1==b.length&&B(v))return a.plant(v).value();for(var I=0,C=e?i[I].apply(this,b):v;++I<e;)C=i[I].call(this,C);return C}})}function Ve(t,i,e,n,s,o,a,d,p,b){var v=128&i,I=1&i,C=2&i,R=24&i,X=512&i,H=C?l:me(t);return function E(){for(var D=arguments.length,G=m(D),Mt=D;Mt--;)G[Mt]=arguments[Mt];if(R)var wt=qi(E),Yt=Bo(G,wt);if(n&&(G=ph(G,n,s,R)),o&&(G=gh(G,o,a,R)),D-=Yt,R&&D<b){var et=_i(G,wt);return yh(t,i,Ve,E.placeholder,e,G,et,d,p,b-D)}var Zt=I?e:this,fi=C?Zt[t]:t;return D=G.length,d?G=Nl(G,d):X&&D>1&&G.reverse(),v&&p<D&&(G.length=p),this&&this!==ot&&this instanceof E&&(fi=H||me(fi)),fi.apply(Zt,G)}}function vh(t,i){return function(e,n){return function Va(t,i,e,n){return Qt(t,function(s,o,a){i(n,e(s),o,a)}),n}(e,t,i(n),{})}}function je(t,i){return function(e,n){var s;if(e===l&&n===l)return i;if(e!==l&&(s=e),n!==l){if(s===l)return n;"string"==typeof e||"string"==typeof n?(e=Rt(e),n=Rt(n)):(e=hh(e),n=hh(n)),s=t(e,n)}return s}}function ms(t){return ui(function(i){return i=Q(i,xt(M())),O(function(e){var n=this;return t(i,function(s){return kt(s,n,e)})})})}function tn(t,i){var e=(i=i===l?" ":Rt(i)).length;if(e<2)return e?as(i,t):i;var n=as(i,Oe(t/Oi(i)));return Hi(i)?Ii(Kt(n),0,t).join(""):n.slice(0,t)}function Ih(t){return function(i,e,n){return n&&"number"!=typeof n&&Wt(i,e,n)&&(e=n=l),i=li(i),e===l?(e=i,i=0):e=li(e),function ll(t,i,e,n){for(var s=-1,o=rt(Oe((i-t)/(e||1)),0),a=m(o);o--;)a[n?o:++s]=t,t+=e;return a}(i,e,n=n===l?i<e?1:-1:li(n),t)}}function en(t){return function(i,e){return"string"==typeof i&&"string"==typeof e||(i=Dt(i),e=Dt(e)),t(i,e)}}function yh(t,i,e,n,s,o,a,d,p,b){var v=8&i;i|=v?32:64,4&(i&=~(v?64:32))||(i&=-4);var H=[t,i,s,v?o:l,v?a:l,v?l:o,v?l:a,d,p,b],E=e.apply(l,H);return As(t)&&Sh(E,H),E.placeholder=n,Bh(E,t,i)}function _s(t){var i=st[t];return function(e,n){if(e=Dt(e),(n=null==n?0:ct(P(n),292))&&Br(e)){var s=(K(e)+"e").split("e");return+((s=(K(i(s[0]+"e"+(+s[1]+n)))+"e").split("e"))[0]+"e"+(+s[1]-n))}return i(e)}}var kl=Fi&&1/Te(new Fi([,-0]))[1]==ii?function(t){return new Fi(t)}:Hs;function Ah(t){return function(i){var e=pt(i);return e==Nt?qn(i):e==$t?function Go(c){var w=-1,m=Array(c.size);return c.forEach(function(x){m[++w]=[x,x]}),m}(i):function So(c,w){return Q(w,function(m){return[m,c[m]]})}(i,t(i))}}function hi(t,i,e,n,s,o,a,d){var p=2&i;if(!p&&"function"!=typeof t)throw new Bt(gt);var b=n?n.length:0;if(b||(i&=-97,n=s=l),a=a===l?a:rt(P(a),0),d=d===l?d:P(d),b-=s?s.length:0,64&i){var v=n,I=s;n=s=l}var C=p?l:bs(t),R=[t,i,e,n,s,v,I,o,a,d];if(C&&function Dl(t,i){var e=t[1],n=i[1],s=e|n;if(!(s<131||(128==n&&8==e||128==n&&256==e&&t[7].length<=i[8]||384==n&&i[7].length<=i[8]&&8==e)))return t;1&n&&(t[2]=i[2],s|=1&e?0:4);var d=i[3];if(d){var p=t[3];t[3]=p?ph(p,d,i[4]):d,t[4]=p?_i(t[3],Ui):i[4]}(d=i[5])&&(t[5]=(p=t[5])?gh(p,d,i[6]):d,t[6]=p?_i(t[5],Ui):i[6]),(d=i[7])&&(t[7]=d),128&n&&(t[8]=null==t[8]?i[8]:ct(t[8],i[8])),null==t[9]&&(t[9]=i[9]),t[0]=i[0],t[1]=s}(R,C),t=R[0],i=R[1],e=R[2],n=R[3],s=R[4],!(d=R[9]=R[9]===l?p?0:t.length:rt(R[9]-b,0))&&24&i&&(i&=-25),i&&1!=i)X=8==i||16==i?function Al(t,i,e){var n=me(t);return function s(){for(var o=arguments.length,a=m(o),d=o,p=qi(s);d--;)a[d]=arguments[d];var b=o<3&&a[0]!==p&&a[o-1]!==p?[]:_i(a,p);return(o-=b.length)<e?yh(t,i,Ve,s.placeholder,l,a,b,l,l,e-o):kt(this&&this!==ot&&this instanceof s?n:t,this,a)}}(t,i,d):32!=i&&33!=i||s.length?Ve.apply(l,R):function Cl(t,i,e,n){var s=1&i,o=me(t);return function a(){for(var d=-1,p=arguments.length,b=-1,v=n.length,I=m(v+p),C=this&&this!==ot&&this instanceof a?o:t;++b<v;)I[b]=n[b];for(;p--;)I[b++]=arguments[++d];return kt(C,s?e:this,I)}}(t,i,e,n);else var X=function yl(t,i,e){var n=1&i,s=me(t);return function o(){return(this&&this!==ot&&this instanceof o?s:t).apply(n?e:this,arguments)}}(t,i,e);return Bh((C?sh:Sh)(X,R),t,i)}function Ch(t,i,e,n){return t===l||zt(t,Di[e])&&!q.call(n,e)?i:t}function kh(t,i,e,n,s,o){return j(t)&&j(i)&&(o.set(i,t),ze(t,i,l,kh,o),o.delete(i)),t}function xl(t){return we(t)?l:t}function xh(t,i,e,n,s,o){var a=1&e,d=t.length,p=i.length;if(d!=p&&!(a&&p>d))return!1;var b=o.get(t),v=o.get(i);if(b&&v)return b==i&&v==t;var I=-1,C=!0,R=2&e?new ki:l;for(o.set(t,i),o.set(i,t);++I<d;){var X=t[I],H=i[I];if(n)var E=a?n(H,X,I,i,t,o):n(X,H,I,t,i,o);if(E!==l){if(E)continue;C=!1;break}if(R){if(!Dn(i,function(D,G){if(!re(R,G)&&(X===D||s(X,D,e,n,o)))return R.push(G)})){C=!1;break}}else if(X!==H&&!s(X,H,e,n,o)){C=!1;break}}return o.delete(t),o.delete(i),C}function ui(t){return ks(Eh(t,l,Fh),t+"")}function Ws(t){return qr(t,ht,Is)}function ws(t){return qr(t,At,Rh)}var bs=Fe?function(t){return Fe.get(t)}:Hs;function nn(t){for(var i=t.name+"",e=Gi[i],n=q.call(Gi,i)?e.length:0;n--;){var s=e[n],o=s.func;if(null==o||o==t)return s.name}return i}function qi(t){return(q.call(h,"placeholder")?h:t).placeholder}function M(){var t=h.iteratee||Ls;return t=t===Ls?Jr:t,arguments.length?t(arguments[0],arguments[1]):t}function sn(t,i){var e=t.__data__;return function Ll(t){var i=typeof t;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t}(i)?e["string"==typeof i?"string":"hash"]:e.map}function vs(t){for(var i=ht(t),e=i.length;e--;){var n=i[e],s=t[n];i[e]=[n,s,Yh(s)]}return i}function Ti(t,i){var e=function Oo(c,w){return null==c?l:c[w]}(t,i);return Zr(e)?e:l}var Is=Zn?function(t){return null==t?[]:(t=z(t),gi(Zn(t),function(i){return Ur.call(t,i)}))}:Os,Rh=Zn?function(t){for(var i=[];t;)mi(i,Is(t)),t=Le(t);return i}:Os,pt=_t;function Th(t,i,e){for(var n=-1,s=(i=vi(i,t)).length,o=!1;++n<s;){var a=jt(i[n]);if(!(o=null!=t&&e(t,a)))break;t=t[a]}return o||++n!=s?o:!!(s=null==t?0:t.length)&&fn(s)&&oi(a,s)&&(B(t)||Yi(t))}function Mh(t){return"function"!=typeof t.constructor||_e(t)?{}:Ni(Le(t))}function Bl(t){return B(t)||Yi(t)||!!(Sr&&t&&t[Sr])}function oi(t,i){var e=typeof t;return!!(i=i??Y)&&("number"==e||"symbol"!=e&&qu.test(t))&&t>-1&&t%1==0&&t<i}function Wt(t,i,e){if(!j(e))return!1;var n=typeof i;return!!("number"==n?yt(e)&&oi(i,e.length):"string"==n&&i in e)&&zt(e[i],t)}function ys(t,i){if(B(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!Tt(t))||Xu.test(t)||!Yu.test(t)||null!=i&&t in z(i)}function As(t){var i=nn(t),e=h[i];if("function"!=typeof e||!(i in F.prototype))return!1;if(t===e)return!0;var n=bs(e);return!!n&&t===n[0]}(Jn&&pt(new Jn(new ArrayBuffer(1)))!=Bi||ue&&pt(new ue)!=Nt||Qn&&pt(Qn.resolve())!=Gs||Fi&&pt(new Fi)!=$t||oe&&pt(new oe)!=ee)&&(pt=function(t){var i=_t(t),e=i==ei?t.constructor:l,n=e?Mi(e):"";if(n)switch(n){case da:return Bi;case ca:return Nt;case pa:return Gs;case ga:return $t;case ma:return ee}return i});var Hl=Xe?ai:Ds;function _e(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||Di)}function Yh(t){return t==t&&!j(t)}function Xh(t,i){return function(e){return null!=e&&e[t]===i&&(i!==l||t in z(e))}}function Eh(t,i,e){return i=rt(i===l?t.length-1:i,0),function(){for(var n=arguments,s=-1,o=rt(n.length-i,0),a=m(o);++s<o;)a[s]=n[i+s];s=-1;for(var d=m(i+1);++s<i;)d[s]=n[s];return d[i]=e(a),kt(t,this,d)}}function Uh(t,i){return i.length<2?t:Ri(t,Ht(i,0,-1))}function Nl(t,i){for(var e=t.length,n=ct(i.length,e),s=It(t);n--;){var o=i[n];t[n]=oi(o,e)?s[o]:l}return t}function Cs(t,i){if(("constructor"!==i||"function"!=typeof t[i])&&"__proto__"!=i)return t[i]}var Sh=Lh(sh),We=ra||function(t,i){return ot.setTimeout(t,i)},ks=Lh(cl);function Bh(t,i,e){var n=i+"";return ks(t,function Sl(t,i){var e=i.length;if(!e)return t;var n=e-1;return i[n]=(e>1?"& ":"")+i[n],i=i.join(e>2?", ":" "),t.replace(Bu,"{\n/* [wrapped with "+i+"] */\n")}(n,function $l(t,i){return St(L,function(e){var n="_."+e[0];i&e[1]&&!xe(t,n)&&t.push(n)}),t.sort()}(function Xl(t){var i=t.match(Lu);return i?i[1].split(Pu):[]}(n),e)))}function Lh(t){var i=0,e=0;return function(){var n=aa(),s=16-(n-e);if(e=n,s>0){if(++i>=800)return arguments[0]}else i=0;return t.apply(l,arguments)}}function rn(t,i){var e=-1,n=t.length,s=n-1;for(i=i===l?n:i;++e<i;){var o=os(e,s),a=t[o];t[o]=t[e],t[e]=a}return t.length=i,t}var Ph=function Ol(t){var i=an(t,function(n){return 500===e.size&&e.clear(),n}),e=i.cache;return i}(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(Eu,function(e,n,s,o){i.push(s?o.replace(Du,"$1"):n||e)}),i});function jt(t){if("string"==typeof t||Tt(t))return t;var i=t+"";return"0"==i&&1/t==-ii?"-0":i}function Mi(t){if(null!=t){try{return Ee.call(t)}catch{}try{return t+""}catch{}}return""}function Hh(t){if(t instanceof F)return t.clone();var i=new Lt(t.__wrapped__,t.__chain__);return i.__actions__=It(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}var Zl=O(function(t,i){return it(t)?de(t,at(i,1,it,!0)):[]}),Jl=O(function(t,i){var e=Ot(i);return it(e)&&(e=l),it(t)?de(t,at(i,1,it,!0),M(e,2)):[]}),Ql=O(function(t,i){var e=Ot(i);return it(e)&&(e=l),it(t)?de(t,at(i,1,it,!0),l,e):[]});function Oh(t,i,e){var n=null==t?0:t.length;if(!n)return-1;var s=null==e?0:P(e);return s<0&&(s=rt(n+s,0)),Re(t,M(i,3),s)}function Dh(t,i,e){var n=null==t?0:t.length;if(!n)return-1;var s=n-1;return e!==l&&(s=P(e),s=e<0?rt(n+s,0):ct(s,n-1)),Re(t,M(i,3),s,!0)}function Fh(t){return null!=t&&t.length?at(t,1):[]}function Gh(t){return t&&t.length?t[0]:l}var af=O(function(t){var i=Q(t,cs);return i.length&&i[0]===t[0]?ns(i):[]}),lf=O(function(t){var i=Ot(t),e=Q(t,cs);return i===Ot(e)?i=l:e.pop(),e.length&&e[0]===t[0]?ns(e,M(i,2)):[]}),ff=O(function(t){var i=Ot(t),e=Q(t,cs);return(i="function"==typeof i?i:l)&&e.pop(),e.length&&e[0]===t[0]?ns(e,l,i):[]});function Ot(t){var i=null==t?0:t.length;return i?t[i-1]:l}var gf=O(Nh);function Nh(t,i){return t&&t.length&&i&&i.length?us(t,i):t}var Wf=ui(function(t,i){var e=null==t?0:t.length,n=jn(t,i);return nh(t,Q(i,function(s){return oi(s,e)?+s:s}).sort(ch)),n});function xs(t){return null==t?t:fa.call(t)}var Uf=O(function(t){return bi(at(t,1,it,!0))}),Sf=O(function(t){var i=Ot(t);return it(i)&&(i=l),bi(at(t,1,it,!0),M(i,2))}),Bf=O(function(t){var i=Ot(t);return i="function"==typeof i?i:l,bi(at(t,1,it,!0),l,i)});function Rs(t){if(!t||!t.length)return[];var i=0;return t=gi(t,function(e){if(it(e))return i=rt(e.length,i),!0}),$n(i,function(e){return Q(t,Fn(e))})}function $h(t,i){if(!t||!t.length)return[];var e=Rs(t);return null==i?e:Q(e,function(n){return kt(i,l,n)})}var Of=O(function(t,i){return it(t)?de(t,i):[]}),Df=O(function(t){return ds(gi(t,it))}),Ff=O(function(t){var i=Ot(t);return it(i)&&(i=l),ds(gi(t,it),M(i,2))}),Gf=O(function(t){var i=Ot(t);return i="function"==typeof i?i:l,ds(gi(t,it),l,i)}),Nf=O(Rs),qf=O(function(t){var i=t.length,e=i>1?t[i-1]:l;return e="function"==typeof e?(t.pop(),e):l,$h(t,e)});function Kh(t){var i=h(t);return i.__chain__=!0,i}function hn(t,i){return i(t)}var Zf=ui(function(t){var i=t.length,e=i?t[0]:0,n=this.__wrapped__,s=function(o){return jn(o,t)};return!(i>1||this.__actions__.length)&&n instanceof F&&oi(e)?((n=n.slice(e,+e+(i?1:0))).__actions__.push({func:hn,args:[s],thisArg:l}),new Lt(n,this.__chain__).thru(function(o){return i&&!o.length&&o.push(l),o})):this.thru(s)}),nd=Qe(function(t,i,e){q.call(t,e)?++t[e]:ri(t,e,1)}),hd=wh(Oh),ud=wh(Dh);function qh(t,i){return(B(t)?St:wi)(t,M(i,3))}function zh(t,i){return(B(t)?Ro:Nr)(t,M(i,3))}var fd=Qe(function(t,i,e){q.call(t,e)?t[e].push(i):ri(t,e,[i])}),cd=O(function(t,i,e){var n=-1,s="function"==typeof i,o=yt(t)?m(t.length):[];return wi(t,function(a){o[++n]=s?kt(i,a,e):ce(a,i,e)}),o}),pd=Qe(function(t,i,e){ri(t,e,i)});function un(t,i){return(B(t)?Q:Qr)(t,M(i,3))}var md=Qe(function(t,i,e){t[e?0:1].push(i)},function(){return[[],[]]}),Cd=O(function(t,i){if(null==t)return[];var e=i.length;return e>1&&Wt(t,i[0],i[1])?i=[]:e>2&&Wt(i[0],i[1],i[2])&&(i=[i[0]]),ih(t,at(i,1),[])}),on=sa||function(){return ot.Date.now()};function Zh(t,i,e){return i=e?l:i,hi(t,128,l,l,l,l,i=t&&null==i?t.length:i)}function Jh(t,i){var e;if("function"!=typeof i)throw new Bt(gt);return t=P(t),function(){return--t>0&&(e=i.apply(this,arguments)),t<=1&&(i=l),e}}var Ts=O(function(t,i,e){var n=1;if(e.length){var s=_i(e,qi(Ts));n|=32}return hi(t,n,i,e,s)}),Qh=O(function(t,i,e){var n=3;if(e.length){var s=_i(e,qi(Qh));n|=32}return hi(i,n,t,e,s)});function tu(t,i,e){var n,s,o,a,d,p,b=0,v=!1,I=!1,C=!0;if("function"!=typeof t)throw new Bt(gt);function R(et){var Zt=n,fi=s;return n=s=l,b=et,a=t.apply(fi,Zt)}function X(et){return b=et,d=We(D,i),v?R(et):a}function E(et){var Zt=et-p;return p===l||Zt>=i||Zt<0||I&&et-b>=o}function D(){var et=on();if(E(et))return G(et);d=We(D,function H(et){var wu=i-(et-p);return I?ct(wu,o-(et-b)):wu}(et))}function G(et){return d=l,C&&n?R(et):(n=s=l,a)}function Yt(){var et=on(),Zt=E(et);if(n=arguments,s=this,p=et,Zt){if(d===l)return X(p);if(I)return lh(d),d=We(D,i),R(p)}return d===l&&(d=We(D,i)),a}return i=Dt(i)||0,j(e)&&(v=!!e.leading,o=(I="maxWait"in e)?rt(Dt(e.maxWait)||0,i):o,C="trailing"in e?!!e.trailing:C),Yt.cancel=function Mt(){d!==l&&lh(d),b=0,n=p=s=d=l},Yt.flush=function wt(){return d===l?a:G(on())},Yt}var xd=O(function(t,i){return Gr(t,1,i)}),Rd=O(function(t,i,e){return Gr(t,Dt(i)||0,e)});function an(t,i){if("function"!=typeof t||null!=i&&"function"!=typeof i)throw new Bt(gt);var e=function(){var n=arguments,s=i?i.apply(this,n):n[0],o=e.cache;if(o.has(s))return o.get(s);var a=t.apply(this,n);return e.cache=o.set(s,a)||o,a};return e.cache=new(an.Cache||si),e}function ln(t){if("function"!=typeof t)throw new Bt(gt);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}an.Cache=si;var Yd=ml(function(t,i){var e=(i=1==i.length&&B(i[0])?Q(i[0],xt(M())):Q(at(i,1),xt(M()))).length;return O(function(n){for(var s=-1,o=ct(n.length,e);++s<o;)n[s]=i[s].call(this,n[s]);return kt(t,this,n)})}),Ms=O(function(t,i){var e=_i(i,qi(Ms));return hi(t,32,l,i,e)}),iu=O(function(t,i){var e=_i(i,qi(iu));return hi(t,64,l,i,e)}),Xd=ui(function(t,i){return hi(t,256,l,l,l,i)});function zt(t,i){return t===i||t!=t&&i!=i}var Nd=en(es),$d=en(function(t,i){return t>=i}),Yi=zr(function(){return arguments}())?zr:function(t){return tt(t)&&q.call(t,"callee")&&!Ur.call(t,"callee")},B=m.isArray,Kd=gr?xt(gr):function ja(t){return tt(t)&&_t(t)==ne};function yt(t){return null!=t&&fn(t.length)&&!ai(t)}function it(t){return tt(t)&&yt(t)}var yi=ha||Ds,zd=mr?xt(mr):function tl(t){return tt(t)&&_t(t)==dt};function Ys(t){if(!tt(t))return!1;var i=_t(t);return i==ve||"[object DOMException]"==i||"string"==typeof t.message&&"string"==typeof t.name&&!we(t)}function ai(t){if(!j(t))return!1;var i=_t(t);return i==Ie||i==Fs||"[object AsyncFunction]"==i||"[object Proxy]"==i}function eu(t){return"number"==typeof t&&t==P(t)}function fn(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Y}function j(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}function tt(t){return null!=t&&"object"==typeof t}var nu=_r?xt(_r):function el(t){return tt(t)&&pt(t)==Nt};function su(t){return"number"==typeof t||tt(t)&&_t(t)==ji}function we(t){if(!tt(t)||_t(t)!=ei)return!1;var i=Le(t);if(null===i)return!0;var e=q.call(i,"constructor")&&i.constructor;return"function"==typeof e&&e instanceof e&&Ee.call(e)==ta}var Xs=Wr?xt(Wr):function nl(t){return tt(t)&&_t(t)==te},ru=wr?xt(wr):function sl(t){return tt(t)&&pt(t)==$t};function dn(t){return"string"==typeof t||!B(t)&&tt(t)&&_t(t)==ie}function Tt(t){return"symbol"==typeof t||tt(t)&&_t(t)==ye}var zi=br?xt(br):function rl(t){return tt(t)&&fn(t.length)&&!!J[_t(t)]},lc=en(hs),fc=en(function(t,i){return t<=i});function hu(t){if(!t)return[];if(yt(t))return dn(t)?Kt(t):It(t);if(he&&t[he])return function Fo(c){for(var w,m=[];!(w=c.next()).done;)m.push(w.value);return m}(t[he]());var i=pt(t);return(i==Nt?qn:i==$t?Te:Zi)(t)}function li(t){return t?(t=Dt(t))===ii||t===-ii?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function P(t){var i=li(t),e=i%1;return i==i?e?i-e:i:0}function uu(t){return t?xi(P(t),0,f):0}function Dt(t){if("number"==typeof t)return t;if(Tt(t))return u;if(j(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=j(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=kr(t);var e=Nu.test(t);return e||Ku.test(t)?Co(t.slice(2),e?2:8):Gu.test(t)?u:+t}function ou(t){return Vt(t,At(t))}function K(t){return null==t?"":Rt(t)}var cc=$i(function(t,i){if(_e(i)||yt(i))Vt(i,ht(i),t);else for(var e in i)q.call(i,e)&&fe(t,e,i[e])}),au=$i(function(t,i){Vt(i,At(i),t)}),cn=$i(function(t,i,e,n){Vt(i,At(i),t,n)}),pc=$i(function(t,i,e,n){Vt(i,ht(i),t,n)}),gc=ui(jn),_c=O(function(t,i){t=z(t);var e=-1,n=i.length,s=n>2?i[2]:l;for(s&&Wt(i[0],i[1],s)&&(n=1);++e<n;)for(var o=i[e],a=At(o),d=-1,p=a.length;++d<p;){var b=a[d],v=t[b];(v===l||zt(v,Di[b])&&!q.call(t,b))&&(t[b]=o[b])}return t}),Wc=O(function(t){return t.push(l,kh),kt(lu,l,t)});function Es(t,i,e){var n=null==t?l:Ri(t,i);return n===l?e:n}function Us(t,i){return null!=t&&Th(t,i,Ja)}var Rc=vh(function(t,i,e){null!=i&&"function"!=typeof i.toString&&(i=Ue.call(i)),t[i]=e},Bs(Ct)),Tc=vh(function(t,i,e){null!=i&&"function"!=typeof i.toString&&(i=Ue.call(i)),q.call(t,i)?t[i].push(e):t[i]=[e]},M),Mc=O(ce);function ht(t){return yt(t)?Hr(t):rs(t)}function At(t){return yt(t)?Hr(t,!0):function hl(t){if(!j(t))return function Fl(t){var i=[];if(null!=t)for(var e in z(t))i.push(e);return i}(t);var i=_e(t),e=[];for(var n in t)"constructor"==n&&(i||!q.call(t,n))||e.push(n);return e}(t)}var Ec=$i(function(t,i,e){ze(t,i,e)}),lu=$i(function(t,i,e,n){ze(t,i,e,n)}),Uc=ui(function(t,i){var e={};if(null==t)return e;var n=!1;i=Q(i,function(o){return o=vi(o,t),n||(n=o.length>1),o}),Vt(t,ws(t),e),n&&(e=Pt(e,7,xl));for(var s=i.length;s--;)fs(e,i[s]);return e}),Bc=ui(function(t,i){return null==t?{}:function ol(t,i){return eh(t,i,function(e,n){return Us(t,n)})}(t,i)});function fu(t,i){if(null==t)return{};var e=Q(ws(t),function(n){return[n]});return i=M(i),eh(t,e,function(n,s){return i(n,s[0])})}var du=Ah(ht),cu=Ah(At);function Zi(t){return null==t?[]:Kn(t,ht(t))}var zc=Ki(function(t,i,e){return i=i.toLowerCase(),t+(e?pu(i):i)});function pu(t){return Ss(K(t).toLowerCase())}function gu(t){return(t=K(t))&&t.replace(zu,Lo).replace(po,"")}var Vc=Ki(function(t,i,e){return t+(e?"-":"")+i.toLowerCase()}),jc=Ki(function(t,i,e){return t+(e?" ":"")+i.toLowerCase()}),tp=Wh("toLowerCase"),up=Ki(function(t,i,e){return t+(e?"_":"")+i.toLowerCase()}),ap=Ki(function(t,i,e){return t+(e?" ":"")+Ss(i)}),wp=Ki(function(t,i,e){return t+(e?" ":"")+i.toUpperCase()}),Ss=Wh("toUpperCase");function mu(t,i,e){return t=K(t),(i=e?l:i)===l?function Do(c){return _o.test(c)}(t)?function Zo(c){return c.match(go)||[]}(t):function Xo(c){return c.match(Hu)||[]}(t):t.match(i)||[]}var _u=O(function(t,i){try{return kt(t,l,i)}catch(e){return Ys(e)?e:new U(e)}}),bp=ui(function(t,i){return St(i,function(e){e=jt(e),ri(t,e,Ts(t[e],t))}),t});function Bs(t){return function(){return t}}var Ap=bh(),Cp=bh(!0);function Ct(t){return t}function Ls(t){return Jr("function"==typeof t?t:Pt(t,1))}var Rp=O(function(t,i){return function(e){return ce(e,t,i)}}),Tp=O(function(t,i){return function(e){return ce(t,e,i)}});function Ps(t,i,e){var n=ht(i),s=qe(i,n);null==e&&(!j(i)||!s.length&&n.length)&&(e=i,i=t,t=this,s=qe(i,ht(i)));var o=!(j(e)&&"chain"in e&&!e.chain),a=ai(t);return St(s,function(d){var p=i[d];t[d]=p,a&&(t.prototype[d]=function(){var b=this.__chain__;if(o||b){var v=t(this.__wrapped__),I=v.__actions__=It(this.__actions__);return I.push({func:p,args:arguments,thisArg:t}),v.__chain__=b,v}return p.apply(t,mi([this.value()],arguments))})}),t}function Hs(){}var Xp=ms(Q),Ep=ms(vr),Up=ms(Dn);function Wu(t){return ys(t)?Fn(jt(t)):function al(t){return function(i){return Ri(i,t)}}(t)}var Bp=Ih(),Lp=Ih(!0);function Os(){return[]}function Ds(){return!1}var Np=je(function(t,i){return t+i},0),$p=_s("ceil"),Kp=je(function(t,i){return t/i},1),qp=_s("floor"),tg=je(function(t,i){return t*i},1),ig=_s("round"),eg=je(function(t,i){return t-i},0);return h.after=function kd(t,i){if("function"!=typeof i)throw new Bt(gt);return t=P(t),function(){if(--t<1)return i.apply(this,arguments)}},h.ary=Zh,h.assign=cc,h.assignIn=au,h.assignInWith=cn,h.assignWith=pc,h.at=gc,h.before=Jh,h.bind=Ts,h.bindAll=bp,h.bindKey=Qh,h.castArray=function Pd(){if(!arguments.length)return[];var t=arguments[0];return B(t)?t:[t]},h.chain=Kh,h.chunk=function Kl(t,i,e){i=(e?Wt(t,i,e):i===l)?1:rt(P(i),0);var n=null==t?0:t.length;if(!n||i<1)return[];for(var s=0,o=0,a=m(Oe(n/i));s<n;)a[o++]=Ht(t,s,s+=i);return a},h.compact=function ql(t){for(var i=-1,e=null==t?0:t.length,n=0,s=[];++i<e;){var o=t[i];o&&(s[n++]=o)}return s},h.concat=function zl(){var t=arguments.length;if(!t)return[];for(var i=m(t-1),e=arguments[0],n=t;n--;)i[n-1]=arguments[n];return mi(B(e)?It(e):[e],at(i,1))},h.cond=function vp(t){var i=null==t?0:t.length,e=M();return t=i?Q(t,function(n){if("function"!=typeof n[1])throw new Bt(gt);return[e(n[0]),n[1]]}):[],O(function(n){for(var s=-1;++s<i;){var o=t[s];if(kt(o[0],this,n))return kt(o[1],this,n)}})},h.conforms=function Ip(t){return function Ka(t){var i=ht(t);return function(e){return Fr(e,t,i)}}(Pt(t,1))},h.constant=Bs,h.countBy=nd,h.create=function mc(t,i){var e=Ni(t);return null==i?e:Dr(e,i)},h.curry=function Vh(t,i,e){var n=hi(t,8,l,l,l,l,l,i=e?l:i);return n.placeholder=Vh.placeholder,n},h.curryRight=function jh(t,i,e){var n=hi(t,16,l,l,l,l,l,i=e?l:i);return n.placeholder=jh.placeholder,n},h.debounce=tu,h.defaults=_c,h.defaultsDeep=Wc,h.defer=xd,h.delay=Rd,h.difference=Zl,h.differenceBy=Jl,h.differenceWith=Ql,h.drop=function Vl(t,i,e){var n=null==t?0:t.length;return n?Ht(t,(i=e||i===l?1:P(i))<0?0:i,n):[]},h.dropRight=function jl(t,i,e){var n=null==t?0:t.length;return n?Ht(t,0,(i=n-(i=e||i===l?1:P(i)))<0?0:i):[]},h.dropRightWhile=function tf(t,i){return t&&t.length?Je(t,M(i,3),!0,!0):[]},h.dropWhile=function ef(t,i){return t&&t.length?Je(t,M(i,3),!0):[]},h.fill=function nf(t,i,e,n){var s=null==t?0:t.length;return s?(e&&"number"!=typeof e&&Wt(t,i,e)&&(e=0,n=s),function za(t,i,e,n){var s=t.length;for((e=P(e))<0&&(e=-e>s?0:s+e),(n=n===l||n>s?s:P(n))<0&&(n+=s),n=e>n?0:uu(n);e<n;)t[e++]=i;return t}(t,i,e,n)):[]},h.filter=function rd(t,i){return(B(t)?gi:$r)(t,M(i,3))},h.flatMap=function od(t,i){return at(un(t,i),1)},h.flatMapDeep=function ad(t,i){return at(un(t,i),ii)},h.flatMapDepth=function ld(t,i,e){return e=e===l?1:P(e),at(un(t,i),e)},h.flatten=Fh,h.flattenDeep=function sf(t){return null!=t&&t.length?at(t,ii):[]},h.flattenDepth=function rf(t,i){return null!=t&&t.length?at(t,i=i===l?1:P(i)):[]},h.flip=function Td(t){return hi(t,512)},h.flow=Ap,h.flowRight=Cp,h.fromPairs=function hf(t){for(var i=-1,e=null==t?0:t.length,n={};++i<e;){var s=t[i];n[s[0]]=s[1]}return n},h.functions=function Cc(t){return null==t?[]:qe(t,ht(t))},h.functionsIn=function kc(t){return null==t?[]:qe(t,At(t))},h.groupBy=fd,h.initial=function of(t){return null!=t&&t.length?Ht(t,0,-1):[]},h.intersection=af,h.intersectionBy=lf,h.intersectionWith=ff,h.invert=Rc,h.invertBy=Tc,h.invokeMap=cd,h.iteratee=Ls,h.keyBy=pd,h.keys=ht,h.keysIn=At,h.map=un,h.mapKeys=function Yc(t,i){var e={};return i=M(i,3),Qt(t,function(n,s,o){ri(e,i(n,s,o),n)}),e},h.mapValues=function Xc(t,i){var e={};return i=M(i,3),Qt(t,function(n,s,o){ri(e,s,i(n,s,o))}),e},h.matches=function kp(t){return Vr(Pt(t,1))},h.matchesProperty=function xp(t,i){return jr(t,Pt(i,1))},h.memoize=an,h.merge=Ec,h.mergeWith=lu,h.method=Rp,h.methodOf=Tp,h.mixin=Ps,h.negate=ln,h.nthArg=function Yp(t){return t=P(t),O(function(i){return th(i,t)})},h.omit=Uc,h.omitBy=function Sc(t,i){return fu(t,ln(M(i)))},h.once=function Md(t){return Jh(2,t)},h.orderBy=function gd(t,i,e,n){return null==t?[]:(B(i)||(i=null==i?[]:[i]),B(e=n?l:e)||(e=null==e?[]:[e]),ih(t,i,e))},h.over=Xp,h.overArgs=Yd,h.overEvery=Ep,h.overSome=Up,h.partial=Ms,h.partialRight=iu,h.partition=md,h.pick=Bc,h.pickBy=fu,h.property=Wu,h.propertyOf=function Sp(t){return function(i){return null==t?l:Ri(t,i)}},h.pull=gf,h.pullAll=Nh,h.pullAllBy=function mf(t,i,e){return t&&t.length&&i&&i.length?us(t,i,M(e,2)):t},h.pullAllWith=function _f(t,i,e){return t&&t.length&&i&&i.length?us(t,i,l,e):t},h.pullAt=Wf,h.range=Bp,h.rangeRight=Lp,h.rearg=Xd,h.reject=function wd(t,i){return(B(t)?gi:$r)(t,ln(M(i,3)))},h.remove=function wf(t,i){var e=[];if(!t||!t.length)return e;var n=-1,s=[],o=t.length;for(i=M(i,3);++n<o;){var a=t[n];i(a,n,t)&&(e.push(a),s.push(n))}return nh(t,s),e},h.rest=function Ed(t,i){if("function"!=typeof t)throw new Bt(gt);return O(t,i=i===l?i:P(i))},h.reverse=xs,h.sampleSize=function vd(t,i,e){return i=(e?Wt(t,i,e):i===l)?1:P(i),(B(t)?Fa:dl)(t,i)},h.set=function Pc(t,i,e){return null==t?t:ge(t,i,e)},h.setWith=function Hc(t,i,e,n){return n="function"==typeof n?n:l,null==t?t:ge(t,i,e,n)},h.shuffle=function Id(t){return(B(t)?Ga:pl)(t)},h.slice=function bf(t,i,e){var n=null==t?0:t.length;return n?(e&&"number"!=typeof e&&Wt(t,i,e)?(i=0,e=n):(i=null==i?0:P(i),e=e===l?n:P(e)),Ht(t,i,e)):[]},h.sortBy=Cd,h.sortedUniq=function xf(t){return t&&t.length?rh(t):[]},h.sortedUniqBy=function Rf(t,i){return t&&t.length?rh(t,M(i,2)):[]},h.split=function op(t,i,e){return e&&"number"!=typeof e&&Wt(t,i,e)&&(i=e=l),(e=e===l?f:e>>>0)?(t=K(t))&&("string"==typeof i||null!=i&&!Xs(i))&&!(i=Rt(i))&&Hi(t)?Ii(Kt(t),0,e):t.split(i,e):[]},h.spread=function Ud(t,i){if("function"!=typeof t)throw new Bt(gt);return i=null==i?0:rt(P(i),0),O(function(e){var n=e[i],s=Ii(e,0,i);return n&&mi(s,n),kt(t,this,s)})},h.tail=function Tf(t){var i=null==t?0:t.length;return i?Ht(t,1,i):[]},h.take=function Mf(t,i,e){return t&&t.length?Ht(t,0,(i=e||i===l?1:P(i))<0?0:i):[]},h.takeRight=function Yf(t,i,e){var n=null==t?0:t.length;return n?Ht(t,(i=n-(i=e||i===l?1:P(i)))<0?0:i,n):[]},h.takeRightWhile=function Xf(t,i){return t&&t.length?Je(t,M(i,3),!1,!0):[]},h.takeWhile=function Ef(t,i){return t&&t.length?Je(t,M(i,3)):[]},h.tap=function zf(t,i){return i(t),t},h.throttle=function Sd(t,i,e){var n=!0,s=!0;if("function"!=typeof t)throw new Bt(gt);return j(e)&&(n="leading"in e?!!e.leading:n,s="trailing"in e?!!e.trailing:s),tu(t,i,{leading:n,maxWait:i,trailing:s})},h.thru=hn,h.toArray=hu,h.toPairs=du,h.toPairsIn=cu,h.toPath=function Fp(t){return B(t)?Q(t,jt):Tt(t)?[t]:It(Ph(K(t)))},h.toPlainObject=ou,h.transform=function Oc(t,i,e){var n=B(t),s=n||yi(t)||zi(t);if(i=M(i,4),null==e){var o=t&&t.constructor;e=s?n?new o:[]:j(t)&&ai(o)?Ni(Le(t)):{}}return(s?St:Qt)(t,function(a,d,p){return i(e,a,d,p)}),e},h.unary=function Bd(t){return Zh(t,1)},h.union=Uf,h.unionBy=Sf,h.unionWith=Bf,h.uniq=function Lf(t){return t&&t.length?bi(t):[]},h.uniqBy=function Pf(t,i){return t&&t.length?bi(t,M(i,2)):[]},h.uniqWith=function Hf(t,i){return i="function"==typeof i?i:l,t&&t.length?bi(t,l,i):[]},h.unset=function Dc(t,i){return null==t||fs(t,i)},h.unzip=Rs,h.unzipWith=$h,h.update=function Fc(t,i,e){return null==t?t:uh(t,i,ps(e))},h.updateWith=function Gc(t,i,e,n){return n="function"==typeof n?n:l,null==t?t:uh(t,i,ps(e),n)},h.values=Zi,h.valuesIn=function Nc(t){return null==t?[]:Kn(t,At(t))},h.without=Of,h.words=mu,h.wrap=function Ld(t,i){return Ms(ps(i),t)},h.xor=Df,h.xorBy=Ff,h.xorWith=Gf,h.zip=Nf,h.zipObject=function $f(t,i){return ah(t||[],i||[],fe)},h.zipObjectDeep=function Kf(t,i){return ah(t||[],i||[],ge)},h.zipWith=qf,h.entries=du,h.entriesIn=cu,h.extend=au,h.extendWith=cn,Ps(h,h),h.add=Np,h.attempt=_u,h.camelCase=zc,h.capitalize=pu,h.ceil=$p,h.clamp=function $c(t,i,e){return e===l&&(e=i,i=l),e!==l&&(e=(e=Dt(e))==e?e:0),i!==l&&(i=(i=Dt(i))==i?i:0),xi(Dt(t),i,e)},h.clone=function Hd(t){return Pt(t,4)},h.cloneDeep=function Dd(t){return Pt(t,5)},h.cloneDeepWith=function Fd(t,i){return Pt(t,5,i="function"==typeof i?i:l)},h.cloneWith=function Od(t,i){return Pt(t,4,i="function"==typeof i?i:l)},h.conformsTo=function Gd(t,i){return null==i||Fr(t,i,ht(i))},h.deburr=gu,h.defaultTo=function yp(t,i){return null==t||t!=t?i:t},h.divide=Kp,h.endsWith=function Zc(t,i,e){t=K(t),i=Rt(i);var n=t.length,s=e=e===l?n:xi(P(e),0,n);return(e-=i.length)>=0&&t.slice(e,s)==i},h.eq=zt,h.escape=function Jc(t){return(t=K(t))&&Ru.test(t)?t.replace($s,Po):t},h.escapeRegExp=function Qc(t){return(t=K(t))&&Uu.test(t)?t.replace(Yn,"\\$&"):t},h.every=function sd(t,i,e){var n=B(t)?vr:qa;return e&&Wt(t,i,e)&&(i=l),n(t,M(i,3))},h.find=hd,h.findIndex=Oh,h.findKey=function wc(t,i){return Ir(t,M(i,3),Qt)},h.findLast=ud,h.findLastIndex=Dh,h.findLastKey=function bc(t,i){return Ir(t,M(i,3),is)},h.floor=qp,h.forEach=qh,h.forEachRight=zh,h.forIn=function vc(t,i){return null==t?t:ts(t,M(i,3),At)},h.forInRight=function Ic(t,i){return null==t?t:Kr(t,M(i,3),At)},h.forOwn=function yc(t,i){return t&&Qt(t,M(i,3))},h.forOwnRight=function Ac(t,i){return t&&is(t,M(i,3))},h.get=Es,h.gt=Nd,h.gte=$d,h.has=function xc(t,i){return null!=t&&Th(t,i,Za)},h.hasIn=Us,h.head=Gh,h.identity=Ct,h.includes=function dd(t,i,e,n){t=yt(t)?t:Zi(t),e=e&&!n?P(e):0;var s=t.length;return e<0&&(e=rt(s+e,0)),dn(t)?e<=s&&t.indexOf(i,e)>-1:!!s&&Pi(t,i,e)>-1},h.indexOf=function uf(t,i,e){var n=null==t?0:t.length;if(!n)return-1;var s=null==e?0:P(e);return s<0&&(s=rt(n+s,0)),Pi(t,i,s)},h.inRange=function Kc(t,i,e){return i=li(i),e===l?(e=i,i=0):e=li(e),function Qa(t,i,e){return t>=ct(i,e)&&t<rt(i,e)}(t=Dt(t),i,e)},h.invoke=Mc,h.isArguments=Yi,h.isArray=B,h.isArrayBuffer=Kd,h.isArrayLike=yt,h.isArrayLikeObject=it,h.isBoolean=function qd(t){return!0===t||!1===t||tt(t)&&_t(t)==S},h.isBuffer=yi,h.isDate=zd,h.isElement=function Zd(t){return tt(t)&&1===t.nodeType&&!we(t)},h.isEmpty=function Jd(t){if(null==t)return!0;if(yt(t)&&(B(t)||"string"==typeof t||"function"==typeof t.splice||yi(t)||zi(t)||Yi(t)))return!t.length;var i=pt(t);if(i==Nt||i==$t)return!t.size;if(_e(t))return!rs(t).length;for(var e in t)if(q.call(t,e))return!1;return!0},h.isEqual=function Qd(t,i){return pe(t,i)},h.isEqualWith=function Vd(t,i,e){var n=(e="function"==typeof e?e:l)?e(t,i):l;return n===l?pe(t,i,l,e):!!n},h.isError=Ys,h.isFinite=function jd(t){return"number"==typeof t&&Br(t)},h.isFunction=ai,h.isInteger=eu,h.isLength=fn,h.isMap=nu,h.isMatch=function tc(t,i){return t===i||ss(t,i,vs(i))},h.isMatchWith=function ic(t,i,e){return e="function"==typeof e?e:l,ss(t,i,vs(i),e)},h.isNaN=function ec(t){return su(t)&&t!=+t},h.isNative=function nc(t){if(Hl(t))throw new U("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Zr(t)},h.isNil=function rc(t){return null==t},h.isNull=function sc(t){return null===t},h.isNumber=su,h.isObject=j,h.isObjectLike=tt,h.isPlainObject=we,h.isRegExp=Xs,h.isSafeInteger=function hc(t){return eu(t)&&t>=-Y&&t<=Y},h.isSet=ru,h.isString=dn,h.isSymbol=Tt,h.isTypedArray=zi,h.isUndefined=function uc(t){return t===l},h.isWeakMap=function oc(t){return tt(t)&&pt(t)==ee},h.isWeakSet=function ac(t){return tt(t)&&"[object WeakSet]"==_t(t)},h.join=function df(t,i){return null==t?"":ua.call(t,i)},h.kebabCase=Vc,h.last=Ot,h.lastIndexOf=function cf(t,i,e){var n=null==t?0:t.length;if(!n)return-1;var s=n;return e!==l&&(s=(s=P(e))<0?rt(n+s,0):ct(s,n-1)),i==i?function $o(c,w,m){for(var x=m+1;x--;)if(c[x]===w)return x;return x}(t,i,s):Re(t,yr,s,!0)},h.lowerCase=jc,h.lowerFirst=tp,h.lt=lc,h.lte=fc,h.max=function zp(t){return t&&t.length?Ke(t,Ct,es):l},h.maxBy=function Zp(t,i){return t&&t.length?Ke(t,M(i,2),es):l},h.mean=function Jp(t){return Ar(t,Ct)},h.meanBy=function Qp(t,i){return Ar(t,M(i,2))},h.min=function Vp(t){return t&&t.length?Ke(t,Ct,hs):l},h.minBy=function jp(t,i){return t&&t.length?Ke(t,M(i,2),hs):l},h.stubArray=Os,h.stubFalse=Ds,h.stubObject=function Pp(){return{}},h.stubString=function Hp(){return""},h.stubTrue=function Op(){return!0},h.multiply=tg,h.nth=function pf(t,i){return t&&t.length?th(t,P(i)):l},h.noConflict=function Mp(){return ot._===this&&(ot._=ia),this},h.noop=Hs,h.now=on,h.pad=function ip(t,i,e){t=K(t);var n=(i=P(i))?Oi(t):0;if(!i||n>=i)return t;var s=(i-n)/2;return tn(De(s),e)+t+tn(Oe(s),e)},h.padEnd=function ep(t,i,e){t=K(t);var n=(i=P(i))?Oi(t):0;return i&&n<i?t+tn(i-n,e):t},h.padStart=function np(t,i,e){t=K(t);var n=(i=P(i))?Oi(t):0;return i&&n<i?tn(i-n,e)+t:t},h.parseInt=function sp(t,i,e){return e||null==i?i=0:i&&(i=+i),la(K(t).replace(Xn,""),i||0)},h.random=function qc(t,i,e){if(e&&"boolean"!=typeof e&&Wt(t,i,e)&&(i=e=l),e===l&&("boolean"==typeof i?(e=i,i=l):"boolean"==typeof t&&(e=t,t=l)),t===l&&i===l?(t=0,i=1):(t=li(t),i===l?(i=t,t=0):i=li(i)),t>i){var n=t;t=i,i=n}if(e||t%1||i%1){var s=Lr();return ct(t+s*(i-t+Ao("1e-"+((s+"").length-1))),i)}return os(t,i)},h.reduce=function _d(t,i,e){var n=B(t)?On:Cr,s=arguments.length<3;return n(t,M(i,4),e,s,wi)},h.reduceRight=function Wd(t,i,e){var n=B(t)?To:Cr,s=arguments.length<3;return n(t,M(i,4),e,s,Nr)},h.repeat=function rp(t,i,e){return i=(e?Wt(t,i,e):i===l)?1:P(i),as(K(t),i)},h.replace=function hp(){var t=arguments,i=K(t[0]);return t.length<3?i:i.replace(t[1],t[2])},h.result=function Lc(t,i,e){var n=-1,s=(i=vi(i,t)).length;for(s||(s=1,t=l);++n<s;){var o=null==t?l:t[jt(i[n])];o===l&&(n=s,o=e),t=ai(o)?o.call(t):o}return t},h.round=ig,h.runInContext=c,h.sample=function bd(t){return(B(t)?Or:fl)(t)},h.size=function yd(t){if(null==t)return 0;if(yt(t))return dn(t)?Oi(t):t.length;var i=pt(t);return i==Nt||i==$t?t.size:rs(t).length},h.snakeCase=up,h.some=function Ad(t,i,e){var n=B(t)?Dn:gl;return e&&Wt(t,i,e)&&(i=l),n(t,M(i,3))},h.sortedIndex=function vf(t,i){return Ze(t,i)},h.sortedIndexBy=function If(t,i,e){return ls(t,i,M(e,2))},h.sortedIndexOf=function yf(t,i){var e=null==t?0:t.length;if(e){var n=Ze(t,i);if(n<e&&zt(t[n],i))return n}return-1},h.sortedLastIndex=function Af(t,i){return Ze(t,i,!0)},h.sortedLastIndexBy=function Cf(t,i,e){return ls(t,i,M(e,2),!0)},h.sortedLastIndexOf=function kf(t,i){if(null!=t&&t.length){var n=Ze(t,i,!0)-1;if(zt(t[n],i))return n}return-1},h.startCase=ap,h.startsWith=function lp(t,i,e){return t=K(t),e=null==e?0:xi(P(e),0,t.length),i=Rt(i),t.slice(e,e+i.length)==i},h.subtract=eg,h.sum=function ng(t){return t&&t.length?Nn(t,Ct):0},h.sumBy=function sg(t,i){return t&&t.length?Nn(t,M(i,2)):0},h.template=function fp(t,i,e){var n=h.templateSettings;e&&Wt(t,i,e)&&(i=l),t=K(t),i=cn({},i,n,Ch);var d,p,s=cn({},i.imports,n.imports,Ch),o=ht(s),a=Kn(s,o),b=0,v=i.interpolate||Ae,I="__p += '",C=zn((i.escape||Ae).source+"|"+v.source+"|"+(v===Ks?Fu:Ae).source+"|"+(i.evaluate||Ae).source+"|$","g"),R="//# sourceURL="+(q.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wo+"]")+"\n";t.replace(C,function(E,D,G,Mt,wt,Yt){return G||(G=Mt),I+=t.slice(b,Yt).replace(Zu,Ho),D&&(d=!0,I+="' +\n__e("+D+") +\n'"),wt&&(p=!0,I+="';\n"+wt+";\n__p += '"),G&&(I+="' +\n((__t = ("+G+")) == null ? '' : __t) +\n'"),b=Yt+E.length,E}),I+="';\n";var X=q.call(i,"variable")&&i.variable;if(X){if(Ou.test(X))throw new U("Invalid `variable` option passed into `_.template`")}else I="with (obj) {\n"+I+"\n}\n";I=(p?I.replace(Au,""):I).replace(Cu,"$1").replace(ku,"$1;"),I="function("+(X||"obj")+") {\n"+(X?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(d?", __e = _.escape":"")+(p?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+I+"return __p\n}";var H=_u(function(){return $(o,R+"return "+I).apply(l,a)});if(H.source=I,Ys(H))throw H;return H},h.times=function Dp(t,i){if((t=P(t))<1||t>Y)return[];var e=f,n=ct(t,f);i=M(i),t-=f;for(var s=$n(n,i);++e<t;)i(e);return s},h.toFinite=li,h.toInteger=P,h.toLength=uu,h.toLower=function dp(t){return K(t).toLowerCase()},h.toNumber=Dt,h.toSafeInteger=function dc(t){return t?xi(P(t),-Y,Y):0===t?t:0},h.toString=K,h.toUpper=function cp(t){return K(t).toUpperCase()},h.trim=function pp(t,i,e){if((t=K(t))&&(e||i===l))return kr(t);if(!t||!(i=Rt(i)))return t;var n=Kt(t),s=Kt(i);return Ii(n,xr(n,s),Rr(n,s)+1).join("")},h.trimEnd=function gp(t,i,e){if((t=K(t))&&(e||i===l))return t.slice(0,Mr(t)+1);if(!t||!(i=Rt(i)))return t;var n=Kt(t);return Ii(n,0,Rr(n,Kt(i))+1).join("")},h.trimStart=function mp(t,i,e){if((t=K(t))&&(e||i===l))return t.replace(Xn,"");if(!t||!(i=Rt(i)))return t;var n=Kt(t);return Ii(n,xr(n,Kt(i))).join("")},h.truncate=function _p(t,i){var e=30,n="...";if(j(i)){var s="separator"in i?i.separator:s;e="length"in i?P(i.length):e,n="omission"in i?Rt(i.omission):n}var o=(t=K(t)).length;if(Hi(t)){var a=Kt(t);o=a.length}if(e>=o)return t;var d=e-Oi(n);if(d<1)return n;var p=a?Ii(a,0,d).join(""):t.slice(0,d);if(s===l)return p+n;if(a&&(d+=p.length-d),Xs(s)){if(t.slice(d).search(s)){var b,v=p;for(s.global||(s=zn(s.source,K(qs.exec(s))+"g")),s.lastIndex=0;b=s.exec(v);)var I=b.index;p=p.slice(0,I===l?d:I)}}else if(t.indexOf(Rt(s),d)!=d){var C=p.lastIndexOf(s);C>-1&&(p=p.slice(0,C))}return p+n},h.unescape=function Wp(t){return(t=K(t))&&xu.test(t)?t.replace(Ns,Ko):t},h.uniqueId=function Gp(t){var i=++jo;return K(t)+i},h.upperCase=wp,h.upperFirst=Ss,h.each=qh,h.eachRight=zh,h.first=Gh,Ps(h,function(){var t={};return Qt(h,function(i,e){q.call(h.prototype,e)||(t[e]=i)}),t}(),{chain:!1}),h.VERSION="4.17.21",St(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){h[t].placeholder=h}),St(["drop","take"],function(t,i){F.prototype[t]=function(e){e=e===l?1:rt(P(e),0);var n=this.__filtered__&&!i?new F(this):this.clone();return n.__filtered__?n.__takeCount__=ct(e,n.__takeCount__):n.__views__.push({size:ct(e,f),type:t+(n.__dir__<0?"Right":"")}),n},F.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),St(["filter","map","takeWhile"],function(t,i){var e=i+1,n=1==e||3==e;F.prototype[t]=function(s){var o=this.clone();return o.__iteratees__.push({iteratee:M(s,3),type:e}),o.__filtered__=o.__filtered__||n,o}}),St(["head","last"],function(t,i){var e="take"+(i?"Right":"");F.prototype[t]=function(){return this[e](1).value()[0]}}),St(["initial","tail"],function(t,i){var e="drop"+(i?"":"Right");F.prototype[t]=function(){return this.__filtered__?new F(this):this[e](1)}}),F.prototype.compact=function(){return this.filter(Ct)},F.prototype.find=function(t){return this.filter(t).head()},F.prototype.findLast=function(t){return this.reverse().find(t)},F.prototype.invokeMap=O(function(t,i){return"function"==typeof t?new F(this):this.map(function(e){return ce(e,t,i)})}),F.prototype.reject=function(t){return this.filter(ln(M(t)))},F.prototype.slice=function(t,i){t=P(t);var e=this;return e.__filtered__&&(t>0||i<0)?new F(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),i!==l&&(e=(i=P(i))<0?e.dropRight(-i):e.take(i-t)),e)},F.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},F.prototype.toArray=function(){return this.take(f)},Qt(F.prototype,function(t,i){var e=/^(?:filter|find|map|reject)|While$/.test(i),n=/^(?:head|last)$/.test(i),s=h[n?"take"+("last"==i?"Right":""):i],o=n||/^find/.test(i);!s||(h.prototype[i]=function(){var a=this.__wrapped__,d=n?[1]:arguments,p=a instanceof F,b=d[0],v=p||B(a),I=function(D){var G=s.apply(h,mi([D],d));return n&&C?G[0]:G};v&&e&&"function"==typeof b&&1!=b.length&&(p=v=!1);var C=this.__chain__,R=!!this.__actions__.length,X=o&&!C,H=p&&!R;if(!o&&v){a=H?a:new F(this);var E=t.apply(a,d);return E.__actions__.push({func:hn,args:[I],thisArg:l}),new Lt(E,C)}return X&&H?t.apply(this,d):(E=this.thru(I),X?n?E.value()[0]:E.value():E)})}),St(["pop","push","shift","sort","splice","unshift"],function(t){var i=Ye[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);h.prototype[t]=function(){var s=arguments;if(n&&!this.__chain__){var o=this.value();return i.apply(B(o)?o:[],s)}return this[e](function(a){return i.apply(B(a)?a:[],s)})}}),Qt(F.prototype,function(t,i){var e=h[i];if(e){var n=e.name+"";q.call(Gi,n)||(Gi[n]=[]),Gi[n].push({name:i,func:e})}}),Gi[Ve(l,2).name]=[{name:"wrapper",func:l}],F.prototype.clone=function _a(){var t=new F(this.__wrapped__);return t.__actions__=It(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=It(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=It(this.__views__),t},F.prototype.reverse=function Wa(){if(this.__filtered__){var t=new F(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},F.prototype.value=function wa(){var t=this.__wrapped__.value(),i=this.__dir__,e=B(t),n=i<0,s=e?t.length:0,o=function Yl(t,i,e){for(var n=-1,s=e.length;++n<s;){var o=e[n],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":i-=a;break;case"take":i=ct(i,t+a);break;case"takeRight":t=rt(t,i-a)}}return{start:t,end:i}}(0,s,this.__views__),a=o.start,d=o.end,p=d-a,b=n?d:a-1,v=this.__iteratees__,I=v.length,C=0,R=ct(p,this.__takeCount__);if(!e||!n&&s==p&&R==p)return oh(t,this.__actions__);var X=[];t:for(;p--&&C<R;){for(var H=-1,E=t[b+=i];++H<I;){var D=v[H],Mt=D.type,wt=(0,D.iteratee)(E);if(2==Mt)E=wt;else if(!wt){if(1==Mt)continue t;break t}}X[C++]=E}return X},h.prototype.at=Zf,h.prototype.chain=function Jf(){return Kh(this)},h.prototype.commit=function Qf(){return new Lt(this.value(),this.__chain__)},h.prototype.next=function Vf(){this.__values__===l&&(this.__values__=hu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?l:this.__values__[this.__index__++]}},h.prototype.plant=function td(t){for(var i,e=this;e instanceof Ne;){var n=Hh(e);n.__index__=0,n.__values__=l,i?s.__wrapped__=n:i=n;var s=n;e=e.__wrapped__}return s.__wrapped__=t,i},h.prototype.reverse=function id(){var t=this.__wrapped__;if(t instanceof F){var i=t;return this.__actions__.length&&(i=new F(this)),(i=i.reverse()).__actions__.push({func:hn,args:[xs],thisArg:l}),new Lt(i,this.__chain__)}return this.thru(xs)},h.prototype.toJSON=h.prototype.valueOf=h.prototype.value=function ed(){return oh(this.__wrapped__,this.__actions__)},h.prototype.first=h.prototype.head,he&&(h.prototype[he]=function jf(){return this}),h}();ot._=Me,(Xi=function(){return Me}.call(lt,nt,lt,bt))!==l&&(bt.exports=Xi)}.call(this)},5030:(bt,lt,nt)=>{"use strict";nt.r(lt),nt.d(lt,{DemoModule:()=>ii});var Xi=nt(8692);class T{constructor(r,u){W(this,"X",0),W(this,"Y",0),this.X=r,this.Y=u}}class A{}W(A,"right",0),W(A,"bottom",1),W(A,"left",2),W(A,"top",3);class pn{constructor(r,u,f){W(this,"road",0),W(this,"wall",1),W(this,"closeRoad",2),W(this,"redBase",3),W(this,"blueBase",4),W(this,"bullet",5),W(this,"water",6),W(this,"sand",7),W(this,"hpRegenRed",8),W(this,"hpRegenBlue",9),W(this,"cpRegen",10),W(this,"next",11),W(this,"units",[]),W(this,"towers",[]),W(this,"mobs",[]),W(this,"homes",[]);for(let g=0;g<r;++g)this.units.push(this.next+g);for(let g=0;g<r;++g)this.homes.push(this.next+r+g);for(let g=0;g<u;++g)this.towers.push(this.next+2*r+g);for(let g=0;g<f;++g)this.mobs.push(this.next+2*r+u+g)}}class gt{constructor(){W(this,"coords",new T(0,0)),W(this,"pastCoords",new T(0,0)),W(this,"renderCoords",new T(0,0)),W(this,"crashCoords",new T(0,0)),W(this,"renderCrashCoords",new T(0,0)),W(this,"deltaCoords",new T(0,0)),W(this,"perimCoords",[])}}class y{constructor(r=0,u=0,f=0,g=0,k=0){this.id=k,this.width=f,this.height=g,this.TLX=r,this.TLY=u,this.BRX=this.TLX+this.width,this.BRY=this.TLY+this.height}update(r){this.TLX=r.X,this.TLY=r.Y,this.BRX=this.TLX+this.width,this.BRY=this.TLY+this.height}}class Ei{constructor(r="T_2",u=20,f=20,g=6,k=2,L=200,N=600,ut=1,mt=0,S=0){this.model=r,this.health=u,this.armor=f,this.speed=g,this.shotPower=k,this.shotDistance=L,this.respawnTime=N,this.level=ut,this.experience=mt,this.commandPoints=S}}function Ji(Y,r){return Math.floor(Math.random()*(r-Y)+Y)}class Ui extends y{constructor(u){super(),W(this,"map",null),W(this,"pos",null),W(this,"owner",null),W(this,"target",null),W(this,"turn",0),W(this,"speed",0),W(this,"bulletType",{model:"bullet_1",damage:1,quantity:1e4,shot_model:"bullet_1_shot",boom_model:"bullet_1_boom",shot_coords:new T(0,0),boom_coords:new T(0,0)}),W(this,"hit",!1),W(this,"hitMiss",!1),W(this,"degree",0),this.map=u.map,this.pos=new gt,this.owner=u,this.id=u.id,this.bulletType=u.ammunition[u.bulletType]}look(){let u=this.pos.coords.X+Math.round(this.map.unitWidth/3),f=this.pos.coords.Y+Math.round(this.map.unitWidth/3),g=[];this.update(new T(u,f));for(let k=0;k<this.map.backArray.length;++k)this.BRX<this.map.backArray[k].TLX||this.TLX>this.map.backArray[k].BRX||this.BRY<this.map.backArray[k].TLY||this.TLY>this.map.backArray[k].BRY||g.push(this.map.backArray[k].id);return 0===g.length&&g.push(this.map.backId.road),g}fatalHit(){return null!==this.target&&this.target.uc.health<=0?(this.target.uc.health=0,this.target):(this.target=null,null)}hitResult(){return Ji(this.bulletType.damage,this.owner.uc.shotPower+this.bulletType.damage)}checkHitMiss(u){return u.forEach(f=>{this.hitMiss=f===this.map.backId.wall}),this.hitMiss}checkHit(u){this.hit=!1;for(let f of this.owner.targets)u.forEach(g=>{if(g===f.id&&f.uc.health>0){this.target=f;let k=this.hitResult();f.uc.armor=f.uc.armor-2*k/3,f.uc.armor<=0?(f.uc.armor=0,f.uc.health=f.uc.health-k):f.uc.health=f.uc.health-k/3,this.hit=!0}});return this.hit}moveHelper(u,f){let g=Math.cos(this.degree*Math.PI/180)*f,k=Math.sin(this.degree*Math.PI/180)*f;u.X+=Math.round(g),u.Y+=Math.round(k)}move(){0===this.speed&&(this.pos.coords=Object.assign({},this.owner.pos.coords),this.pos.renderCoords=Object.assign({},this.owner.pos.renderCoords),this.degree=this.owner.gun.degree,this.turn=this.owner.turn,this.bulletType=this.owner.ammunition[this.owner.bulletType],--this.owner.ammunition[this.owner.bulletType].quantity);let u=Math.floor(this.owner.uc.shotDistance/10);this.moveHelper(this.pos.coords,u),this.moveHelper(this.pos.renderCoords,u);let f=this.look();++this.speed,(this.checkHitMiss(f)||this.checkHit(f))&&(this.speed=0),this.speed>10&&(this.speed=0)}}class Ft extends y{constructor(u=new Ei,f={model:"gun_2",degree:0},g=[{model:"bullet_1",damage:1,quantity:1e4,shot_model:"bullet_1_shot",boom_model:"bullet_1_boom",shot_coords:new T(0,0),boom_coords:new T(0,0)}],k=0){super(),W(this,"userId","None"),W(this,"name","NoName"),W(this,"side","red"),W(this,"homeId",1111),W(this,"ability",0),W(this,"turn",0),W(this,"bulletType",0),W(this,"reload",0),W(this,"speedController",1),W(this,"trigger",!1),W(this,"uc",null),W(this,"etalonUc",null),W(this,"kill",null),W(this,"map",null),W(this,"bullet",null),W(this,"pos",null),W(this,"targets",null),W(this,"allies",null),W(this,"ammunition",null),W(this,"gun",null),this.uc=u,this.etalonUc=Object.assign({},this.uc),this.ammunition=g,this.bullet=new Ui(this),this.pos=new gt,this.gun=f,this.ability=k}levelUp(){null!==this.kill&&(this.uc.experience+=this.kill.etalonUc.health,this.uc.experience>20*this.uc.level&&(this.uc.experience-=20*this.uc.level,++this.uc.level,++this.etalonUc.level,++this.uc.commandPoints,++this.etalonUc.commandPoints,this.uc.level%2==0&&(this.etalonUc.health+=5),this.uc.level%2!=0&&(this.etalonUc.armor+=5),this.etalonUc.speed<12&&this.uc.level%3==0&&(this.uc.speed+=1,this.etalonUc.speed+=1),this.etalonUc.shotPower<=10&&this.uc.level%2!=0&&(this.uc.shotPower+=1,this.etalonUc.shotPower+=1))),this.experienceToLevel=20*this.uc.level}roadEffect(u){"red"===this.side?(u===this.map.backId.hpRegenRed&&this.uc.health<this.etalonUc.health&&(this.uc.health+=.1),u===this.map.backId.hpRegenBlue&&this.uc.health>=0&&(this.uc.health-=.1)):(u===this.map.backId.hpRegenBlue&&this.uc.health<this.etalonUc.health&&(this.uc.health+=.1),u===this.map.backId.hpRegenRed&&this.uc.health>=0&&(this.uc.health-=.1)),u===this.map.backId.cpRegen&&this.uc.armor<this.etalonUc.armor&&(this.uc.armor+=.1),u===this.map.backId.sand&&(this.uc.speed=2,this.speedController=2)}checkFrontWay(u){let f=!1,g=this.look(u),k=!0;return g.forEach(L=>{L===this.map.backId.hpRegenRed||L===this.map.backId.cpRegen||L===this.map.backId.hpRegenBlue||L===this.map.backId.sand?f=!0:k=L===this.map.backId.road,f?this.roadEffect(L):this.uc.speed=this.etalonUc.speed}),k}look(u){this.update(this.pos.coords);let f=[];switch(this.turn){case A.right:for(let g=0;g<this.map.backArray.length;++g)this.BRX+u+1<this.map.backArray[g].TLX||this.TLX+u+1>this.map.backArray[g].BRX||this.BRY<this.map.backArray[g].TLY||this.TLY>this.map.backArray[g].BRY||this.id===this.map.backArray[g].id||this.homeId===this.map.backArray[g].id||f.push(this.map.backArray[g].id);break;case A.bottom:for(let g=0;g<this.map.backArray.length;++g)this.BRX<this.map.backArray[g].TLX||this.TLX>this.map.backArray[g].BRX||this.BRY+u+1<this.map.backArray[g].TLY||this.TLY+u+1>this.map.backArray[g].BRY||this.id===this.map.backArray[g].id||this.homeId===this.map.backArray[g].id||f.push(this.map.backArray[g].id);break;case A.left:for(let g=0;g<this.map.backArray.length;++g)this.BRX-u-1<this.map.backArray[g].TLX||this.TLX-u-1>this.map.backArray[g].BRX||this.BRY<this.map.backArray[g].TLY||this.TLY>this.map.backArray[g].BRY||this.id===this.map.backArray[g].id||this.homeId===this.map.backArray[g].id||f.push(this.map.backArray[g].id);break;case A.top:for(let g=0;g<this.map.backArray.length;++g)this.BRX<this.map.backArray[g].TLX||this.TLX>this.map.backArray[g].BRX||this.BRY-u-1<this.map.backArray[g].TLY||this.TLY-u-1>this.map.backArray[g].BRY||this.id===this.map.backArray[g].id||this.homeId===this.map.backArray[g].id||f.push(this.map.backArray[g].id)}return 0===f.length&&f.push(this.map.backId.road),f}setPosition(u,f){switch(this.turn){case A.right:this.pos.coords.X=f?this.pos.coords.X+u:this.pos.coords.X-u;break;case A.bottom:this.pos.coords.Y=f?this.pos.coords.Y+u:this.pos.coords.Y-u;break;case A.left:this.pos.coords.X=f?this.pos.coords.X-u:this.pos.coords.X+u;break;case A.top:this.pos.coords.Y=f?this.pos.coords.Y-u:this.pos.coords.Y+u}this.update(this.pos.coords)}searchTarget(u){return u.pos.coords.X<this.pos.coords.X+this.uc.shotDistance&&u.pos.coords.X>this.pos.coords.X-this.uc.shotDistance&&u.pos.coords.Y<this.pos.coords.Y+this.uc.shotDistance&&u.pos.coords.Y>this.pos.coords.Y-this.uc.shotDistance&&u.uc.health>0}}class ft extends Ft{constructor(u="Blue",f="T_2",g=100,k=20,L=5,N=1,ut=200,mt=100,S={model:"gun_2",degree:0,coords:new T(0,0)},dt=[{model:"bullet_1",damage:1,quantity:1e4,shot_model:"bullet_1_shot",boom_model:"bullet_1_boom",shot_coords:new T(0,0),boom_coords:new T(0,0)}],vn=0){super(new Ei(f,g,k,L,N,ut,mt),S,dt,vn),W(this,"directionPriority",!0),W(this,"turnFlag",!0),W(this,"counter",0),W(this,"target",null),this.side=u.toLowerCase()}checkTarget1(u){switch(this.turn){case A.right:{this.turn=this.directionPriority?A.top:A.bottom;let f=this.checkCollision(!1);return this.turn=A.right,this.pos.coords.X<u.pos.coords.X||f}case A.bottom:{this.turn=this.directionPriority?A.right:A.left;let f=this.checkCollision(!1);return this.turn=A.bottom,this.pos.coords.Y<u.pos.coords.Y||f}case A.left:{this.turn=this.directionPriority?A.bottom:A.top;let f=this.checkCollision(!1);return this.turn=A.left,this.pos.coords.X>u.pos.coords.X||f}case A.top:{this.turn=this.directionPriority?A.left:A.right;let f=this.checkCollision(!1);return this.turn=A.top,this.pos.coords.Y>u.pos.coords.Y||f}}return!0}checkTarget2(u){let f=this.uc.shotDistance-Math.round(this.uc.shotDistance/4),g=u.id!==this.map.backId.redBase&&u.id!==this.map.backId.blueBase?this.map.unitWidth+2:Math.round(this.map.unitWidth/2);switch(this.turn){case A.right:return this.pos.coords.X<u.pos.coords.X-f||this.pos.coords.Y>u.pos.coords.Y+g||this.pos.coords.Y<u.pos.coords.Y-g;case A.bottom:return this.pos.coords.Y<u.pos.coords.Y-f||this.pos.coords.X>u.pos.coords.X+g||this.pos.coords.X<u.pos.coords.X-g;case A.left:return this.pos.coords.X>u.pos.coords.X+f||this.pos.coords.Y>u.pos.coords.Y+g||this.pos.coords.Y<u.pos.coords.Y-g;case A.top:return this.pos.coords.Y>u.pos.coords.Y+f||this.pos.coords.X>u.pos.coords.X+g||this.pos.coords.X<u.pos.coords.X-g}return!0}checkCollision(u){let f=!1;if(u)for(let g=this.uc.speed;g>0&&(f=!1,this.setPosition(g,!0),this.checkFrontWay(g)||(this.setPosition(g,!1),f=!0),!1!==f);--g);else this.checkFrontWay(this.uc.speed)||(f=!0);return f}hunt(u){this.turnGun(u),null!==u&&this.uc.health>0&&(this.directionPriority?!1===this.turnFlag&&this.turn===A.top?this.turn=A.right:!1===this.turnFlag&&(this.turn+=1):!1===this.turnFlag&&this.turn===A.right?this.turn=A.top:!1===this.turnFlag&&(this.turn-=1),"red"===this.side&&this.turnFlag?this.directionPriority=this.pos.coords.Y<Math.round(this.map.frontHeight/2):this.turnFlag&&(this.directionPriority=this.pos.coords.Y>Math.round(this.map.frontHeight/2)),this.turnFlag=!0,this.checkTarget1(u)?this.checkTarget2(u)&&this.checkCollision(!0)&&this.checkCollision(!1)&&(this.turn=this.directionPriority?this.turn-1:this.turn+1,this.turnClosure(),this.turnFlag=this.checkCollision(!0)):this.turn=this.directionPriority?this.turn-1:this.turn+1,this.turnClosure())}turnClosure(){this.turn<A.right&&(this.turn=A.top),this.turn>A.top&&(this.turn=A.right)}turnGun(u){let f=Math.round(this.map.unitWidth/2),g=Math.round(this.map.unitWidth/2),k=u.pos.coords.X+Math.round(this.map.unitWidth/2),L=u.pos.coords.Y+Math.round(this.map.unitWidth/2),N=this.pos.coords.X+f,mt=(L-(this.pos.coords.Y+g))/(k-N);this.gun.degree=N<=k?180*Math.atan(mt)/Math.PI:180*Math.atan(mt)/Math.PI+180}shot(){this.counter++;let u=null;for(let f of this.targets)if(this.uc.health>0&&f.uc.health>0&&this.searchTarget(f)){u=f;break}null!==u&&(this.turnGun(u),this.trigger=!0),this.trigger&&(this.counter%2==0&&this.reload===this.bullet.speed&&this.bullet.move(),this.counter%2==0&&this.reload++,this.kill=this.bullet.fatalHit(),this.reload>10&&(this.trigger=!1,this.bullet.hit=!1,this.bullet.hitMiss=!1,this.reload=0))}}class di extends class l{constructor(r,u,f){W(this,"renderX",0),W(this,"renderY",0),W(this,"deltaWidth",0),W(this,"deltaHeight",0),W(this,"unitWidth",0),W(this,"unitPerim",0),W(this,"baseWidth",280),W(this,"frontWidth",0),W(this,"frontHeight",0),W(this,"backWidth",0),W(this,"backHeight",0),W(this,"barrier",1e3),this.canvas=r,this.mapImg=u,this.unitWidth=f.width,this.unitPerim=4*f.width,this.frontWidth=u.width,this.frontHeight=u.height,this.backWidth=this.frontWidth+2*this.barrier,this.backHeight=this.frontHeight+2*this.barrier}calculateDelta(){this.deltaWidth=this.frontWidth-this.canvas.width,this.deltaHeight=this.frontHeight-this.canvas.height}moveMap(r,u){this.calculateDelta(),r<=10&&this.renderX>0?this.renderX-=10:this.renderX<0&&(this.renderX=0),u<=10&&this.renderY>0?this.renderY-=10:this.renderY<0&&(this.renderY=0),r>=this.canvas.width-10&&this.renderX<this.deltaWidth?this.renderX+=10:this.renderX>this.deltaWidth&&(this.renderX=this.deltaWidth),u>=this.canvas.height-10&&this.renderY<this.deltaHeight?this.renderY+=10:this.renderY>this.deltaHeight&&(this.renderY=this.deltaHeight)}}{constructor(u,f,g){super(u,f,g),W(this,"unitsCount",8),W(this,"towersCount",18),W(this,"mobsCount",6),W(this,"backArray",[]),W(this,"unitsCoords",[]),W(this,"startUnitsTurn",[]),W(this,"baseTowers",[]),W(this,"towers",[]),W(this,"mobs",[]),W(this,"etalonMobs",[]),W(this,"redBase",null),W(this,"blueBase",null),W(this,"etalonTower",null),W(this,"backId",null),this.backId=new pn(this.unitsCount,this.towersCount,this.mobsCount);const k={model:"gun_1",degree:0},L={model:"gun_3",degree:0},N={model:"gun_5",degree:0};this.redBase=new ft("Red","",200,0),this.redBase.tower1=new ft("Red","tower_1",100,0,0,3,350,0,_.cloneDeep(k)),this.redBase.tower2=new ft("Red","tower_1",100,0,0,3,350,0,_.cloneDeep(k)),this.blueBase=new ft("Blue","",200,0),this.blueBase.tower1=new ft("Blue","tower_2",100,0,0,3,350,0,_.cloneDeep(L)),this.blueBase.tower2=new ft("Blue","tower_2",100,0,0,3,350,0,_.cloneDeep(L)),this.etalonTower=new ft("","",100,0,0,3,350),Math.round(2*this.unitWidth/3);const mt=Math.round(this.unitWidth/3),S=Math.round(this.unitWidth/2);this.unitsCoords=[new T(3*this.unitWidth-S,this.frontHeight-12*this.unitWidth-S),new T(3*this.unitWidth-S,this.frontHeight-9*this.unitWidth-S),new T(9*this.unitWidth-S,this.frontHeight-3*this.unitWidth-S),new T(12*this.unitWidth-S,this.frontHeight-3*this.unitWidth-S),new T(this.frontWidth-3*this.unitWidth-S,this.frontHeight-13*this.unitWidth+S),new T(this.frontWidth-3*this.unitWidth-S,this.frontHeight-10*this.unitWidth+S),new T(this.frontWidth-9*this.unitWidth-S,this.frontHeight-3*this.unitWidth-S),new T(this.frontWidth-12*this.unitWidth-S,this.frontHeight-3*this.unitWidth-S)],this.startUnitsTurn=[A.right,A.right,A.top,A.top,A.left,A.left,A.top,A.top],this.baseTowers=[this.redBase.tower1,this.redBase.tower2,this.blueBase.tower1,this.blueBase.tower2],this.redBase.tower1.pos.coords=new T(9*this.unitWidth+S,10*this.unitWidth+S),this.redBase.tower2.pos.coords=new T(9*this.unitWidth+S,15*this.unitWidth+S),this.blueBase.tower1.pos.coords=new T(this.frontWidth-11*this.unitWidth+S,9*this.unitWidth+S),this.blueBase.tower2.pos.coords=new T(this.frontWidth-11*this.unitWidth+S,14*this.unitWidth+S);for(let dt=0;dt<9;++dt)this.towers.push(new ft("Red","tower_1",100,0,0,3,350,0,_.cloneDeep(k)));for(let dt=0;dt<9;++dt)this.towers.push(new ft("Blue","tower_2",100,0,0,3,350,0,_.cloneDeep(L)));this.towersCoords=[new T(16*this.unitWidth,8*this.unitWidth),new T(15*this.unitWidth,4*this.unitWidth),new T(17*this.unitWidth,14*this.unitWidth),new T(17*this.unitWidth,18*this.unitWidth),new T(16*this.unitWidth,24*this.unitWidth+mt),new T(15*this.unitWidth,28*this.unitWidth+mt),new T(27*this.unitWidth,2*this.unitWidth),new T(28*this.unitWidth,15*this.unitWidth),new T(27*this.unitWidth,this.frontHeight-3*this.unitWidth),new T(this.frontWidth-16*this.unitWidth,4*this.unitWidth),new T(this.frontWidth-17*this.unitWidth,8*this.unitWidth),new T(this.frontWidth-18*this.unitWidth,14*this.unitWidth),new T(this.frontWidth-18*this.unitWidth,18*this.unitWidth),new T(this.frontWidth-17*this.unitWidth,24*this.unitWidth+mt),new T(this.frontWidth-16*this.unitWidth,28*this.unitWidth+mt),new T(this.frontWidth-28*this.unitWidth,2*this.unitWidth),new T(this.frontWidth-29*this.unitWidth,17*this.unitWidth),new T(this.frontWidth-28*this.unitWidth,this.frontHeight-3*this.unitWidth)];for(let dt=0;dt<6;++dt)this.mobs.push(new ft("Green","tower_3",15,0,0,3,250,1e3,_.cloneDeep(N))),this.etalonMobs.push(new ft("Green","tower_3",15,0,0,3,250,1e3,_.cloneDeep(N)));this.mobsCoords=[new T(24*this.unitWidth+S,10*this.unitWidth+S),new T(24*this.unitWidth+S,21*this.unitWidth),new T(23*this.unitWidth+S,24*this.unitWidth+S),new T(this.frontWidth-25*this.unitWidth-S,9*this.unitWidth+S),new T(this.frontWidth-25*this.unitWidth-S,20*this.unitWidth),new T(this.frontWidth-24*this.unitWidth-S,24*this.unitWidth)],this.mapInit()}mapInit(){const u=Math.round(2*this.unitWidth/3),f=Math.round(this.unitWidth/3);this.backArray.push(new y(0,0,7*this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new y(0,this.frontHeight-8*this.unitWidth,4*this.unitWidth,8*this.unitWidth,this.backId.wall)),this.backArray.push(new y(4*this.unitWidth,this.frontHeight-6*this.unitWidth,this.unitWidth,6*this.unitWidth,this.backId.wall)),this.backArray.push(new y(5*this.unitWidth,this.frontHeight-5*this.unitWidth,this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new y(6*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new y(0,5*this.unitWidth,2*this.unitWidth,this.frontHeight-8*this.unitWidth,this.backId.wall)),this.backArray.push(new y(2*this.unitWidth,this.frontHeight-11*this.unitWidth,2*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(2*this.unitWidth,5*this.unitWidth,2*this.unitWidth,15*this.unitWidth+f,this.backId.wall)),this.backArray.push(new y(7*this.unitWidth,0,22*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new y(10*this.unitWidth,2*this.unitWidth,10*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(10*this.unitWidth,3*this.unitWidth,8*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(8*this.unitWidth,this.frontHeight-2*this.unitWidth,21*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new y(10*this.unitWidth,this.frontHeight-4*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new y(13*this.unitWidth,this.frontHeight-3*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(13*this.unitWidth,this.frontHeight-4*this.unitWidth,5*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(17*this.unitWidth,9*this.unitWidth,4*this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new y(20*this.unitWidth,6*this.unitWidth,6*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(23*this.unitWidth,7*this.unitWidth,this.unitWidth,8*this.unitWidth,this.backId.wall)),this.backArray.push(new y(24*this.unitWidth,7*this.unitWidth,2*this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new y(24*this.unitWidth,12*this.unitWidth,2*this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new y(25*this.unitWidth,10*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new y(28*this.unitWidth,6*this.unitWidth,this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new y(28*this.unitWidth,11*this.unitWidth,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new y(17*this.unitWidth,this.frontHeight-14*this.unitWidth-f,4*this.unitWidth,5*this.unitWidth+f,this.backId.wall)),this.backArray.push(new y(23*this.unitWidth,this.frontHeight-14*this.unitWidth-f,3*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(23*this.unitWidth,this.frontHeight-13*this.unitWidth-f,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new y(24*this.unitWidth,this.frontHeight-10*this.unitWidth-f,2*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(25*this.unitWidth,this.frontHeight-13*this.unitWidth-f,this.unitWidth,3*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new y(25*this.unitWidth,this.frontHeight-9*this.unitWidth-f,this.unitWidth,3*this.unitWidth+f,this.backId.wall)),this.backArray.push(new y(20*this.unitWidth,this.frontHeight-7*this.unitWidth,5*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(23*this.unitWidth,this.frontHeight-9*this.unitWidth-f,this.unitWidth,2*this.unitWidth+f,this.backId.closeRoad)),this.backArray.push(new y(28*this.unitWidth,this.frontHeight-15*this.unitWidth-f,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new y(28*this.unitWidth,this.frontHeight-9*this.unitWidth-f,this.unitWidth,3*this.unitWidth+f,this.backId.wall)),this.backArray.push(new y(this.frontWidth-7*this.unitWidth,0,7*this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-4*this.unitWidth,this.frontHeight-8*this.unitWidth,4*this.unitWidth,8*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-5*this.unitWidth,this.frontHeight-6*this.unitWidth,this.unitWidth,6*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-6*this.unitWidth,this.frontHeight-5*this.unitWidth,this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-8*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-2*this.unitWidth,5*this.unitWidth,2*this.unitWidth,20*this.unitWidth+f,this.backId.wall)),this.backArray.push(new y(this.frontWidth-4*this.unitWidth,this.frontHeight-11*this.unitWidth,2*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-4*this.unitWidth,5*this.unitWidth,2*this.unitWidth,15*this.unitWidth+f,this.backId.wall)),this.backArray.push(new y(this.frontWidth-29*this.unitWidth,0,22*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-20*this.unitWidth,2*this.unitWidth,10*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-18*this.unitWidth,3*this.unitWidth,8*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-29*this.unitWidth,this.frontHeight-2*this.unitWidth,21*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-21*this.unitWidth,this.frontHeight-3*this.unitWidth,8*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-18*this.unitWidth,this.frontHeight-4*this.unitWidth,5*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-11*this.unitWidth,this.frontHeight-4*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-21*this.unitWidth,9*this.unitWidth,4*this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-26*this.unitWidth,6*this.unitWidth,6*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-26*this.unitWidth,7*this.unitWidth,3*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-24*this.unitWidth,9*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-26*this.unitWidth,11*this.unitWidth,3*this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-26*this.unitWidth,9*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new y(this.frontWidth-29*this.unitWidth,6*this.unitWidth,this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-29*this.unitWidth,11*this.unitWidth,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-21*this.unitWidth,this.frontHeight-14*this.unitWidth-f,4*this.unitWidth,5*this.unitWidth+f,this.backId.wall)),this.backArray.push(new y(this.frontWidth-26*this.unitWidth,this.frontHeight-15*this.unitWidth-f,3*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-24*this.unitWidth,this.frontHeight-14*this.unitWidth-f,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-26*this.unitWidth,this.frontHeight-11*this.unitWidth-f,2*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-26*this.unitWidth,this.frontHeight-10*this.unitWidth-f,this.unitWidth,4*this.unitWidth+f,this.backId.wall)),this.backArray.push(new y(this.frontWidth-25*this.unitWidth,this.frontHeight-7*this.unitWidth,5*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-26*this.unitWidth,this.frontHeight-14*this.unitWidth-f,this.unitWidth,2*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new y(this.frontWidth-24*this.unitWidth,this.frontHeight-10*this.unitWidth-f,this.unitWidth,3*this.unitWidth+f,this.backId.closeRoad)),this.backArray.push(new y(this.frontWidth-29*this.unitWidth,this.frontHeight-15*this.unitWidth-f,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new y(this.frontWidth-29*this.unitWidth,this.frontHeight-9*this.unitWidth-f,this.unitWidth,3*this.unitWidth+f,this.backId.wall)),this.backArray.push(new y(29*this.unitWidth,0,8*this.unitWidth+u,3*this.unitWidth,this.backId.water)),this.backArray.push(new y(29*this.unitWidth,6*this.unitWidth,8*this.unitWidth+u,3*this.unitWidth,this.backId.water)),this.backArray.push(new y(29*this.unitWidth,11*this.unitWidth,8*this.unitWidth+u,4*this.unitWidth,this.backId.water)),this.backArray.push(new y(29*this.unitWidth,18*this.unitWidth,8*this.unitWidth+u,4*this.unitWidth,this.backId.water)),this.backArray.push(new y(29*this.unitWidth,24*this.unitWidth,8*this.unitWidth+u,3*this.unitWidth+f,this.backId.water)),this.backArray.push(new y(29*this.unitWidth,30*this.unitWidth+f,8*this.unitWidth+u,3*this.unitWidth,this.backId.water)),this.backArray.push(new y(29*this.unitWidth,9*this.unitWidth,9*this.unitWidth+u,2*this.unitWidth,this.backId.sand)),this.backArray.push(new y(29*this.unitWidth,22*this.unitWidth,9*this.unitWidth+u,2*this.unitWidth,this.backId.sand)),this.backArray.push(new y(2*this.unitWidth,this.frontHeight-13*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[0])),this.backArray.push(new y(2*this.unitWidth,this.frontHeight-10*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[1])),this.backArray.push(new y(8*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[2])),this.backArray.push(new y(11*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[3])),this.backArray.push(new y(this.frontWidth-4*this.unitWidth,this.frontHeight-13*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[4])),this.backArray.push(new y(this.frontWidth-4*this.unitWidth,this.frontHeight-10*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[5])),this.backArray.push(new y(this.frontWidth-10*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[6])),this.backArray.push(new y(this.frontWidth-13*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[7])),this.backArray.push(new y(7*this.unitWidth,2*this.unitWidth,3*this.unitWidth,3*this.unitWidth,this.backId.hpRegenRed)),this.backArray.push(new y(4*this.unitWidth,5*this.unitWidth,3*this.unitWidth,3*this.unitWidth,this.backId.cpRegen)),this.backArray.push(new y(this.frontWidth-7*this.unitWidth,5*this.unitWidth,3*this.unitWidth,3*this.unitWidth,this.backId.cpRegen)),this.backArray.push(new y(this.frontWidth-10*this.unitWidth,2*this.unitWidth,3*this.unitWidth,3*this.unitWidth,this.backId.hpRegenBlue)),this.backArray.push(new y(4*this.unitWidth,11*this.unitWidth,6*this.unitWidth,5*this.unitWidth,this.backId.redBase)),this.backArray.push(new y(4*this.unitWidth,10*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.closeRoad)),this.backArray.push(new y(10*this.unitWidth,11*this.unitWidth,this.unitWidth,5*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new y(4*this.unitWidth,16*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.closeRoad)),this.backArray.push(new y(this.frontWidth-10*this.unitWidth,10*this.unitWidth,6*this.unitWidth,5*this.unitWidth,this.backId.blueBase)),this.backArray.push(new y(this.frontWidth-11*this.unitWidth,9*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.closeRoad)),this.backArray.push(new y(this.frontWidth-11*this.unitWidth,10*this.unitWidth,this.unitWidth,5*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new y(this.frontWidth-11*this.unitWidth,15*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.closeRoad))}}class ci{constructor(){W(this,"images",new Map([["testGameMap",new Image(4e3,2e3)],["bullet_1",new Image(60,60)],["bullet_1_shot",new Image(60,60)],["bullet_1_boom",new Image(60,60)],["T_1",new Image(60,60)],["T_2",new Image(60,60)],["T_3",new Image(60,60)],["T_4",new Image(60,60)],["tower_1",new Image(60,60)],["tower_2",new Image(60,60)],["tower_3",new Image(60,60)],["gun_1",new Image(60,60)],["gun_2",new Image(60,60)],["gun_3",new Image(60,60)],["gun_4",new Image(60,60)],["gun_5",new Image(60,60)],["redCrash",new Image(60,60)],["blueCrash",new Image(60,60)],["smoke_1",new Image(60,60)]])),W(this,"counter",0),this.images.get("testGameMap").src="../../images/testGame/map_1.png",this.images.get("bullet_1").src="../../images/testGame/bullet_1.png",this.images.get("bullet_1_shot").src="../../images/testGame/bullet_1_shot.png",this.images.get("bullet_1_boom").src="../../images/testGame/bullet_1_boom.png",this.images.get("T_1").src="../../images/testGame/T_1.png",this.images.get("T_2").src="../../images/testGame/T_2.png",this.images.get("T_3").src="../../images/testGame/T_3.png",this.images.get("T_4").src="../../images/testGame/T_4.png",this.images.get("tower_1").src="../../images/testGame/tower_1.png",this.images.get("tower_2").src="../../images/testGame/tower_2.png",this.images.get("tower_3").src="../../images/testGame/tower_3.png",this.images.get("gun_1").src="../../images/testGame/gun_1.png",this.images.get("gun_2").src="../../images/testGame/gun_2.png",this.images.get("gun_3").src="../../images/testGame/gun_3.png",this.images.get("gun_4").src="../../images/testGame/gun_4.png",this.images.get("gun_5").src="../../images/testGame/gun_5.png",this.images.get("redCrash").src="../../images/testGame/redCrash.png",this.images.get("blueCrash").src="../../images/testGame/blueCrash.png",this.images.get("smoke_1").src="../../images/testGame/smoke_1.png"}allUploaded(r){let u=()=>{++this.counter===this.images.size&&r()};this.images.forEach(f=>{f.onload=u})}}class Si{constructor(r,u,f,g,k,L){W(this,"sounds",new Map),W(this,"counter",0),g.forEach(N=>{this.sounds.set(N.id,N.id===f.id?new Audio("../../sounds/ShotLoud.mp3"):new Audio("../../sounds/ShotQuit.mp3"))}),k.forEach(N=>{this.sounds.set(N.id,new Audio("../../sounds/ShotQuit.mp3"))}),L.forEach(N=>{this.sounds.set(N.id,new Audio("../../sounds/ShotQuit.mp3"))}),this.sounds.set(r.tower1.id,new Audio("../../sounds/ShotQuit.mp3")),this.sounds.set(r.tower2.id,new Audio("../../sounds/ShotQuit.mp3")),this.sounds.set(u.tower1.id,new Audio("../../sounds/ShotQuit.mp3")),this.sounds.set(u.tower2.id,new Audio("../../sounds/ShotQuit.mp3")),this.sounds.set("Wind",new Audio("../../sounds/Wind.mp3"))}}class vt{constructor(r,u,f){W(this,"map",null),W(this,"uI",0),W(this,"etalonUnits",[]),W(this,"cloneUnits",[]),this.map=r,this.etalonUnits=u,this.userId=f,this.uI=this.findUser(),this.preparation(),this.counter=0,this.pause=!1,this.defeat=!1,this.win=!1,this.bonus=0}findUser(){for(let r=0;r<this.etalonUnits.length;++r)if(this.userId===this.etalonUnits[r].userId)return r}preparation(){this.etalonUnits.forEach((r,u)=>{r.pos.coords.X=this.map.unitsCoords[u].X,r.pos.coords.Y=this.map.unitsCoords[u].Y,r.turn=this.map.startUnitsTurn[u],r.id=this.map.backId.units[u],r.homeId=this.map.backId.homes[u],r.gun.degree=90*r.turn,this.cloneUnits[u]=_.cloneDeep(r),this.cloneUnits[u].map=r.map=this.map,this.cloneUnits[u].width=this.cloneUnits[u].height=this.map.unitWidth,this.cloneUnits[u].bullet.map=r.bullet.map=this.map,this.cloneUnits[u].bullet.width=this.cloneUnits[u].bullet.height=Math.round(this.map.unitWidth/5),this.map.backArray.push(this.cloneUnits[u]),this.userId===r.userId&&(this.cloneUnits[u].control=r.control,this.cloneUnits[u].control.mouseMove(),this.cloneUnits[u].control.mouseDown(),this.cloneUnits[u].control.mouseUp(),this.cloneUnits[u].control.keyDown(),this.cloneUnits[u].control.keyUp())}),this.map.towers.forEach((r,u)=>{r.map=this.map,r.bullet.map=this.map,r.id=this.map.backId.towers[u],r.pos.coords=this.map.towersCoords[u],r.turn="blue"===r.side?A.left:A.right,r.gun.degree="blue"===r.side?180:0,r.targets=this.cloneUnits.filter(f=>r.side!==f.side),r.allies=this.cloneUnits.filter(f=>r.side===f.side),r.width=r.height=this.map.unitWidth,this.map.backArray.push(r),r.update(r.pos.coords)}),this.map.mobs.forEach((r,u)=>{r.map=this.map,r.bullet.map=this.map,r.id=this.map.backId.mobs[u],r.pos.coords=this.map.mobsCoords[u],r.targets=this.cloneUnits.filter(f=>r.side!==f.side),r.allies=this.cloneUnits.filter(f=>r.side===f.side),r.width=r.height=this.map.unitWidth,this.map.backArray.push(r),r.update(r.pos.coords)}),this.map.etalonMobs.forEach((r,u)=>{r.map=this.map,r.bullet.map=this.map,r.id=this.map.backId.mobs[u],r.pos.coords=this.map.mobsCoords[u],r.targets=this.cloneUnits.filter(f=>r.side!==f.side),r.allies=this.cloneUnits.filter(f=>r.side===f.side)}),this.cloneUnits.forEach(r=>{r.targets=this.cloneUnits.filter(u=>r.side!==u.side),this.map.towers.filter(u=>r.side!==u.side).forEach(u=>{r.targets.push(u)}),this.map.mobs.filter(u=>r.side!==u.side).forEach(u=>{r.targets.push(u)}),r.targets.push("red"===r.side?this.map.blueBase:this.map.redBase),r.allies=this.cloneUnits.filter(u=>r.side===u.side)}),this.map.baseTowers.forEach(r=>{r.map=this.map,r.bullet.map=this.map,r.targets=this.cloneUnits.filter(u=>r.side!==u.side),r.allies=this.cloneUnits.filter(u=>r.side===u.side)}),this.map.redBase.id=this.map.backId.redBase,this.map.blueBase.id=this.map.backId.blueBase,this.map.redBase.tower1.id=1e3,this.map.blueBase.tower2.id=1001,this.map.blueBase.tower1.id=1002,this.map.blueBase.tower2.id=1003,this.sound=new Si(this.map.redBase,this.map.blueBase,this.cloneUnits[this.uI],this.cloneUnits,this.map.towers,this.map.mobs)}unitsBackFill(){this.cloneUnits.forEach(r=>{r.pos.pastCoords.X=r.pos.coords.X,r.pos.pastCoords.Y=r.pos.coords.Y,r.update(r.pos.coords),r.checkFrontWay(1)})}run(){"Space"===this.cloneUnits[this.uI].control.buttonUp&&(this.pause=!1===this.pause,this.cloneUnits[this.uI].control.buttonUp=""),!this.pause&&!this.win&&!this.defeat&&(this.counter++,this.counter>5400&&(this.counter=0),this.unitsBackFill(),this.cloneUnits.forEach((r,u)=>{this.uI!==u&&(this.botLogic(r),null!==r.target&&r.hunt(r.target),r.shot(),this.crash(r,this.etalonUnits[u]),this.rebirth(r,this.etalonUnits[u]))}),this.map.baseTowers.forEach(r=>{r.shot()}),this.map.towers.forEach(r=>{r.shot()}),this.map.mobs.forEach((r,u)=>{r.uc.health<r.etalonUc.health&&r.shot(),this.crash(r,this.map.etalonMobs[u]),this.rebirth(r,this.map.etalonMobs[u])}),this.cloneUnits[this.uI].controlHandling(),this.cloneUnits[this.uI].shot(),this.cloneUnits[this.uI].levelUp(),this.crash(this.cloneUnits[this.uI],this.etalonUnits[this.uI]),this.rebirth(this.cloneUnits[this.uI],this.etalonUnits[this.uI]),this.gameOver())}gameOver(){"red"===this.cloneUnits[this.uI].side&&this.map.blueBase.uc.health<=0||"blue"===this.cloneUnits[this.uI].side&&this.map.redBase.uc.health<=0?(++this.etalonUnits[this.uI].wins,++this.etalonUnits[this.uI].battles,this.etalonUnits[this.uI].kills=this.cloneUnits[this.uI].kills,this.bonus=Ji(500,1e3),this.etalonUnits[this.uI].money+=this.bonus,this.win=!0):("red"===this.cloneUnits[this.uI].side&&this.map.redBase.uc.health<=0||"blue"===this.cloneUnits[this.uI].side&&this.map.blueBase.uc.health<=0)&&(++this.etalonUnits[this.uI].defeats,++this.etalonUnits[this.uI].battles,this.etalonUnits[this.uI].kills=this.cloneUnits[this.uI].kills,this.bonus=Ji(200,300),this.etalonUnits[this.uI].money+=this.bonus,this.defeat=!0)}botLogic(r){if(this.counter%1200==0||1===this.counter||null===r.target||r.target.uc.health<=0){let u=new Map;r.targets.forEach((k,L)=>{let N=Math.abs(k.pos.coords.X-r.pos.coords.X),ut=Math.abs(k.pos.coords.Y-r.pos.coords.Y);u.set(L,Math.round(Math.sqrt(Math.pow(N,2)+Math.pow(ut,2))))});const f=new Map([...u.entries()].sort((k,L)=>k[1]-L[1]));let g=!1;for(let k of f.keys()){for(let L of this.cloneUnits){if(L.target===L.targets[k])break;if(r.targets[k].uc.health>0){r.target=r.targets[k],g=!0;break}}if(g)break}}}crash(r,u){r.uc.health<=0&&r.uc.respawnTime===r.etalonUc.respawnTime&&(r.pos.crashCoords.X=r.pos.coords.X,r.pos.crashCoords.Y=r.pos.coords.Y,r.turn=u.turn,r.gun.degree=u.gun.degree,r.pos.coords.X=u.pos.coords.X,r.pos.coords.Y=u.pos.coords.Y),r.uc.health<=0&&--r.uc.respawnTime}rebirth(r){r.uc.respawnTime<=0&&(r.uc.respawnTime=r.etalonUc.respawnTime,r.uc.armor=r.etalonUc.armor,r.uc.health=r.etalonUc.health)}}class ti extends Ft{constructor(u,f,g){super(),W(this,"experienceToLevel",0),W(this,"money",0),W(this,"battles",0),W(this,"wins",0),W(this,"kills",0),W(this,"killsInGame",0),W(this,"defeats",0),W(this,"counter",0),W(this,"control",null),super.userId=f,super.side=g.team.toLowerCase(),this.control=u,this.uc.model=g.tankBody,this.etalonUc.model=g.tankBody,this.gun.model=g.tankHead}checkCollision(u){let f=!1;for(let L=this.speedController;L>0&&(f=!1,this.setPosition(L,!0),this.checkFrontWay(L)||(this.setPosition(L,!1),f=!0),!1!==f);L--);let k=this.pos.coords.Y-this.pos.pastCoords.Y;if(this.pos.deltaCoords.X=this.pos.coords.X-this.pos.pastCoords.X,this.pos.deltaCoords.Y=k,u&&!f){let N=this.pos.renderCoords.Y+this.pos.deltaCoords.Y;this.pos.renderCoords.X=this.pos.renderCoords.X+this.pos.deltaCoords.X,this.pos.renderCoords.Y=N}}shot(){!0===this.trigger&&(this.counter%2==0&&this.reload===this.bullet.speed&&this.bullet.move(),this.counter%2==0&&this.reload++,this.kill=this.bullet.fatalHit(),null!==this.kill&&(++this.kills,++this.killsInGame,this.bullet.target=null),this.reload>10&&(this.trigger=!1,this.bullet.hit=!1,this.bullet.hitMiss=!1,this.reload=0))}extraMove(u){this.uc.health>0&&(this.speedController<this.uc.speed&&this.counter%2==0&&++this.speedController,this.checkCollision(u))}checkMapSides(){let u=this.map.renderY>=this.uc.speed,f=this.pos.coords.Y<=this.map.frontHeight-Math.floor(this.control.canvas.height/2),g=this.map.renderY<=this.map.frontHeight-this.control.canvas.height-this.uc.speed,k=this.pos.coords.Y>=Math.floor(this.control.canvas.height/2),L=this.map.renderX>=this.uc.speed,N=this.pos.coords.X<=this.map.frontWidth-Math.floor(this.control.canvas.width/2),ut=this.map.renderX<=this.map.frontWidth-this.control.canvas.width-this.uc.speed,mt=this.pos.coords.X>=Math.floor(this.control.canvas.width/2);return this.turn===A.top?u&&f:this.turn===A.bottom?g&&k:this.turn===A.left?L&&N:this.turn===A.right?ut&&mt:void 0}correctRenderCoords1(){this.map.renderX-=this.pos.deltaCoords.X,this.map.renderY-=this.pos.deltaCoords.Y,this.targets.forEach(u=>{u.bullet.pos.renderCoords.X+=this.pos.deltaCoords.X,u.bullet.pos.renderCoords.Y+=this.pos.deltaCoords.Y}),this.allies.forEach(u=>{u.bullet.pos.renderCoords.X+=this.pos.deltaCoords.X,u.bullet.pos.renderCoords.Y+=this.pos.deltaCoords.Y})}correctRenderCoords2(){this.map.renderX+=this.pos.deltaCoords.X,this.map.renderY+=this.pos.deltaCoords.Y,this.targets.forEach(u=>{u.bullet.pos.renderCoords.X-=this.pos.deltaCoords.X,u.bullet.pos.renderCoords.Y-=this.pos.deltaCoords.Y}),this.allies.forEach(u=>{u.bullet.pos.renderCoords.X-=this.pos.deltaCoords.X,u.bullet.pos.renderCoords.Y-=this.pos.deltaCoords.Y})}move(u){this.checkMapSides()?(u(!1),this.pos.deltaCoords.X<0||this.pos.deltaCoords.Y<0?this.turn===A.right||this.turn===A.bottom?this.correctRenderCoords1():this.correctRenderCoords2():this.turn===A.right||this.turn===A.bottom?this.correctRenderCoords2():this.correctRenderCoords1()):u(!0)}turnGun(){let u=Math.round(this.map.unitWidth/2),f=Math.round(this.map.unitWidth/2),g=this.pos.renderCoords.X+u,L=(this.control.mouseY-(this.pos.renderCoords.Y+f))/(this.control.mouseX-g);this.gun.degree=g<this.control.mouseX?180*Math.atan(L)/Math.PI:180*Math.atan(L)/Math.PI+180}controlHandling(){if(this.uc.health>0)switch(this.turnGun(),this.counter++,this.counter>1e3&&(this.counter=0),this.control.buttonDown){case"ArrowUp":case"KeyW":this.turn=A.top,this.move(u=>this.extraMove(u));break;case"ArrowDown":case"KeyS":this.turn=A.bottom,this.move(u=>this.extraMove(u));break;case"ArrowLeft":case"KeyA":this.turn=A.left,this.move(u=>this.extraMove(u));break;case"ArrowRight":case"KeyD":this.turn=A.right,this.move(u=>this.extraMove(u));break;default:this.speedController>0&&this.counter%4==0&&""!==this.control.buttonUp&&(--this.speedController,this.move(u=>this.checkCollision(u)))}""!==this.control.buttonUp&&(this.control.buttonDown=""),this.control.checkMouseDown&&this.uc.health>0&&(this.trigger=!0),this.control.checkMouseUp&&(this.control.checkMouseDown=!1,this.control.checkMouseUp=!1)}}class be{constructor(r,u,f,g){W(this,"pic",null),W(this,"canvas",null),W(this,"context",null),W(this,"map",null),W(this,"etalonUnits",[]),W(this,"cloneUnits",[]),W(this,"uI",0),W(this,"game",null),this.game=g,this.map=g.map,this.pic=r,this.canvas=u,this.context=f,this.etalonUnits=g.etalonUnits,this.cloneUnits=g.cloneUnits,this.userId=g.userId,this.uI=g.uI,this.crashDegrees=0,this.userPreparation(),this.othersPreparation()}userPreparation(){let r=Math.round(this.canvas.width/2),u=Math.round(this.canvas.height/2),ut=this.cloneUnits[this.uI].pos.coords.Y+u>=this.map.frontHeight?this.map.frontHeight-this.cloneUnits[this.uI].pos.coords.Y:u;this.cloneUnits[this.uI].pos.coords.X>=this.canvas.width?(this.map.renderX=this.cloneUnits[this.uI].pos.coords.X+(this.cloneUnits[this.uI].pos.coords.X+r>=this.map.frontWidth?this.map.frontWidth-this.cloneUnits[this.uI].pos.coords.X:r)-this.canvas.width,this.cloneUnits[this.uI].pos.renderCoords.X=this.cloneUnits[this.uI].pos.coords.X-this.map.renderX,this.etalonUnits[this.uI].pos.renderCoords.X=this.cloneUnits[this.uI].pos.coords.X-this.map.renderX):(this.cloneUnits[this.uI].pos.renderCoords.X=this.cloneUnits[this.uI].pos.coords.X,this.etalonUnits[this.uI].pos.renderCoords.X=this.etalonUnits[this.uI].pos.coords.X),this.cloneUnits[this.uI].pos.coords.Y>this.canvas.height?(this.map.renderY=this.cloneUnits[this.uI].pos.coords.Y+ut-this.canvas.height,this.cloneUnits[this.uI].pos.renderCoords.Y=this.cloneUnits[this.uI].pos.coords.Y-this.map.renderY,this.etalonUnits[this.uI].pos.renderCoords.Y=this.cloneUnits[this.uI].pos.coords.Y-this.map.renderY):(this.cloneUnits[this.uI].pos.renderCoords.Y=this.cloneUnits[this.uI].pos.coords.Y,this.etalonUnits[this.uI].pos.renderCoords.Y=this.etalonUnits[this.uI].pos.coords.Y)}othersPreparation(){for(let r=0;r<this.cloneUnits.length;++r)r!==this.uI&&(this.cloneUnits[r].pos.renderCoords.X=this.cloneUnits[r].pos.coords.X-this.cloneUnits[this.uI].map.renderX,this.cloneUnits[r].pos.renderCoords.Y=this.cloneUnits[r].pos.coords.Y-this.map.renderY,this.cloneUnits[r].bullet.pos.renderCoords.X=this.cloneUnits[r].bullet.pos.coords.X-this.map.renderX,this.cloneUnits[r].bullet.pos.renderCoords.Y=this.cloneUnits[r].bullet.pos.coords.Y-this.map.renderY);this.map.baseTowers.forEach(r=>{r.pos.renderCoords.X=r.pos.coords.X-this.cloneUnits[this.uI].map.renderX,r.pos.renderCoords.Y=r.pos.coords.Y-this.cloneUnits[this.uI].map.renderY,r.bullet.pos.renderCoords.X=r.bullet.pos.coords.X-this.map.renderX,r.bullet.pos.renderCoords.Y=r.bullet.pos.coords.Y-this.map.renderY}),this.map.towers.forEach(r=>{r.pos.renderCoords.X=r.pos.coords.X-this.cloneUnits[this.uI].map.renderX,r.pos.renderCoords.Y=r.pos.coords.Y-this.cloneUnits[this.uI].map.renderY,r.bullet.pos.renderCoords.X=r.bullet.pos.coords.X-this.map.renderX,r.bullet.pos.renderCoords.Y=r.bullet.pos.coords.Y-this.map.renderY}),this.map.mobs.forEach(r=>{r.pos.renderCoords.X=r.pos.coords.X-this.cloneUnits[this.uI].map.renderX,r.pos.renderCoords.Y=r.pos.coords.Y-this.cloneUnits[this.uI].map.renderY,r.bullet.pos.renderCoords.X=r.bullet.pos.coords.X-this.map.renderX,r.bullet.pos.renderCoords.Y=r.bullet.pos.coords.Y-this.map.renderY}),this.map.redBase.pos.renderCoords.X=4*this.map.unitWidth-this.map.renderX,this.map.redBase.pos.renderCoords.Y=11*this.map.unitWidth-this.map.renderY,this.map.blueBase.pos.renderCoords.X=this.map.frontWidth-4*this.map.unitWidth-this.map.renderX,this.map.blueBase.pos.renderCoords.Y=10*this.map.unitWidth-this.map.renderY}showUnitModel(r){let u=0;r.turn===A.right&&(u=0),r.turn===A.bottom&&(u=90),r.turn===A.left&&(u=180),r.turn===A.top&&(u=270),this.rotateImage(u,this.map.unitWidth,this.map.unitWidth,r.pos.renderCoords,()=>{this.context.drawImage(this.pic.images.get(r.uc.model),-Math.floor(this.map.unitWidth/2),-Math.floor(this.map.unitWidth/2))}),this.showGunModel(r)}showGunModel(r){r.uc.health>0&&this.rotateImage(r.gun.degree,this.map.unitWidth,this.map.unitWidth,r.pos.renderCoords,()=>{this.context.drawImage(this.pic.images.get(r.gun.model),-Math.floor(this.map.unitWidth/2),-Math.floor(this.map.unitWidth/2))})}rotateImage(r,u,f,g,k){this.context.save(),this.context.translate(g.X+Math.floor(u/2),g.Y+Math.floor(f/2)),this.context.rotate(r*(Math.PI/180)),k(),this.context.restore()}showShot(r){this.showBullet(r.bullet.degree,r),this.showShotMoment(r.bullet.degree,r),this.showBoomMoment(r.bullet.degree,r)}showBullet(r,u){if(1===u.bullet.speed&&(this.game.sound.sounds.get(u.id).currentTime=0,this.game.sound.sounds.get(u.id).play()),0!==u.bullet.speed){let f=this.pic.images.get(u.ammunition[u.bulletType].model);this.rotateImage(r,f.width,f.height,u.bullet.pos.renderCoords,()=>{this.context.drawImage(f,-Math.floor(f.width/2),-Math.floor(f.height/2))})}}showShotMoment(r,u){if(2===u.bullet.speed||3===u.bullet.speed){let f=this.pic.images.get(u.ammunition[u.bulletType].shot_model);2===u.bullet.speed&&(u.bullet.bulletType.shot_coords.X=u.bullet.pos.renderCoords.X,u.bullet.bulletType.shot_coords.Y=u.bullet.pos.renderCoords.Y),this.rotateImage(r,f.width,f.height,u.bullet.bulletType.shot_coords,()=>{this.context.drawImage(f,-Math.floor(f.width/2),-Math.floor(f.height/2))})}}showBoomMoment(r,u){if(u.bullet.hit||u.bullet.hitMiss){let f=this.pic.images.get(u.ammunition[u.bulletType].boom_model);u.bullet.bulletType.boom_coords.X=u.bullet.pos.renderCoords.X,u.bullet.bulletType.boom_coords.Y=u.bullet.pos.renderCoords.Y,this.rotateImage(r,f.width,f.height,u.bullet.bulletType.boom_coords,()=>{this.context.drawImage(f,-Math.floor(f.width/2),-Math.floor(f.height/2))})}}healthArmorBalancer(r,u,f){return r*f/u}showArmor(r){if(r.uc.health>0){this.context.fillStyle="darkOrange";let g=this.healthArmorBalancer(r.uc.armor,r.etalonUc.armor,this.map.unitWidth);switch(r.turn){case A.right:this.context.fillRect(r.pos.renderCoords.X-26,r.pos.renderCoords.Y+this.map.unitWidth-g,6,g),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(r.pos.renderCoords.X-26,r.pos.renderCoords.Y,6,this.map.unitWidth-g);break;case A.bottom:this.context.fillRect(r.pos.renderCoords.X+this.map.unitWidth-g,r.pos.renderCoords.Y-26,g,6),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(r.pos.renderCoords.X,r.pos.renderCoords.Y-26,this.map.unitWidth-g,6);break;case A.left:this.context.fillRect(r.pos.renderCoords.X+this.map.unitWidth+26,r.pos.renderCoords.Y+this.map.unitWidth-g,6,g),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(r.pos.renderCoords.X+this.map.unitWidth+26,r.pos.renderCoords.Y,6,this.map.unitWidth-g);break;case A.top:this.context.fillRect(r.pos.renderCoords.X+this.map.unitWidth-g,r.pos.renderCoords.Y+this.map.unitWidth+26,g,6),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(r.pos.renderCoords.X,r.pos.renderCoords.Y+this.map.unitWidth+26,this.map.unitWidth-g,6)}}}showHealth(r){if(r.uc.health>0){this.context.fillStyle="red"===r.side?"darkRed":"green"===r.side?"darkGreen":"blue";let g=this.healthArmorBalancer(r.uc.health,r.etalonUc.health,this.map.unitWidth);switch(r.turn){case A.right:this.context.fillRect(r.pos.renderCoords.X-20,r.pos.renderCoords.Y+this.map.unitWidth-g,6,g),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(r.pos.renderCoords.X-20,r.pos.renderCoords.Y,6,this.map.unitWidth-g);break;case A.bottom:this.context.fillRect(r.pos.renderCoords.X+this.map.unitWidth-g,r.pos.renderCoords.Y-20,g,6),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(r.pos.renderCoords.X,r.pos.renderCoords.Y-20,this.map.unitWidth-g,6);break;case A.left:this.context.fillRect(r.pos.renderCoords.X+this.map.unitWidth+20,r.pos.renderCoords.Y+this.map.unitWidth-g,6,g),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(r.pos.renderCoords.X+this.map.unitWidth+20,r.pos.renderCoords.Y,6,this.map.unitWidth-g);break;case A.top:this.context.fillRect(r.pos.renderCoords.X+this.map.unitWidth-g,r.pos.renderCoords.Y+this.map.unitWidth+20,g,6),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(r.pos.renderCoords.X,r.pos.renderCoords.Y+this.map.unitWidth+20,this.map.unitWidth-g,6)}}}showBaseHealth(r){if(r.uc.health>0){let g=this.healthArmorBalancer(r.uc.health,r.etalonUc.health,this.map.baseWidth);this.context.fillStyle="red"===r.side?"darkRed":"blue","red"===r.side?(this.context.fillRect(r.pos.renderCoords.X-20,r.pos.renderCoords.Y+this.map.baseWidth-g,12,g),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(r.pos.renderCoords.X-20,r.pos.renderCoords.Y,12,this.map.baseWidth-g)):(this.context.fillRect(r.pos.renderCoords.X+20,r.pos.renderCoords.Y+this.map.baseWidth-g,12,g),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(r.pos.renderCoords.X+20,r.pos.renderCoords.Y,12,this.map.baseWidth-g))}}showCrash(r){r.uc.health<=0&&(r.pos.renderCrashCoords.X=r.pos.crashCoords.X-this.map.renderX,r.pos.renderCrashCoords.Y=r.pos.crashCoords.Y-this.map.renderY,this.rotateImage(0,this.map.unitWidth,this.map.unitWidth,r.pos.renderCrashCoords,()=>{this.context.drawImage(this.pic.images.get(r.uc.model),-Math.floor(this.map.unitWidth/2),-Math.floor(this.map.unitWidth/2))}),++this.crashDegrees,this.rotateImage(this.crashDegrees,this.map.unitWidth,this.map.unitWidth,r.pos.renderCrashCoords,()=>{this.context.drawImage(this.pic.images.get("smoke_1"),-Math.floor(this.map.unitWidth/2),-Math.floor(this.map.unitWidth/2))}))}isVisible(r){return!(r.pos.renderCoords.X>this.canvas.width+this.map.unitWidth||r.pos.renderCoords.X<-this.map.unitWidth||r.pos.renderCoords.Y>this.canvas.height+this.map.unitWidth||r.pos.renderCoords.X<-this.map.unitWidth)}render(){if(5===this.game.counter&&(this.game.sound.sounds.get("Wind").currentTime=0,this.game.sound.sounds.get("Wind").play()),this.othersPreparation(),1===this.cloneUnits[this.uI].uc.respawnTime?(this.map.renderX=0,this.map.renderY=0,this.userPreparation()):this.cloneUnits[this.uI].uc.health<=0&&this.map.moveMap(this.cloneUnits[this.uI].control.mouseX,this.cloneUnits[this.uI].control.mouseY),this.context.drawImage(this.map.mapImg,this.map.renderX,this.map.renderY,this.canvas.width,this.canvas.height,0,0,this.canvas.width,this.canvas.height),this.cloneUnits.forEach(r=>{this.showCrash(r)}),this.cloneUnits.forEach(r=>{r.uc.health>0&&this.isVisible(r)&&this.showUnitModel(r)}),this.map.towers.forEach(r=>{this.isVisible(r)&&this.showUnitModel(r)}),this.map.baseTowers.forEach(r=>{this.isVisible(r)&&this.showUnitModel(r)}),this.map.mobs.forEach(r=>{this.isVisible(r)&&this.showUnitModel(r)}),this.cloneUnits.forEach(r=>{r.uc.health>0&&this.isVisible(r)&&this.showShot(r)}),this.map.towers.forEach(r=>{r.uc.health>0&&this.isVisible(r)&&this.showShot(r)}),this.map.baseTowers.forEach(r=>{r.uc.health>0&&this.isVisible(r)&&this.showShot(r)}),this.map.mobs.forEach(r=>{r.uc.health>0&&this.isVisible(r)&&this.showShot(r)}),this.cloneUnits.forEach(r=>{r.uc.health>0&&this.isVisible(r)&&(this.showHealth(r),this.showArmor(r))}),this.map.towers.forEach(r=>{this.isVisible(r)&&this.showHealth(r)}),this.map.mobs.forEach(r=>{this.isVisible(r)&&this.showHealth(r)}),this.isVisible(this.map.redBase)&&this.showBaseHealth(this.map.redBase),this.isVisible(this.map.blueBase)&&this.showBaseHealth(this.map.blueBase),this.showUC(),this.game.win||this.game.defeat){this.cloneUnits[this.uI].pos.renderCoords.X=this.cloneUnits[this.uI].pos.coords.X-this.map.renderX,this.cloneUnits[this.uI].pos.renderCoords.Y=this.cloneUnits[this.uI].pos.coords.Y-this.map.renderY,this.cloneUnits[this.uI].bullet.pos.renderCoords.X=this.cloneUnits[this.uI].bullet.pos.coords.X-this.map.renderX,this.cloneUnits[this.uI].bullet.pos.renderCoords.Y=this.cloneUnits[this.uI].bullet.pos.coords.Y-this.map.renderY,this.map.moveMap(this.cloneUnits[this.uI].control.mouseX,this.cloneUnits[this.uI].control.mouseY),this.context.fillStyle="rgba(60, 50, 50, 0.8)",this.context.strokeStyle="rgb(20, 20, 20)";let r=Math.round(this.canvas.width/10),u=Math.round(this.canvas.height/10),f=8*r,g=8*u,k=20;this.context.lineJoin="round",this.context.lineWidth=k,this.context.strokeRect(r+k/2,u+k/2,f-k,g-k),this.context.fillRect(r+k/2,u+k/2,f-k,g-k),this.game.win&&this.winMessage(u),this.game.defeat&&this.defeatMessage(u)}}showUC(){this.context.fillStyle="rgb(0, 0, 0)",this.context.font="20px Palatino Linotype",this.context.lineWidth=2;let r=20;this.text(`Level: ${this.cloneUnits[this.uI].uc.level}`,r,20),this.text(`Exp: ${Math.floor(this.cloneUnits[this.uI].uc.experience)} / ${Math.floor(this.cloneUnits[this.uI].experienceToLevel)}`,r,40),this.text(`Health: ${Math.floor(this.cloneUnits[this.uI].uc.health)} / ${Math.floor(this.cloneUnits[this.uI].etalonUc.health)}`,r,60),this.text(`Armor: ${Math.floor(this.cloneUnits[this.uI].uc.armor)} / ${Math.floor(this.cloneUnits[this.uI].etalonUc.armor)}`,r,80),this.text(`Speed: ${Math.floor(this.cloneUnits[this.uI].uc.speed)} / ${Math.floor(this.cloneUnits[this.uI].etalonUc.speed)}`,r,100),this.text(`Power: ${Math.floor(this.cloneUnits[this.uI].uc.shotPower)} / ${Math.floor(this.cloneUnits[this.uI].etalonUc.shotPower)}`,r,120)}winMessage(r){this.context.textAlign="center";let u=Math.round(this.canvas.width/2);this.context.fillStyle="rgb(255, 255, 255)",this.context.font="48px Palatino Linotype",this.context.lineWidth=5,this.text("PERFECT VICTORY",u,2*r),this.context.font="36px Palatino Linotype",this.context.lineWidth=3,this.text("Congratulations! Your awards / achievements:",u,3*r),this.message(r)}defeatMessage(r){this.context.textAlign="center";let u=Math.round(this.canvas.width/2);this.context.fillStyle="rgb(255, 255, 255)",this.context.font="48px Palatino Linotype",this.context.lineWidth=5,this.text("UNFORTUNATE DEFEAT",u,2*r),this.context.font="36px Palatino Linotype",this.context.lineWidth=3,this.text("Your awards / achievements:",u,3*r),this.message(r)}message(r){let u=Math.round(this.canvas.width/2),f=Math.round(r/2);this.context.lineWidth=3,this.context.font="28px Palatino Linotype",this.text(`Money: +${this.game.bonus}`,u,4*r+f),this.text(`Kills in game: ${this.cloneUnits[this.uI].killsInGame}`,u,4*r+2*f),this.text(`Level in game: ${this.cloneUnits[this.uI].uc.level}`,u,4*r+3*f),this.text(`Total kills: ${this.etalonUnits[this.uI].kills}`,u,4*r+4*f),this.text(`Wins: ${this.etalonUnits[this.uI].wins}`,u,4*r+5*f),this.text(`Defeats: ${this.etalonUnits[this.uI].defeats}`,u,4*r+6*f),this.text(`Battles: ${this.etalonUnits[this.uI].battles}`,u,4*r+7*f)}text(r,u,f){this.context.strokeText(r,u,f,this.canvas.width),this.context.fillText(r,u,f,this.canvas.width)}}class Xt{constructor(r){W(this,"mouseX",0),W(this,"mouseY",0),W(this,"buttonDown",""),W(this,"buttonUp",""),W(this,"checkMouseDown",!1),W(this,"checkMouseUp",!1),this.canvas=r}mouseMove(){this.canvas.addEventListener("mousemove",r=>{this.mouseX=r.offsetX,this.mouseY=r.offsetY})}mouseDown(){this.canvas.addEventListener("mousedown",()=>{this.checkMouseDown=!0})}mouseUp(){this.canvas.addEventListener("mouseup",()=>{this.checkMouseUp=!0})}keyDown(){document.addEventListener("keydown",r=>{this.buttonDown=r.code,this.buttonUp=""})}keyUp(){document.addEventListener("keyup",r=>{this.buttonUp=r.code})}}window._=nt(3815);class pi{constructor(){W(this,"position",0),W(this,"team","red"),W(this,"tankHead","gun_1"),W(this,"tankBody","T_1")}}class Et{constructor(r,u=new pi){W(this,"map"),W(this,"game"),W(this,"control"),W(this,"units"),W(this,"render"),this.canvas=r,this.context=this.canvas.getContext("2d"),this.control=new Xt(r),this.pictures=new ci,this.start=(new Date).getTime(),this.fps=0,this.settings=u}draw(){this.game.run(),setTimeout(()=>this.render.render(),0);let r=(new Date).getTime();this.fps++,r-this.start>=1e3&&(console.log(this.fps),this.start=r,this.fps=0),requestAnimationFrame(this.draw.bind(this))}run(){this.pictures.allUploaded(()=>{this.map=new di(this.canvas,this.pictures.images.get("testGameMap"),this.pictures.images.get("T_2")),this.canvas.style.cursor=this.pictures.images.get("cursor"),this.units=this.getUnits(),this.game=new vt(this.map,this.units,"user"),this.render=new be(this.pictures,this.canvas,this.context,this.game),this.draw()})}getUnits(){const u=()=>new ft("Red","T_1",30,30,5,1,200,600,{model:"gun_1",degree:0,coords:new T(0,0)}),f=()=>new ft("Blue","T_3",30,30,5,1,200,600,{model:"gun_3",degree:0,coords:new T(0,0)}),g="red"===this.settings.team?this.settings.position:this.settings.position+4,k=[u(),u(),u(),u(),f(),f(),f(),f()];return k.splice(g,1,(()=>new ti(this.control,"user",this.settings))()),k}}var Jt=nt(9865),Gt=nt(9670),V=nt(6796),Qi=nt(3941),gn=nt(1928),Vi=nt(1588);const mn=["demoPanel"],_n=["canvas"],wn=[{path:"",component:(()=>{class Y{constructor(u,f,g){this.demoService=u,this.lsService=f,this.router=g}ngOnInit(){localStorage.getItem(Jt.$.inDemo)&&this.router.navigate([Gt.RK.HOME]).then()}ngAfterViewInit(){this.lsService.setItem(Jt.$.inDemo,"inDemo");const u=this.demoPanelRef.nativeElement,f=this.canvasRef.nativeElement;u.clientHeight>u.clientWidth?(f.width=u.clientHeight-160,f.height=u.clientWidth-10,f.style.transform="rotate(90deg)"):(f.width=u.clientWidth-160,f.height=u.clientHeight-10),this.startGame(f)}ngOnDestroy(){localStorage.removeItem(Jt.$.inDemo)}startGame(u){new Et(u,this.demoService.demoSettings).run()}}return Y.\u0275fac=function(u){return new(u||Y)(V.Y36(Qi.e),V.Y36(gn.n),V.Y36(Vi.F0))},Y.\u0275cmp=V.Xpm({type:Y,selectors:[["app-demo"]],viewQuery:function(u,f){if(1&u&&(V.Gf(mn,5),V.Gf(_n,5)),2&u){let g;V.iGM(g=V.CRH())&&(f.demoPanelRef=g.first),V.iGM(g=V.CRH())&&(f.canvasRef=g.first)}},decls:5,vars:0,consts:[[1,"wrapper"],[1,"demo-panel"],["demoPanel",""],[1,"demo-canvas"],["canvas",""]],template:function(u,f){1&u&&(V.TgZ(0,"div",0)(1,"div",1,2),V._UZ(3,"canvas",3,4),V.qZA()())},styles:["@keyframes make_visible_move_right_on_start{0%{left:0;transform:translate(-100%,-50%)}to{left:0;transform:translateY(-50%)}}@keyframes make_hidden_move_left_from_start{0%{left:0;transform:translateY(-50%)}to{left:0;transform:translate(-100%,-50%)}}@keyframes make_visible_move_right_on_center{0%{left:0;transform:translate(-100%,-50%)}to{left:50%;transform:translate(-50%,-50%)}}@keyframes make_hidden_move_left_from_center{0%{left:50%;transform:translate(-50%,-50%)}to{left:0;transform:translate(-100%,-50%)}}@keyframes make_visible_move_right_on_end{0%{left:0;transform:translate(-100%,-50%)}to{left:100%;transform:translate(-100%,-50%)}}@keyframes make_hidden_move_left_from_end{0%{left:100%;transform:translate(-100%,-50%)}to{left:0;transform:translate(-100%,-50%)}}@keyframes make_visible_move_left_on_end{0%{left:100%;transform:translateY(-50%)}to{left:100%;transform:translate(-100%,-50%)}}@keyframes make_hidden_move_right_from_end{0%{left:100%;transform:translate(-100%,-50%)}to{left:100%;transform:translateY(-50%)}}@keyframes make_visible_move_left_on_center{0%{left:100%;transform:translateY(-50%)}to{left:50%;transform:translate(-50%,-50%)}}@keyframes make_hidden_move_right_from_center{0%{left:50%;transform:translate(-50%,-50%)}to{left:100%;transform:translateY(-50%)}}@keyframes make_visible_move_left_on_start{0%{left:100%;transform:translateY(-50%)}to{left:0;transform:translateY(-50%)}}@keyframes make_hidden_move_right_from_start{0%{left:0;transform:translateY(-50%)}to{left:100%;transform:translateY(-50%)}}@keyframes switch-blue{0%{left:0;right:50%}to{left:50%;right:0}}@keyframes switch-red{0%{left:50%;right:0}to{left:0;right:50%}}.wrapper[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden}.wrapper[_ngcontent-%COMP%]   .demo-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;margin:0;width:100%;height:100%}.wrapper[_ngcontent-%COMP%]   .demo-panel[_ngcontent-%COMP%]   .demo-canvas[_ngcontent-%COMP%]{border:2px solid #EB3636;cursor:url(cursor.8e939e809d527865.png) 20 20,auto}"]}),Y})()}];let bn=(()=>{class Y{}return Y.\u0275fac=function(u){return new(u||Y)},Y.\u0275mod=V.oAB({type:Y}),Y.\u0275inj=V.cJS({imports:[Xi.ez,Vi.Bz.forChild(wn),Vi.Bz]}),Y})(),ii=(()=>{class Y{}return Y.\u0275fac=function(u){return new(u||Y)},Y.\u0275mod=V.oAB({type:Y}),Y.\u0275inj=V.cJS({imports:[Xi.ez,bn]}),Y})()}}]);