var rg=Object.defineProperty,hg=(bt,dt,ht)=>dt in bt?rg(bt,dt,{enumerable:!0,configurable:!0,writable:!0,value:ht}):bt[dt]=ht,W=(bt,dt,ht)=>(hg(bt,"symbol"!=typeof dt?dt+"":dt,ht),ht);(self.webpackChunktanks=self.webpackChunktanks||[]).push([[30],{3815:function(bt,dt,ht){var Ei;bt=ht.nmd(bt),function(){var l,mt="Expected a function",Si="__lodash_hash_undefined__",Ui="__lodash_placeholder__",ii=1/0,S=9007199254740991,o=NaN,f=4294967295,R=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],C="[object Arguments]",P="[object Array]",M="[object Boolean]",j="[object Date]",Ie="[object Error]",xe="[object Function]",Fs="[object GeneratorFunction]",$t="[object Map]",te="[object Number]",ei="[object Object]",Gs="[object Promise]",ie="[object RegExp]",Kt="[object Set]",ee="[object String]",ye="[object Symbol]",ne="[object WeakMap]",se="[object ArrayBuffer]",Li="[object DataView]",In="[object Float32Array]",xn="[object Float64Array]",yn="[object Int8Array]",An="[object Int16Array]",Cn="[object Int32Array]",kn="[object Uint8Array]",Rn="[object Uint8ClampedArray]",Tn="[object Uint16Array]",Mn="[object Uint32Array]",Ao=/\b__p \+= '';/g,Co=/\b(__p \+=) '' \+/g,ko=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ns=/&(?:amp|lt|gt|quot|#39);/g,$s=/[&<>"']/g,Ro=RegExp(Ns.source),To=RegExp($s.source),Mo=/<%-([\s\S]+?)%>/g,Yo=/<%([\s\S]+?)%>/g,Ks=/<%=([\s\S]+?)%>/g,Xo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Eo=/^\w*$/,So=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yn=/[\\^$.*+?()[\]{}|]/g,Uo=RegExp(Yn.source),Xn=/^\s+/,Bo=/\s/,Lo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Oo=/\{\n\/\* \[wrapped with (.+)\] \*/,Ho=/,? & /,Po=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Do=/[()=,{}\[\]\/\s]/,Fo=/\\(\\)?/g,Go=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zs=/\w*$/,No=/^[-+]0x[0-9a-f]+$/i,$o=/^0b[01]+$/i,Ko=/^\[object .+?Constructor\]$/,zo=/^0o[0-7]+$/i,qo=/^(?:0|[1-9]\d*)$/,Zo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ae=/($^)/,Jo=/['\n\r\u2028\u2029\\]/g,Ce="\\ud800-\\udfff",qs="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Zs="\\u2700-\\u27bf",Js="a-z\\xdf-\\xf6\\xf8-\\xff",Qs="A-Z\\xc0-\\xd6\\xd8-\\xde",Vs="\\ufe0e\\ufe0f",js="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",su="["+Ce+"]",tr="["+js+"]",ke="["+qs+"]",ir="\\d+",ru="["+Zs+"]",er="["+Js+"]",nr="[^"+Ce+js+ir+Zs+Js+Qs+"]",Sn="\\ud83c[\\udffb-\\udfff]",sr="[^"+Ce+"]",Un="(?:\\ud83c[\\udde6-\\uddff]){2}",Bn="[\\ud800-\\udbff][\\udc00-\\udfff]",Oi="["+Qs+"]",hr="(?:"+er+"|"+nr+")",ou="(?:"+Oi+"|"+nr+")",or="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ur="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ar="(?:"+ke+"|"+Sn+")?",lr="["+Vs+"]?",fr=lr+ar+"(?:\\u200d(?:"+[sr,Un,Bn].join("|")+")"+lr+ar+")*",fu="(?:"+[ru,Un,Bn].join("|")+")"+fr,du="(?:"+[sr+ke+"?",ke,Un,Bn,su].join("|")+")",cu=RegExp("['\u2019]","g"),pu=RegExp(ke,"g"),Ln=RegExp(Sn+"(?="+Sn+")|"+du+fr,"g"),gu=RegExp([Oi+"?"+er+"+"+or+"(?="+[tr,Oi,"$"].join("|")+")",ou+"+"+ur+"(?="+[tr,Oi+hr,"$"].join("|")+")",Oi+"?"+hr+"+"+or,Oi+"+"+ur,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ir,fu].join("|"),"g"),mu=RegExp("[\\u200d"+Ce+qs+Vs+"]"),_u=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wu=-1,tt={};tt[In]=tt[xn]=tt[yn]=tt[An]=tt[Cn]=tt[kn]=tt[Rn]=tt[Tn]=tt[Mn]=!0,tt[C]=tt[P]=tt[se]=tt[M]=tt[Li]=tt[j]=tt[Ie]=tt[xe]=tt[$t]=tt[te]=tt[ei]=tt[ie]=tt[Kt]=tt[ee]=tt[ne]=!1;var V={};V[C]=V[P]=V[se]=V[Li]=V[M]=V[j]=V[In]=V[xn]=V[yn]=V[An]=V[Cn]=V[$t]=V[te]=V[ei]=V[ie]=V[Kt]=V[ee]=V[ye]=V[kn]=V[Rn]=V[Tn]=V[Mn]=!0,V[Ie]=V[xe]=V[ne]=!1;var xu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yu=parseFloat,Au=parseInt,dr="object"==typeof global&&global&&global.Object===Object&&global,Cu="object"==typeof self&&self&&self.Object===Object&&self,lt=dr||Cu||Function("return this")(),cr=dt&&!dt.nodeType&&dt,re=cr&&bt&&!bt.nodeType&&bt,pr=re&&re.exports===cr,On=pr&&dr.process,Ut=function(){try{return re&&re.require&&re.require("util").types||On&&On.binding&&On.binding("util")}catch{}}(),gr=Ut&&Ut.isArrayBuffer,mr=Ut&&Ut.isDate,_r=Ut&&Ut.isMap,Wr=Ut&&Ut.isRegExp,wr=Ut&&Ut.isSet,br=Ut&&Ut.isTypedArray;function Ct(c,w,m){switch(m.length){case 0:return c.call(w);case 1:return c.call(w,m[0]);case 2:return c.call(w,m[0],m[1]);case 3:return c.call(w,m[0],m[1],m[2])}return c.apply(w,m)}function ku(c,w,m,T){for(var L=-1,z=null==c?0:c.length;++L<z;){var ot=c[L];w(T,ot,m(ot),c)}return T}function Bt(c,w){for(var m=-1,T=null==c?0:c.length;++m<T&&!1!==w(c[m],m,c););return c}function Ru(c,w){for(var m=null==c?0:c.length;m--&&!1!==w(c[m],m,c););return c}function vr(c,w){for(var m=-1,T=null==c?0:c.length;++m<T;)if(!w(c[m],m,c))return!1;return!0}function gi(c,w){for(var m=-1,T=null==c?0:c.length,L=0,z=[];++m<T;){var ot=c[m];w(ot,m,c)&&(z[L++]=ot)}return z}function Re(c,w){return!(null==c||!c.length)&&Hi(c,w,0)>-1}function Hn(c,w,m){for(var T=-1,L=null==c?0:c.length;++T<L;)if(m(w,c[T]))return!0;return!1}function it(c,w){for(var m=-1,T=null==c?0:c.length,L=Array(T);++m<T;)L[m]=w(c[m],m,c);return L}function mi(c,w){for(var m=-1,T=w.length,L=c.length;++m<T;)c[L+m]=w[m];return c}function Pn(c,w,m,T){var L=-1,z=null==c?0:c.length;for(T&&z&&(m=c[++L]);++L<z;)m=w(m,c[L],L,c);return m}function Tu(c,w,m,T){var L=null==c?0:c.length;for(T&&L&&(m=c[--L]);L--;)m=w(m,c[L],L,c);return m}function Dn(c,w){for(var m=-1,T=null==c?0:c.length;++m<T;)if(w(c[m],m,c))return!0;return!1}var Mu=Fn("length");function Ir(c,w,m){var T;return m(c,function(L,z,ot){if(w(L,z,ot))return T=z,!1}),T}function Te(c,w,m,T){for(var L=c.length,z=m+(T?1:-1);T?z--:++z<L;)if(w(c[z],z,c))return z;return-1}function Hi(c,w,m){return w==w?function Nu(c,w,m){for(var T=m-1,L=c.length;++T<L;)if(c[T]===w)return T;return-1}(c,w,m):Te(c,xr,m)}function Eu(c,w,m,T){for(var L=m-1,z=c.length;++L<z;)if(T(c[L],w))return L;return-1}function xr(c){return c!=c}function yr(c,w){var m=null==c?0:c.length;return m?Nn(c,w)/m:o}function Fn(c){return function(w){return null==w?l:w[c]}}function Gn(c){return function(w){return null==c?l:c[w]}}function Ar(c,w,m,T,L){return L(c,function(z,ot,Q){m=T?(T=!1,z):w(m,z,ot,Q)}),m}function Nn(c,w){for(var m,T=-1,L=c.length;++T<L;){var z=w(c[T]);z!==l&&(m=m===l?z:m+z)}return m}function $n(c,w){for(var m=-1,T=Array(c);++m<c;)T[m]=w(m);return T}function Cr(c){return c&&c.slice(0,Mr(c)+1).replace(Xn,"")}function kt(c){return function(w){return c(w)}}function Kn(c,w){return it(w,function(m){return c[m]})}function he(c,w){return c.has(w)}function kr(c,w){for(var m=-1,T=c.length;++m<T&&Hi(w,c[m],0)>-1;);return m}function Rr(c,w){for(var m=c.length;m--&&Hi(w,c[m],0)>-1;);return m}function Bu(c,w){for(var m=c.length,T=0;m--;)c[m]===w&&++T;return T}var Lu=Gn({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Ou=Gn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Hu(c){return"\\"+xu[c]}function Pi(c){return mu.test(c)}function zn(c){var w=-1,m=Array(c.size);return c.forEach(function(T,L){m[++w]=[L,T]}),m}function Tr(c,w){return function(m){return c(w(m))}}function _i(c,w){for(var m=-1,T=c.length,L=0,z=[];++m<T;){var ot=c[m];(ot===w||ot===Ui)&&(c[m]=Ui,z[L++]=m)}return z}function Me(c){var w=-1,m=Array(c.size);return c.forEach(function(T){m[++w]=T}),m}function Di(c){return Pi(c)?function zu(c){for(var w=Ln.lastIndex=0;Ln.test(c);)++w;return w}(c):Mu(c)}function zt(c){return Pi(c)?function qu(c){return c.match(Ln)||[]}(c):function Yu(c){return c.split("")}(c)}function Mr(c){for(var w=c.length;w--&&Bo.test(c.charAt(w)););return w}var Ku=Gn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ye=function c(w){var t,m=(w=null==w?lt:Ye.defaults(lt.Object(),w,Ye.pick(lt,Wu))).Array,T=w.Date,L=w.Error,z=w.Function,ot=w.Math,Q=w.Object,qn=w.RegExp,Qu=w.String,Lt=w.TypeError,Xe=m.prototype,Fi=Q.prototype,Ee=w["__core-js_shared__"],Se=z.prototype.toString,Z=Fi.hasOwnProperty,ju=0,Yr=(t=/[^.]+$/.exec(Ee&&Ee.keys&&Ee.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",Ue=Fi.toString,ta=Se.call(Q),ia=lt._,ea=qn("^"+Se.call(Z).replace(Yn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=pr?w.Buffer:l,Wi=w.Symbol,Le=w.Uint8Array,Xr=Be?Be.allocUnsafe:l,Oe=Tr(Q.getPrototypeOf,Q),Er=Q.create,Sr=Fi.propertyIsEnumerable,He=Xe.splice,Ur=Wi?Wi.isConcatSpreadable:l,oe=Wi?Wi.iterator:l,Ai=Wi?Wi.toStringTag:l,Pe=function(){try{var t=Mi(Q,"defineProperty");return t({},"",{}),t}catch{}}(),na=w.clearTimeout!==lt.clearTimeout&&w.clearTimeout,sa=T&&T.now!==lt.Date.now&&T.now,ra=w.setTimeout!==lt.setTimeout&&w.setTimeout,De=ot.ceil,Fe=ot.floor,Zn=Q.getOwnPropertySymbols,ha=Be?Be.isBuffer:l,Br=w.isFinite,oa=Xe.join,ua=Tr(Q.keys,Q),ut=ot.max,pt=ot.min,aa=T.now,la=w.parseInt,Lr=ot.random,fa=Xe.reverse,Jn=Mi(w,"DataView"),ue=Mi(w,"Map"),Qn=Mi(w,"Promise"),Gi=Mi(w,"Set"),ae=Mi(w,"WeakMap"),le=Mi(Q,"create"),Ge=ae&&new ae,Ni={},da=Yi(Jn),ca=Yi(ue),pa=Yi(Qn),ga=Yi(Gi),ma=Yi(ae),Ne=Wi?Wi.prototype:l,fe=Ne?Ne.valueOf:l,Or=Ne?Ne.toString:l;function h(t){if(nt(t)&&!O(t)&&!(t instanceof N)){if(t instanceof Ot)return t;if(Z.call(t,"__wrapped__"))return Hh(t)}return new Ot(t)}var $i=function(){function t(){}return function(i){if(!et(i))return{};if(Er)return Er(i);t.prototype=i;var e=new t;return t.prototype=l,e}}();function $e(){}function Ot(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=l}function N(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Ci(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}function ni(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}function si(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}function ki(t){var i=-1,e=null==t?0:t.length;for(this.__data__=new si;++i<e;)this.add(t[i])}function qt(t){var i=this.__data__=new ni(t);this.size=i.size}function Hr(t,i){var e=O(t),n=!e&&Xi(t),r=!e&&!n&&xi(t),u=!e&&!n&&!r&&Zi(t),a=e||n||r||u,d=a?$n(t.length,Qu):[],p=d.length;for(var b in t)(i||Z.call(t,b))&&(!a||!("length"==b||r&&("offset"==b||"parent"==b)||u&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||ui(b,p)))&&d.push(b);return d}function Pr(t){var i=t.length;return i?t[us(0,i-1)]:l}function Fa(t,i){return hn(It(t),Ri(i,0,t.length))}function Ga(t){return hn(It(t))}function Vn(t,i,e){(e!==l&&!Zt(t[i],e)||e===l&&!(i in t))&&ri(t,i,e)}function de(t,i,e){var n=t[i];(!Z.call(t,i)||!Zt(n,e)||e===l&&!(i in t))&&ri(t,i,e)}function Ke(t,i){for(var e=t.length;e--;)if(Zt(t[e][0],i))return e;return-1}function Na(t,i,e,n){return wi(t,function(r,u,a){i(n,r,e(r),a)}),n}function Dr(t,i){return t&&Vt(i,at(i),t)}function ri(t,i,e){"__proto__"==i&&Pe?Pe(t,i,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[i]=e}function jn(t,i){for(var e=-1,n=i.length,r=m(n),u=null==t;++e<n;)r[e]=u?l:Es(t,i[e]);return r}function Ri(t,i,e){return t==t&&(e!==l&&(t=t<=e?t:e),i!==l&&(t=t>=i?t:i)),t}function Ht(t,i,e,n,r,u){var a,d=1&i,p=2&i,b=4&i;if(e&&(a=r?e(t,n,r,u):e(t)),a!==l)return a;if(!et(t))return t;var v=O(t);if(v){if(a=function El(t){var i=t.length,e=new t.constructor(i);return i&&"string"==typeof t[0]&&Z.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!d)return It(t,a)}else{var I=gt(t),k=I==xe||I==Fs;if(xi(t))return fh(t,d);if(I==ei||I==C||k&&!r){if(a=p||k?{}:Mh(t),!d)return p?function Il(t,i){return Vt(t,Rh(t),i)}(t,function $a(t,i){return t&&Vt(i,yt(i),t)}(a,t)):function vl(t,i){return Vt(t,Is(t),i)}(t,Dr(a,t))}else{if(!V[I])return r?t:{};a=function Sl(t,i,e){var n=t.constructor;switch(i){case se:return gs(t);case M:case j:return new n(+t);case Li:return function _l(t,i){var e=i?gs(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case In:case xn:case yn:case An:case Cn:case kn:case Rn:case Tn:case Mn:return dh(t,e);case $t:return new n;case te:case ee:return new n(t);case ie:return function Wl(t){var i=new t.constructor(t.source,zs.exec(t));return i.lastIndex=t.lastIndex,i}(t);case Kt:return new n;case ye:return function wl(t){return fe?Q(fe.call(t)):{}}(t)}}(t,I,d)}}u||(u=new qt);var Y=u.get(t);if(Y)return Y;u.set(t,a),ro(t)?t.forEach(function(B){a.add(Ht(B,i,e,B,t,u))}):no(t)&&t.forEach(function(B,G){a.set(G,Ht(B,i,e,G,t,u))});var D=v?l:(b?p?ws:Ws:p?yt:at)(t);return Bt(D||t,function(B,G){D&&(B=t[G=B]),de(a,G,Ht(B,i,e,G,t,u))}),a}function Fr(t,i,e){var n=e.length;if(null==t)return!n;for(t=Q(t);n--;){var r=e[n],a=t[r];if(a===l&&!(r in t)||!(0,i[r])(a))return!1}return!0}function Gr(t,i,e){if("function"!=typeof t)throw new Lt(mt);return we(function(){t.apply(l,e)},i)}function ce(t,i,e,n){var r=-1,u=Re,a=!0,d=t.length,p=[],b=i.length;if(!d)return p;e&&(i=it(i,kt(e))),n?(u=Hn,a=!1):i.length>=200&&(u=he,a=!1,i=new ki(i));t:for(;++r<d;){var v=t[r],I=null==e?v:e(v);if(v=n||0!==v?v:0,a&&I==I){for(var k=b;k--;)if(i[k]===I)continue t;p.push(v)}else u(i,I,n)||p.push(v)}return p}h.templateSettings={escape:Mo,evaluate:Yo,interpolate:Ks,variable:"",imports:{_:h}},(h.prototype=$e.prototype).constructor=h,(Ot.prototype=$i($e.prototype)).constructor=Ot,(N.prototype=$i($e.prototype)).constructor=N,Ci.prototype.clear=function ba(){this.__data__=le?le(null):{},this.size=0},Ci.prototype.delete=function va(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},Ci.prototype.get=function Ia(t){var i=this.__data__;if(le){var e=i[t];return e===Si?l:e}return Z.call(i,t)?i[t]:l},Ci.prototype.has=function xa(t){var i=this.__data__;return le?i[t]!==l:Z.call(i,t)},Ci.prototype.set=function ya(t,i){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=le&&i===l?Si:i,this},ni.prototype.clear=function Aa(){this.__data__=[],this.size=0},ni.prototype.delete=function Ca(t){var i=this.__data__,e=Ke(i,t);return!(e<0||(e==i.length-1?i.pop():He.call(i,e,1),--this.size,0))},ni.prototype.get=function ka(t){var i=this.__data__,e=Ke(i,t);return e<0?l:i[e][1]},ni.prototype.has=function Ra(t){return Ke(this.__data__,t)>-1},ni.prototype.set=function Ta(t,i){var e=this.__data__,n=Ke(e,t);return n<0?(++this.size,e.push([t,i])):e[n][1]=i,this},si.prototype.clear=function Ma(){this.size=0,this.__data__={hash:new Ci,map:new(ue||ni),string:new Ci}},si.prototype.delete=function Ya(t){var i=rn(this,t).delete(t);return this.size-=i?1:0,i},si.prototype.get=function Xa(t){return rn(this,t).get(t)},si.prototype.has=function Ea(t){return rn(this,t).has(t)},si.prototype.set=function Sa(t,i){var e=rn(this,t),n=e.size;return e.set(t,i),this.size+=e.size==n?0:1,this},ki.prototype.add=ki.prototype.push=function Ua(t){return this.__data__.set(t,Si),this},ki.prototype.has=function Ba(t){return this.__data__.has(t)},qt.prototype.clear=function La(){this.__data__=new ni,this.size=0},qt.prototype.delete=function Oa(t){var i=this.__data__,e=i.delete(t);return this.size=i.size,e},qt.prototype.get=function Ha(t){return this.__data__.get(t)},qt.prototype.has=function Pa(t){return this.__data__.has(t)},qt.prototype.set=function Da(t,i){var e=this.__data__;if(e instanceof ni){var n=e.__data__;if(!ue||n.length<199)return n.push([t,i]),this.size=++e.size,this;e=this.__data__=new si(n)}return e.set(t,i),this.size=e.size,this};var wi=mh(Qt),Nr=mh(is,!0);function za(t,i){var e=!0;return wi(t,function(n,r,u){return e=!!i(n,r,u)}),e}function ze(t,i,e){for(var n=-1,r=t.length;++n<r;){var u=t[n],a=i(u);if(null!=a&&(d===l?a==a&&!Tt(a):e(a,d)))var d=a,p=u}return p}function $r(t,i){var e=[];return wi(t,function(n,r,u){i(n,r,u)&&e.push(n)}),e}function ft(t,i,e,n,r){var u=-1,a=t.length;for(e||(e=Bl),r||(r=[]);++u<a;){var d=t[u];i>0&&e(d)?i>1?ft(d,i-1,e,n,r):mi(r,d):n||(r[r.length]=d)}return r}var ts=_h(),Kr=_h(!0);function Qt(t,i){return t&&ts(t,i,at)}function is(t,i){return t&&Kr(t,i,at)}function qe(t,i){return gi(i,function(e){return ai(t[e])})}function Ti(t,i){for(var e=0,n=(i=vi(i,t)).length;null!=t&&e<n;)t=t[jt(i[e++])];return e&&e==n?t:l}function zr(t,i,e){var n=i(t);return O(t)?n:mi(n,e(t))}function _t(t){return null==t?t===l?"[object Undefined]":"[object Null]":Ai&&Ai in Q(t)?function Ml(t){var i=Z.call(t,Ai),e=t[Ai];try{t[Ai]=l;var n=!0}catch{}var r=Ue.call(t);return n&&(i?t[Ai]=e:delete t[Ai]),r}(t):function Gl(t){return Ue.call(t)}(t)}function es(t,i){return t>i}function Za(t,i){return null!=t&&Z.call(t,i)}function Ja(t,i){return null!=t&&i in Q(t)}function ns(t,i,e){for(var n=e?Hn:Re,r=t[0].length,u=t.length,a=u,d=m(u),p=1/0,b=[];a--;){var v=t[a];a&&i&&(v=it(v,kt(i))),p=pt(v.length,p),d[a]=!e&&(i||r>=120&&v.length>=120)?new ki(a&&v):l}v=t[0];var I=-1,k=d[0];t:for(;++I<r&&b.length<p;){var Y=v[I],U=i?i(Y):Y;if(Y=e||0!==Y?Y:0,!(k?he(k,U):n(b,U,e))){for(a=u;--a;){var D=d[a];if(!(D?he(D,U):n(t[a],U,e)))continue t}k&&k.push(U),b.push(Y)}}return b}function pe(t,i,e){var n=null==(t=Sh(t,i=vi(i,t)))?t:t[jt(Dt(i))];return null==n?l:Ct(n,t,e)}function qr(t){return nt(t)&&_t(t)==C}function ge(t,i,e,n,r){return t===i||(null==t||null==i||!nt(t)&&!nt(i)?t!=t&&i!=i:function il(t,i,e,n,r,u){var a=O(t),d=O(i),p=a?P:gt(t),b=d?P:gt(i),v=(p=p==C?ei:p)==ei,I=(b=b==C?ei:b)==ei,k=p==b;if(k&&xi(t)){if(!xi(i))return!1;a=!0,v=!1}if(k&&!v)return u||(u=new qt),a||Zi(t)?kh(t,i,e,n,r,u):function Rl(t,i,e,n,r,u,a){switch(e){case Li:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case se:return!(t.byteLength!=i.byteLength||!u(new Le(t),new Le(i)));case M:case j:case te:return Zt(+t,+i);case Ie:return t.name==i.name&&t.message==i.message;case ie:case ee:return t==i+"";case $t:var d=zn;case Kt:if(d||(d=Me),t.size!=i.size&&!(1&n))return!1;var b=a.get(t);if(b)return b==i;n|=2,a.set(t,i);var v=kh(d(t),d(i),n,r,u,a);return a.delete(t),v;case ye:if(fe)return fe.call(t)==fe.call(i)}return!1}(t,i,p,e,n,r,u);if(!(1&e)){var Y=v&&Z.call(t,"__wrapped__"),U=I&&Z.call(i,"__wrapped__");if(Y||U){var D=Y?t.value():t,B=U?i.value():i;return u||(u=new qt),r(D,B,e,n,u)}}return!!k&&(u||(u=new qt),function Tl(t,i,e,n,r,u){var a=1&e,d=Ws(t),p=d.length;if(p!=Ws(i).length&&!a)return!1;for(var I=p;I--;){var k=d[I];if(!(a?k in i:Z.call(i,k)))return!1}var Y=u.get(t),U=u.get(i);if(Y&&U)return Y==i&&U==t;var D=!0;u.set(t,i),u.set(i,t);for(var B=a;++I<p;){var G=t[k=d[I]],$=i[k];if(n)var Mt=a?n($,G,k,i,t,u):n(G,$,k,t,i,u);if(!(Mt===l?G===$||r(G,$,e,n,u):Mt)){D=!1;break}B||(B="constructor"==k)}if(D&&!B){var wt=t.constructor,Yt=i.constructor;wt!=Yt&&"constructor"in t&&"constructor"in i&&!("function"==typeof wt&&wt instanceof wt&&"function"==typeof Yt&&Yt instanceof Yt)&&(D=!1)}return u.delete(t),u.delete(i),D}(t,i,e,n,r,u))}(t,i,e,n,ge,r))}function ss(t,i,e,n){var r=e.length,u=r,a=!n;if(null==t)return!u;for(t=Q(t);r--;){var d=e[r];if(a&&d[2]?d[1]!==t[d[0]]:!(d[0]in t))return!1}for(;++r<u;){var p=(d=e[r])[0],b=t[p],v=d[1];if(a&&d[2]){if(b===l&&!(p in t))return!1}else{var I=new qt;if(n)var k=n(b,v,p,t,i,I);if(!(k===l?ge(v,b,3,n,I):k))return!1}}return!0}function Zr(t){return!(!et(t)||function Ol(t){return!!Yr&&Yr in t}(t))&&(ai(t)?ea:Ko).test(Yi(t))}function Jr(t){return"function"==typeof t?t:null==t?At:"object"==typeof t?O(t)?jr(t[0],t[1]):Vr(t):wo(t)}function rs(t){if(!We(t))return ua(t);var i=[];for(var e in Q(t))Z.call(t,e)&&"constructor"!=e&&i.push(e);return i}function hs(t,i){return t<i}function Qr(t,i){var e=-1,n=xt(t)?m(t.length):[];return wi(t,function(r,u,a){n[++e]=i(r,u,a)}),n}function Vr(t){var i=vs(t);return 1==i.length&&i[0][2]?Xh(i[0][0],i[0][1]):function(e){return e===t||ss(e,t,i)}}function jr(t,i){return xs(t)&&Yh(i)?Xh(jt(t),i):function(e){var n=Es(e,t);return n===l&&n===i?Ss(e,t):ge(i,n,3)}}function Ze(t,i,e,n,r){t!==i&&ts(i,function(u,a){if(r||(r=new qt),et(u))!function ol(t,i,e,n,r,u,a){var d=As(t,e),p=As(i,e),b=a.get(p);if(b)Vn(t,e,b);else{var v=u?u(d,p,e+"",t,i,a):l,I=v===l;if(I){var k=O(p),Y=!k&&xi(p),U=!k&&!Y&&Zi(p);v=p,k||Y||U?O(d)?v=d:st(d)?v=It(d):Y?(I=!1,v=fh(p,!0)):U?(I=!1,v=dh(p,!0)):v=[]:be(p)||Xi(p)?(v=d,Xi(d)?v=uo(d):(!et(d)||ai(d))&&(v=Mh(p))):I=!1}I&&(a.set(p,v),r(v,p,n,u,a),a.delete(p)),Vn(t,e,v)}}(t,i,a,e,Ze,n,r);else{var d=n?n(As(t,a),u,a+"",t,i,r):l;d===l&&(d=u),Vn(t,a,d)}},yt)}function th(t,i){var e=t.length;if(e)return ui(i+=i<0?e:0,e)?t[i]:l}function ih(t,i,e){i=i.length?it(i,function(u){return O(u)?function(a){return Ti(a,1===u.length?u[0]:u)}:u}):[At];var n=-1;return i=it(i,kt(E())),function Su(c,w){var m=c.length;for(c.sort(w);m--;)c[m]=c[m].value;return c}(Qr(t,function(u,a,d){return{criteria:it(i,function(b){return b(u)}),index:++n,value:u}}),function(u,a){return function bl(t,i,e){for(var n=-1,r=t.criteria,u=i.criteria,a=r.length,d=e.length;++n<a;){var p=ch(r[n],u[n]);if(p)return n>=d?p:p*("desc"==e[n]?-1:1)}return t.index-i.index}(u,a,e)})}function eh(t,i,e){for(var n=-1,r=i.length,u={};++n<r;){var a=i[n],d=Ti(t,a);e(d,a)&&me(u,vi(a,t),d)}return u}function os(t,i,e,n){var r=n?Eu:Hi,u=-1,a=i.length,d=t;for(t===i&&(i=It(i)),e&&(d=it(t,kt(e)));++u<a;)for(var p=0,b=i[u],v=e?e(b):b;(p=r(d,v,p,n))>-1;)d!==t&&He.call(d,p,1),He.call(t,p,1);return t}function nh(t,i){for(var e=t?i.length:0,n=e-1;e--;){var r=i[e];if(e==n||r!==u){var u=r;ui(r)?He.call(t,r,1):fs(t,r)}}return t}function us(t,i){return t+Fe(Lr()*(i-t+1))}function as(t,i){var e="";if(!t||i<1||i>S)return e;do{i%2&&(e+=t),(i=Fe(i/2))&&(t+=t)}while(i);return e}function F(t,i){return Cs(Eh(t,i,At),t+"")}function fl(t){return Pr(Ji(t))}function dl(t,i){var e=Ji(t);return hn(e,Ri(i,0,e.length))}function me(t,i,e,n){if(!et(t))return t;for(var r=-1,u=(i=vi(i,t)).length,a=u-1,d=t;null!=d&&++r<u;){var p=jt(i[r]),b=e;if("__proto__"===p||"constructor"===p||"prototype"===p)return t;if(r!=a){var v=d[p];(b=n?n(v,p,d):l)===l&&(b=et(v)?v:ui(i[r+1])?[]:{})}de(d,p,b),d=d[p]}return t}var sh=Ge?function(t,i){return Ge.set(t,i),t}:At,cl=Pe?function(t,i){return Pe(t,"toString",{configurable:!0,enumerable:!1,value:Bs(i),writable:!0})}:At;function pl(t){return hn(Ji(t))}function Pt(t,i,e){var n=-1,r=t.length;i<0&&(i=-i>r?0:r+i),(e=e>r?r:e)<0&&(e+=r),r=i>e?0:e-i>>>0,i>>>=0;for(var u=m(r);++n<r;)u[n]=t[n+i];return u}function gl(t,i){var e;return wi(t,function(n,r,u){return!(e=i(n,r,u))}),!!e}function Je(t,i,e){var n=0,r=null==t?n:t.length;if("number"==typeof i&&i==i&&r<=2147483647){for(;n<r;){var u=n+r>>>1,a=t[u];null!==a&&!Tt(a)&&(e?a<=i:a<i)?n=u+1:r=u}return r}return ls(t,i,At,e)}function ls(t,i,e,n){var r=0,u=null==t?0:t.length;if(0===u)return 0;for(var a=(i=e(i))!=i,d=null===i,p=Tt(i),b=i===l;r<u;){var v=Fe((r+u)/2),I=e(t[v]),k=I!==l,Y=null===I,U=I==I,D=Tt(I);if(a)var B=n||U;else B=b?U&&(n||k):d?U&&k&&(n||!Y):p?U&&k&&!Y&&(n||!D):!Y&&!D&&(n?I<=i:I<i);B?r=v+1:u=v}return pt(u,4294967294)}function rh(t,i){for(var e=-1,n=t.length,r=0,u=[];++e<n;){var a=t[e],d=i?i(a):a;if(!e||!Zt(d,p)){var p=d;u[r++]=0===a?0:a}}return u}function hh(t){return"number"==typeof t?t:Tt(t)?o:+t}function Rt(t){if("string"==typeof t)return t;if(O(t))return it(t,Rt)+"";if(Tt(t))return Or?Or.call(t):"";var i=t+"";return"0"==i&&1/t==-ii?"-0":i}function bi(t,i,e){var n=-1,r=Re,u=t.length,a=!0,d=[],p=d;if(e)a=!1,r=Hn;else if(u>=200){var b=i?null:Cl(t);if(b)return Me(b);a=!1,r=he,p=new ki}else p=i?[]:d;t:for(;++n<u;){var v=t[n],I=i?i(v):v;if(v=e||0!==v?v:0,a&&I==I){for(var k=p.length;k--;)if(p[k]===I)continue t;i&&p.push(I),d.push(v)}else r(p,I,e)||(p!==d&&p.push(I),d.push(v))}return d}function fs(t,i){return null==(t=Sh(t,i=vi(i,t)))||delete t[jt(Dt(i))]}function oh(t,i,e,n){return me(t,i,e(Ti(t,i)),n)}function Qe(t,i,e,n){for(var r=t.length,u=n?r:-1;(n?u--:++u<r)&&i(t[u],u,t););return e?Pt(t,n?0:u,n?u+1:r):Pt(t,n?u+1:0,n?r:u)}function uh(t,i){var e=t;return e instanceof N&&(e=e.value()),Pn(i,function(n,r){return r.func.apply(r.thisArg,mi([n],r.args))},e)}function ds(t,i,e){var n=t.length;if(n<2)return n?bi(t[0]):[];for(var r=-1,u=m(n);++r<n;)for(var a=t[r],d=-1;++d<n;)d!=r&&(u[r]=ce(u[r]||a,t[d],i,e));return bi(ft(u,1),i,e)}function ah(t,i,e){for(var n=-1,r=t.length,u=i.length,a={};++n<r;)e(a,t[n],n<u?i[n]:l);return a}function cs(t){return st(t)?t:[]}function ps(t){return"function"==typeof t?t:At}function vi(t,i){return O(t)?t:xs(t,i)?[t]:Oh(q(t))}var ml=F;function Ii(t,i,e){var n=t.length;return e=e===l?n:e,!i&&e>=n?t:Pt(t,i,e)}var lh=na||function(t){return lt.clearTimeout(t)};function fh(t,i){if(i)return t.slice();var e=t.length,n=Xr?Xr(e):new t.constructor(e);return t.copy(n),n}function gs(t){var i=new t.constructor(t.byteLength);return new Le(i).set(new Le(t)),i}function dh(t,i){var e=i?gs(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function ch(t,i){if(t!==i){var e=t!==l,n=null===t,r=t==t,u=Tt(t),a=i!==l,d=null===i,p=i==i,b=Tt(i);if(!d&&!b&&!u&&t>i||u&&a&&p&&!d&&!b||n&&a&&p||!e&&p||!r)return 1;if(!n&&!u&&!b&&t<i||b&&e&&r&&!n&&!u||d&&e&&r||!a&&r||!p)return-1}return 0}function ph(t,i,e,n){for(var r=-1,u=t.length,a=e.length,d=-1,p=i.length,b=ut(u-a,0),v=m(p+b),I=!n;++d<p;)v[d]=i[d];for(;++r<a;)(I||r<u)&&(v[e[r]]=t[r]);for(;b--;)v[d++]=t[r++];return v}function gh(t,i,e,n){for(var r=-1,u=t.length,a=-1,d=e.length,p=-1,b=i.length,v=ut(u-d,0),I=m(v+b),k=!n;++r<v;)I[r]=t[r];for(var Y=r;++p<b;)I[Y+p]=i[p];for(;++a<d;)(k||r<u)&&(I[Y+e[a]]=t[r++]);return I}function It(t,i){var e=-1,n=t.length;for(i||(i=m(n));++e<n;)i[e]=t[e];return i}function Vt(t,i,e,n){var r=!e;e||(e={});for(var u=-1,a=i.length;++u<a;){var d=i[u],p=n?n(e[d],t[d],d,e,t):l;p===l&&(p=t[d]),r?ri(e,d,p):de(e,d,p)}return e}function Ve(t,i){return function(e,n){var r=O(e)?ku:Na,u=i?i():{};return r(e,t,E(n,2),u)}}function Ki(t){return F(function(i,e){var n=-1,r=e.length,u=r>1?e[r-1]:l,a=r>2?e[2]:l;for(u=t.length>3&&"function"==typeof u?(r--,u):l,a&&Wt(e[0],e[1],a)&&(u=r<3?l:u,r=1),i=Q(i);++n<r;){var d=e[n];d&&t(i,d,n,u)}return i})}function mh(t,i){return function(e,n){if(null==e)return e;if(!xt(e))return t(e,n);for(var r=e.length,u=i?r:-1,a=Q(e);(i?u--:++u<r)&&!1!==n(a[u],u,a););return e}}function _h(t){return function(i,e,n){for(var r=-1,u=Q(i),a=n(i),d=a.length;d--;){var p=a[t?d:++r];if(!1===e(u[p],p,u))break}return i}}function Wh(t){return function(i){var e=Pi(i=q(i))?zt(i):l,n=e?e[0]:i.charAt(0),r=e?Ii(e,1).join(""):i.slice(1);return n[t]()+r}}function zi(t){return function(i){return Pn(_o(mo(i).replace(cu,"")),t,"")}}function _e(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var e=$i(t.prototype),n=t.apply(e,i);return et(n)?n:e}}function wh(t){return function(i,e,n){var r=Q(i);if(!xt(i)){var u=E(e,3);i=at(i),e=function(d){return u(r[d],d,r)}}var a=t(i,e,n);return a>-1?r[u?i[a]:a]:l}}function bh(t){return oi(function(i){var e=i.length,n=e,r=Ot.prototype.thru;for(t&&i.reverse();n--;){var u=i[n];if("function"!=typeof u)throw new Lt(mt);if(r&&!a&&"wrapper"==sn(u))var a=new Ot([],!0)}for(n=a?n:e;++n<e;){var d=sn(u=i[n]),p="wrapper"==d?bs(u):l;a=p&&ys(p[0])&&424==p[1]&&!p[4].length&&1==p[9]?a[sn(p[0])].apply(a,p[3]):1==u.length&&ys(u)?a[d]():a.thru(u)}return function(){var b=arguments,v=b[0];if(a&&1==b.length&&O(v))return a.plant(v).value();for(var I=0,k=e?i[I].apply(this,b):v;++I<e;)k=i[I].call(this,k);return k}})}function je(t,i,e,n,r,u,a,d,p,b){var v=128&i,I=1&i,k=2&i,Y=24&i,U=512&i,D=k?l:_e(t);return function B(){for(var G=arguments.length,$=m(G),Mt=G;Mt--;)$[Mt]=arguments[Mt];if(Y)var wt=qi(B),Yt=Bu($,wt);if(n&&($=ph($,n,r,Y)),u&&($=gh($,u,a,Y)),G-=Yt,Y&&G<b){var rt=_i($,wt);return xh(t,i,je,B.placeholder,e,$,rt,d,p,b-G)}var Jt=I?e:this,fi=k?Jt[t]:t;return G=$.length,d?$=Nl($,d):U&&G>1&&$.reverse(),v&&p<G&&($.length=p),this&&this!==lt&&this instanceof B&&(fi=D||_e(fi)),fi.apply(Jt,$)}}function vh(t,i){return function(e,n){return function Va(t,i,e,n){return Qt(t,function(r,u,a){i(n,e(r),u,a)}),n}(e,t,i(n),{})}}function tn(t,i){return function(e,n){var r;if(e===l&&n===l)return i;if(e!==l&&(r=e),n!==l){if(r===l)return n;"string"==typeof e||"string"==typeof n?(e=Rt(e),n=Rt(n)):(e=hh(e),n=hh(n)),r=t(e,n)}return r}}function ms(t){return oi(function(i){return i=it(i,kt(E())),F(function(e){var n=this;return t(i,function(r){return Ct(r,n,e)})})})}function en(t,i){var e=(i=i===l?" ":Rt(i)).length;if(e<2)return e?as(i,t):i;var n=as(i,De(t/Di(i)));return Pi(i)?Ii(zt(n),0,t).join(""):n.slice(0,t)}function Ih(t){return function(i,e,n){return n&&"number"!=typeof n&&Wt(i,e,n)&&(e=n=l),i=li(i),e===l?(e=i,i=0):e=li(e),function ll(t,i,e,n){for(var r=-1,u=ut(De((i-t)/(e||1)),0),a=m(u);u--;)a[n?u:++r]=t,t+=e;return a}(i,e,n=n===l?i<e?1:-1:li(n),t)}}function nn(t){return function(i,e){return"string"==typeof i&&"string"==typeof e||(i=Ft(i),e=Ft(e)),t(i,e)}}function xh(t,i,e,n,r,u,a,d,p,b){var v=8&i;i|=v?32:64,4&(i&=~(v?64:32))||(i&=-4);var D=[t,i,r,v?u:l,v?a:l,v?l:u,v?l:a,d,p,b],B=e.apply(l,D);return ys(t)&&Uh(B,D),B.placeholder=n,Bh(B,t,i)}function _s(t){var i=ot[t];return function(e,n){if(e=Ft(e),(n=null==n?0:pt(H(n),292))&&Br(e)){var r=(q(e)+"e").split("e");return+((r=(q(i(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return i(e)}}var Cl=Gi&&1/Me(new Gi([,-0]))[1]==ii?function(t){return new Gi(t)}:Hs;function yh(t){return function(i){var e=gt(i);return e==$t?zn(i):e==Kt?function Gu(c){var w=-1,m=Array(c.size);return c.forEach(function(T){m[++w]=[T,T]}),m}(i):function Uu(c,w){return it(w,function(m){return[m,c[m]]})}(i,t(i))}}function hi(t,i,e,n,r,u,a,d){var p=2&i;if(!p&&"function"!=typeof t)throw new Lt(mt);var b=n?n.length:0;if(b||(i&=-97,n=r=l),a=a===l?a:ut(H(a),0),d=d===l?d:H(d),b-=r?r.length:0,64&i){var v=n,I=r;n=r=l}var k=p?l:bs(t),Y=[t,i,e,n,r,v,I,u,a,d];if(k&&function Dl(t,i){var e=t[1],n=i[1],r=e|n;if(!(r<131||(128==n&&8==e||128==n&&256==e&&t[7].length<=i[8]||384==n&&i[7].length<=i[8]&&8==e)))return t;1&n&&(t[2]=i[2],r|=1&e?0:4);var d=i[3];if(d){var p=t[3];t[3]=p?ph(p,d,i[4]):d,t[4]=p?_i(t[3],Ui):i[4]}(d=i[5])&&(t[5]=(p=t[5])?gh(p,d,i[6]):d,t[6]=p?_i(t[5],Ui):i[6]),(d=i[7])&&(t[7]=d),128&n&&(t[8]=null==t[8]?i[8]:pt(t[8],i[8])),null==t[9]&&(t[9]=i[9]),t[0]=i[0],t[1]=r}(Y,k),t=Y[0],i=Y[1],e=Y[2],n=Y[3],r=Y[4],!(d=Y[9]=Y[9]===l?p?0:t.length:ut(Y[9]-b,0))&&24&i&&(i&=-25),i&&1!=i)U=8==i||16==i?function yl(t,i,e){var n=_e(t);return function r(){for(var u=arguments.length,a=m(u),d=u,p=qi(r);d--;)a[d]=arguments[d];var b=u<3&&a[0]!==p&&a[u-1]!==p?[]:_i(a,p);return(u-=b.length)<e?xh(t,i,je,r.placeholder,l,a,b,l,l,e-u):Ct(this&&this!==lt&&this instanceof r?n:t,this,a)}}(t,i,d):32!=i&&33!=i||r.length?je.apply(l,Y):function Al(t,i,e,n){var r=1&i,u=_e(t);return function a(){for(var d=-1,p=arguments.length,b=-1,v=n.length,I=m(v+p),k=this&&this!==lt&&this instanceof a?u:t;++b<v;)I[b]=n[b];for(;p--;)I[b++]=arguments[++d];return Ct(k,r?e:this,I)}}(t,i,e,n);else var U=function xl(t,i,e){var n=1&i,r=_e(t);return function u(){return(this&&this!==lt&&this instanceof u?r:t).apply(n?e:this,arguments)}}(t,i,e);return Bh((k?sh:Uh)(U,Y),t,i)}function Ah(t,i,e,n){return t===l||Zt(t,Fi[e])&&!Z.call(n,e)?i:t}function Ch(t,i,e,n,r,u){return et(t)&&et(i)&&(u.set(i,t),Ze(t,i,l,Ch,u),u.delete(i)),t}function kl(t){return be(t)?l:t}function kh(t,i,e,n,r,u){var a=1&e,d=t.length,p=i.length;if(d!=p&&!(a&&p>d))return!1;var b=u.get(t),v=u.get(i);if(b&&v)return b==i&&v==t;var I=-1,k=!0,Y=2&e?new ki:l;for(u.set(t,i),u.set(i,t);++I<d;){var U=t[I],D=i[I];if(n)var B=a?n(D,U,I,i,t,u):n(U,D,I,t,i,u);if(B!==l){if(B)continue;k=!1;break}if(Y){if(!Dn(i,function(G,$){if(!he(Y,$)&&(U===G||r(U,G,e,n,u)))return Y.push($)})){k=!1;break}}else if(U!==D&&!r(U,D,e,n,u)){k=!1;break}}return u.delete(t),u.delete(i),k}function oi(t){return Cs(Eh(t,l,Fh),t+"")}function Ws(t){return zr(t,at,Is)}function ws(t){return zr(t,yt,Rh)}var bs=Ge?function(t){return Ge.get(t)}:Hs;function sn(t){for(var i=t.name+"",e=Ni[i],n=Z.call(Ni,i)?e.length:0;n--;){var r=e[n],u=r.func;if(null==u||u==t)return r.name}return i}function qi(t){return(Z.call(h,"placeholder")?h:t).placeholder}function E(){var t=h.iteratee||Ls;return t=t===Ls?Jr:t,arguments.length?t(arguments[0],arguments[1]):t}function rn(t,i){var e=t.__data__;return function Ll(t){var i=typeof t;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t}(i)?e["string"==typeof i?"string":"hash"]:e.map}function vs(t){for(var i=at(t),e=i.length;e--;){var n=i[e],r=t[n];i[e]=[n,r,Yh(r)]}return i}function Mi(t,i){var e=function Pu(c,w){return null==c?l:c[w]}(t,i);return Zr(e)?e:l}var Is=Zn?function(t){return null==t?[]:(t=Q(t),gi(Zn(t),function(i){return Sr.call(t,i)}))}:Ps,Rh=Zn?function(t){for(var i=[];t;)mi(i,Is(t)),t=Oe(t);return i}:Ps,gt=_t;function Th(t,i,e){for(var n=-1,r=(i=vi(i,t)).length,u=!1;++n<r;){var a=jt(i[n]);if(!(u=null!=t&&e(t,a)))break;t=t[a]}return u||++n!=r?u:!!(r=null==t?0:t.length)&&dn(r)&&ui(a,r)&&(O(t)||Xi(t))}function Mh(t){return"function"!=typeof t.constructor||We(t)?{}:$i(Oe(t))}function Bl(t){return O(t)||Xi(t)||!!(Ur&&t&&t[Ur])}function ui(t,i){var e=typeof t;return!!(i=i??S)&&("number"==e||"symbol"!=e&&qo.test(t))&&t>-1&&t%1==0&&t<i}function Wt(t,i,e){if(!et(e))return!1;var n=typeof i;return!!("number"==n?xt(e)&&ui(i,e.length):"string"==n&&i in e)&&Zt(e[i],t)}function xs(t,i){if(O(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!Tt(t))||Eo.test(t)||!Xo.test(t)||null!=i&&t in Q(i)}function ys(t){var i=sn(t),e=h[i];if("function"!=typeof e||!(i in N.prototype))return!1;if(t===e)return!0;var n=bs(e);return!!n&&t===n[0]}(Jn&&gt(new Jn(new ArrayBuffer(1)))!=Li||ue&&gt(new ue)!=$t||Qn&&gt(Qn.resolve())!=Gs||Gi&&gt(new Gi)!=Kt||ae&&gt(new ae)!=ne)&&(gt=function(t){var i=_t(t),e=i==ei?t.constructor:l,n=e?Yi(e):"";if(n)switch(n){case da:return Li;case ca:return $t;case pa:return Gs;case ga:return Kt;case ma:return ne}return i});var Hl=Ee?ai:Ds;function We(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||Fi)}function Yh(t){return t==t&&!et(t)}function Xh(t,i){return function(e){return null!=e&&e[t]===i&&(i!==l||t in Q(e))}}function Eh(t,i,e){return i=ut(i===l?t.length-1:i,0),function(){for(var n=arguments,r=-1,u=ut(n.length-i,0),a=m(u);++r<u;)a[r]=n[i+r];r=-1;for(var d=m(i+1);++r<i;)d[r]=n[r];return d[i]=e(a),Ct(t,this,d)}}function Sh(t,i){return i.length<2?t:Ti(t,Pt(i,0,-1))}function Nl(t,i){for(var e=t.length,n=pt(i.length,e),r=It(t);n--;){var u=i[n];t[n]=ui(u,e)?r[u]:l}return t}function As(t,i){if(("constructor"!==i||"function"!=typeof t[i])&&"__proto__"!=i)return t[i]}var Uh=Lh(sh),we=ra||function(t,i){return lt.setTimeout(t,i)},Cs=Lh(cl);function Bh(t,i,e){var n=i+"";return Cs(t,function Ul(t,i){var e=i.length;if(!e)return t;var n=e-1;return i[n]=(e>1?"& ":"")+i[n],i=i.join(e>2?", ":" "),t.replace(Lo,"{\n/* [wrapped with "+i+"] */\n")}(n,function $l(t,i){return Bt(R,function(e){var n="_."+e[0];i&e[1]&&!Re(t,n)&&t.push(n)}),t.sort()}(function Xl(t){var i=t.match(Oo);return i?i[1].split(Ho):[]}(n),e)))}function Lh(t){var i=0,e=0;return function(){var n=aa(),r=16-(n-e);if(e=n,r>0){if(++i>=800)return arguments[0]}else i=0;return t.apply(l,arguments)}}function hn(t,i){var e=-1,n=t.length,r=n-1;for(i=i===l?n:i;++e<i;){var u=us(e,r),a=t[u];t[u]=t[e],t[e]=a}return t.length=i,t}var Oh=function Pl(t){var i=ln(t,function(n){return 500===e.size&&e.clear(),n}),e=i.cache;return i}(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(So,function(e,n,r,u){i.push(r?u.replace(Fo,"$1"):n||e)}),i});function jt(t){if("string"==typeof t||Tt(t))return t;var i=t+"";return"0"==i&&1/t==-ii?"-0":i}function Yi(t){if(null!=t){try{return Se.call(t)}catch{}try{return t+""}catch{}}return""}function Hh(t){if(t instanceof N)return t.clone();var i=new Ot(t.__wrapped__,t.__chain__);return i.__actions__=It(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}var Zl=F(function(t,i){return st(t)?ce(t,ft(i,1,st,!0)):[]}),Jl=F(function(t,i){var e=Dt(i);return st(e)&&(e=l),st(t)?ce(t,ft(i,1,st,!0),E(e,2)):[]}),Ql=F(function(t,i){var e=Dt(i);return st(e)&&(e=l),st(t)?ce(t,ft(i,1,st,!0),l,e):[]});function Ph(t,i,e){var n=null==t?0:t.length;if(!n)return-1;var r=null==e?0:H(e);return r<0&&(r=ut(n+r,0)),Te(t,E(i,3),r)}function Dh(t,i,e){var n=null==t?0:t.length;if(!n)return-1;var r=n-1;return e!==l&&(r=H(e),r=e<0?ut(n+r,0):pt(r,n-1)),Te(t,E(i,3),r,!0)}function Fh(t){return null!=t&&t.length?ft(t,1):[]}function Gh(t){return t&&t.length?t[0]:l}var af=F(function(t){var i=it(t,cs);return i.length&&i[0]===t[0]?ns(i):[]}),lf=F(function(t){var i=Dt(t),e=it(t,cs);return i===Dt(e)?i=l:e.pop(),e.length&&e[0]===t[0]?ns(e,E(i,2)):[]}),ff=F(function(t){var i=Dt(t),e=it(t,cs);return(i="function"==typeof i?i:l)&&e.pop(),e.length&&e[0]===t[0]?ns(e,l,i):[]});function Dt(t){var i=null==t?0:t.length;return i?t[i-1]:l}var gf=F(Nh);function Nh(t,i){return t&&t.length&&i&&i.length?os(t,i):t}var Wf=oi(function(t,i){var e=null==t?0:t.length,n=jn(t,i);return nh(t,it(i,function(r){return ui(r,e)?+r:r}).sort(ch)),n});function ks(t){return null==t?t:fa.call(t)}var Sf=F(function(t){return bi(ft(t,1,st,!0))}),Uf=F(function(t){var i=Dt(t);return st(i)&&(i=l),bi(ft(t,1,st,!0),E(i,2))}),Bf=F(function(t){var i=Dt(t);return i="function"==typeof i?i:l,bi(ft(t,1,st,!0),l,i)});function Rs(t){if(!t||!t.length)return[];var i=0;return t=gi(t,function(e){if(st(e))return i=ut(e.length,i),!0}),$n(i,function(e){return it(t,Fn(e))})}function $h(t,i){if(!t||!t.length)return[];var e=Rs(t);return null==i?e:it(e,function(n){return Ct(i,l,n)})}var Pf=F(function(t,i){return st(t)?ce(t,i):[]}),Df=F(function(t){return ds(gi(t,st))}),Ff=F(function(t){var i=Dt(t);return st(i)&&(i=l),ds(gi(t,st),E(i,2))}),Gf=F(function(t){var i=Dt(t);return i="function"==typeof i?i:l,ds(gi(t,st),l,i)}),Nf=F(Rs),zf=F(function(t){var i=t.length,e=i>1?t[i-1]:l;return e="function"==typeof e?(t.pop(),e):l,$h(t,e)});function Kh(t){var i=h(t);return i.__chain__=!0,i}function on(t,i){return i(t)}var Zf=oi(function(t){var i=t.length,e=i?t[0]:0,n=this.__wrapped__,r=function(u){return jn(u,t)};return!(i>1||this.__actions__.length)&&n instanceof N&&ui(e)?((n=n.slice(e,+e+(i?1:0))).__actions__.push({func:on,args:[r],thisArg:l}),new Ot(n,this.__chain__).thru(function(u){return i&&!u.length&&u.push(l),u})):this.thru(r)}),nd=Ve(function(t,i,e){Z.call(t,e)?++t[e]:ri(t,e,1)}),hd=wh(Ph),od=wh(Dh);function zh(t,i){return(O(t)?Bt:wi)(t,E(i,3))}function qh(t,i){return(O(t)?Ru:Nr)(t,E(i,3))}var fd=Ve(function(t,i,e){Z.call(t,e)?t[e].push(i):ri(t,e,[i])}),cd=F(function(t,i,e){var n=-1,r="function"==typeof i,u=xt(t)?m(t.length):[];return wi(t,function(a){u[++n]=r?Ct(i,a,e):pe(a,i,e)}),u}),pd=Ve(function(t,i,e){ri(t,e,i)});function un(t,i){return(O(t)?it:Qr)(t,E(i,3))}var md=Ve(function(t,i,e){t[e?0:1].push(i)},function(){return[[],[]]}),Ad=F(function(t,i){if(null==t)return[];var e=i.length;return e>1&&Wt(t,i[0],i[1])?i=[]:e>2&&Wt(i[0],i[1],i[2])&&(i=[i[0]]),ih(t,ft(i,1),[])}),an=sa||function(){return lt.Date.now()};function Zh(t,i,e){return i=e?l:i,hi(t,128,l,l,l,l,i=t&&null==i?t.length:i)}function Jh(t,i){var e;if("function"!=typeof i)throw new Lt(mt);return t=H(t),function(){return--t>0&&(e=i.apply(this,arguments)),t<=1&&(i=l),e}}var Ts=F(function(t,i,e){var n=1;if(e.length){var r=_i(e,qi(Ts));n|=32}return hi(t,n,i,e,r)}),Qh=F(function(t,i,e){var n=3;if(e.length){var r=_i(e,qi(Qh));n|=32}return hi(i,n,t,e,r)});function to(t,i,e){var n,r,u,a,d,p,b=0,v=!1,I=!1,k=!0;if("function"!=typeof t)throw new Lt(mt);function Y(rt){var Jt=n,fi=r;return n=r=l,b=rt,a=t.apply(fi,Jt)}function U(rt){return b=rt,d=we(G,i),v?Y(rt):a}function B(rt){var Jt=rt-p;return p===l||Jt>=i||Jt<0||I&&rt-b>=u}function G(){var rt=an();if(B(rt))return $(rt);d=we(G,function D(rt){var bo=i-(rt-p);return I?pt(bo,u-(rt-b)):bo}(rt))}function $(rt){return d=l,k&&n?Y(rt):(n=r=l,a)}function Yt(){var rt=an(),Jt=B(rt);if(n=arguments,r=this,p=rt,Jt){if(d===l)return U(p);if(I)return lh(d),d=we(G,i),Y(p)}return d===l&&(d=we(G,i)),a}return i=Ft(i)||0,et(e)&&(v=!!e.leading,u=(I="maxWait"in e)?ut(Ft(e.maxWait)||0,i):u,k="trailing"in e?!!e.trailing:k),Yt.cancel=function Mt(){d!==l&&lh(d),b=0,n=p=r=d=l},Yt.flush=function wt(){return d===l?a:$(an())},Yt}var kd=F(function(t,i){return Gr(t,1,i)}),Rd=F(function(t,i,e){return Gr(t,Ft(i)||0,e)});function ln(t,i){if("function"!=typeof t||null!=i&&"function"!=typeof i)throw new Lt(mt);var e=function(){var n=arguments,r=i?i.apply(this,n):n[0],u=e.cache;if(u.has(r))return u.get(r);var a=t.apply(this,n);return e.cache=u.set(r,a)||u,a};return e.cache=new(ln.Cache||si),e}function fn(t){if("function"!=typeof t)throw new Lt(mt);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}ln.Cache=si;var Yd=ml(function(t,i){var e=(i=1==i.length&&O(i[0])?it(i[0],kt(E())):it(ft(i,1),kt(E()))).length;return F(function(n){for(var r=-1,u=pt(n.length,e);++r<u;)n[r]=i[r].call(this,n[r]);return Ct(t,this,n)})}),Ms=F(function(t,i){var e=_i(i,qi(Ms));return hi(t,32,l,i,e)}),io=F(function(t,i){var e=_i(i,qi(io));return hi(t,64,l,i,e)}),Xd=oi(function(t,i){return hi(t,256,l,l,l,i)});function Zt(t,i){return t===i||t!=t&&i!=i}var Nd=nn(es),$d=nn(function(t,i){return t>=i}),Xi=qr(function(){return arguments}())?qr:function(t){return nt(t)&&Z.call(t,"callee")&&!Sr.call(t,"callee")},O=m.isArray,Kd=gr?kt(gr):function ja(t){return nt(t)&&_t(t)==se};function xt(t){return null!=t&&dn(t.length)&&!ai(t)}function st(t){return nt(t)&&xt(t)}var xi=ha||Ds,qd=mr?kt(mr):function tl(t){return nt(t)&&_t(t)==j};function Ys(t){if(!nt(t))return!1;var i=_t(t);return i==Ie||"[object DOMException]"==i||"string"==typeof t.message&&"string"==typeof t.name&&!be(t)}function ai(t){if(!et(t))return!1;var i=_t(t);return i==xe||i==Fs||"[object AsyncFunction]"==i||"[object Proxy]"==i}function eo(t){return"number"==typeof t&&t==H(t)}function dn(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=S}function et(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}function nt(t){return null!=t&&"object"==typeof t}var no=_r?kt(_r):function el(t){return nt(t)&&gt(t)==$t};function so(t){return"number"==typeof t||nt(t)&&_t(t)==te}function be(t){if(!nt(t)||_t(t)!=ei)return!1;var i=Oe(t);if(null===i)return!0;var e=Z.call(i,"constructor")&&i.constructor;return"function"==typeof e&&e instanceof e&&Se.call(e)==ta}var Xs=Wr?kt(Wr):function nl(t){return nt(t)&&_t(t)==ie},ro=wr?kt(wr):function sl(t){return nt(t)&&gt(t)==Kt};function cn(t){return"string"==typeof t||!O(t)&&nt(t)&&_t(t)==ee}function Tt(t){return"symbol"==typeof t||nt(t)&&_t(t)==ye}var Zi=br?kt(br):function rl(t){return nt(t)&&dn(t.length)&&!!tt[_t(t)]},lc=nn(hs),fc=nn(function(t,i){return t<=i});function ho(t){if(!t)return[];if(xt(t))return cn(t)?zt(t):It(t);if(oe&&t[oe])return function Fu(c){for(var w,m=[];!(w=c.next()).done;)m.push(w.value);return m}(t[oe]());var i=gt(t);return(i==$t?zn:i==Kt?Me:Ji)(t)}function li(t){return t?(t=Ft(t))===ii||t===-ii?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function H(t){var i=li(t),e=i%1;return i==i?e?i-e:i:0}function oo(t){return t?Ri(H(t),0,f):0}function Ft(t){if("number"==typeof t)return t;if(Tt(t))return o;if(et(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=et(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=Cr(t);var e=$o.test(t);return e||zo.test(t)?Au(t.slice(2),e?2:8):No.test(t)?o:+t}function uo(t){return Vt(t,yt(t))}function q(t){return null==t?"":Rt(t)}var cc=Ki(function(t,i){if(We(i)||xt(i))Vt(i,at(i),t);else for(var e in i)Z.call(i,e)&&de(t,e,i[e])}),ao=Ki(function(t,i){Vt(i,yt(i),t)}),pn=Ki(function(t,i,e,n){Vt(i,yt(i),t,n)}),pc=Ki(function(t,i,e,n){Vt(i,at(i),t,n)}),gc=oi(jn),_c=F(function(t,i){t=Q(t);var e=-1,n=i.length,r=n>2?i[2]:l;for(r&&Wt(i[0],i[1],r)&&(n=1);++e<n;)for(var u=i[e],a=yt(u),d=-1,p=a.length;++d<p;){var b=a[d],v=t[b];(v===l||Zt(v,Fi[b])&&!Z.call(t,b))&&(t[b]=u[b])}return t}),Wc=F(function(t){return t.push(l,Ch),Ct(lo,l,t)});function Es(t,i,e){var n=null==t?l:Ti(t,i);return n===l?e:n}function Ss(t,i){return null!=t&&Th(t,i,Ja)}var Rc=vh(function(t,i,e){null!=i&&"function"!=typeof i.toString&&(i=Ue.call(i)),t[i]=e},Bs(At)),Tc=vh(function(t,i,e){null!=i&&"function"!=typeof i.toString&&(i=Ue.call(i)),Z.call(t,i)?t[i].push(e):t[i]=[e]},E),Mc=F(pe);function at(t){return xt(t)?Hr(t):rs(t)}function yt(t){return xt(t)?Hr(t,!0):function hl(t){if(!et(t))return function Fl(t){var i=[];if(null!=t)for(var e in Q(t))i.push(e);return i}(t);var i=We(t),e=[];for(var n in t)"constructor"==n&&(i||!Z.call(t,n))||e.push(n);return e}(t)}var Ec=Ki(function(t,i,e){Ze(t,i,e)}),lo=Ki(function(t,i,e,n){Ze(t,i,e,n)}),Sc=oi(function(t,i){var e={};if(null==t)return e;var n=!1;i=it(i,function(u){return u=vi(u,t),n||(n=u.length>1),u}),Vt(t,ws(t),e),n&&(e=Ht(e,7,kl));for(var r=i.length;r--;)fs(e,i[r]);return e}),Bc=oi(function(t,i){return null==t?{}:function ul(t,i){return eh(t,i,function(e,n){return Ss(t,n)})}(t,i)});function fo(t,i){if(null==t)return{};var e=it(ws(t),function(n){return[n]});return i=E(i),eh(t,e,function(n,r){return i(n,r[0])})}var co=yh(at),po=yh(yt);function Ji(t){return null==t?[]:Kn(t,at(t))}var qc=zi(function(t,i,e){return i=i.toLowerCase(),t+(e?go(i):i)});function go(t){return Us(q(t).toLowerCase())}function mo(t){return(t=q(t))&&t.replace(Zo,Lu).replace(pu,"")}var Vc=zi(function(t,i,e){return t+(e?"-":"")+i.toLowerCase()}),jc=zi(function(t,i,e){return t+(e?" ":"")+i.toLowerCase()}),tp=Wh("toLowerCase"),op=zi(function(t,i,e){return t+(e?"_":"")+i.toLowerCase()}),ap=zi(function(t,i,e){return t+(e?" ":"")+Us(i)}),wp=zi(function(t,i,e){return t+(e?" ":"")+i.toUpperCase()}),Us=Wh("toUpperCase");function _o(t,i,e){return t=q(t),(i=e?l:i)===l?function Du(c){return _u.test(c)}(t)?function Zu(c){return c.match(gu)||[]}(t):function Xu(c){return c.match(Po)||[]}(t):t.match(i)||[]}var Wo=F(function(t,i){try{return Ct(t,l,i)}catch(e){return Ys(e)?e:new L(e)}}),bp=oi(function(t,i){return Bt(i,function(e){e=jt(e),ri(t,e,Ts(t[e],t))}),t});function Bs(t){return function(){return t}}var yp=bh(),Ap=bh(!0);function At(t){return t}function Ls(t){return Jr("function"==typeof t?t:Ht(t,1))}var Rp=F(function(t,i){return function(e){return pe(e,t,i)}}),Tp=F(function(t,i){return function(e){return pe(t,e,i)}});function Os(t,i,e){var n=at(i),r=qe(i,n);null==e&&(!et(i)||!r.length&&n.length)&&(e=i,i=t,t=this,r=qe(i,at(i)));var u=!(et(e)&&"chain"in e&&!e.chain),a=ai(t);return Bt(r,function(d){var p=i[d];t[d]=p,a&&(t.prototype[d]=function(){var b=this.__chain__;if(u||b){var v=t(this.__wrapped__),I=v.__actions__=It(this.__actions__);return I.push({func:p,args:arguments,thisArg:t}),v.__chain__=b,v}return p.apply(t,mi([this.value()],arguments))})}),t}function Hs(){}var Xp=ms(it),Ep=ms(vr),Sp=ms(Dn);function wo(t){return xs(t)?Fn(jt(t)):function al(t){return function(i){return Ti(i,t)}}(t)}var Bp=Ih(),Lp=Ih(!0);function Ps(){return[]}function Ds(){return!1}var Np=tn(function(t,i){return t+i},0),$p=_s("ceil"),Kp=tn(function(t,i){return t/i},1),zp=_s("floor"),tg=tn(function(t,i){return t*i},1),ig=_s("round"),eg=tn(function(t,i){return t-i},0);return h.after=function Cd(t,i){if("function"!=typeof i)throw new Lt(mt);return t=H(t),function(){if(--t<1)return i.apply(this,arguments)}},h.ary=Zh,h.assign=cc,h.assignIn=ao,h.assignInWith=pn,h.assignWith=pc,h.at=gc,h.before=Jh,h.bind=Ts,h.bindAll=bp,h.bindKey=Qh,h.castArray=function Od(){if(!arguments.length)return[];var t=arguments[0];return O(t)?t:[t]},h.chain=Kh,h.chunk=function Kl(t,i,e){i=(e?Wt(t,i,e):i===l)?1:ut(H(i),0);var n=null==t?0:t.length;if(!n||i<1)return[];for(var r=0,u=0,a=m(De(n/i));r<n;)a[u++]=Pt(t,r,r+=i);return a},h.compact=function zl(t){for(var i=-1,e=null==t?0:t.length,n=0,r=[];++i<e;){var u=t[i];u&&(r[n++]=u)}return r},h.concat=function ql(){var t=arguments.length;if(!t)return[];for(var i=m(t-1),e=arguments[0],n=t;n--;)i[n-1]=arguments[n];return mi(O(e)?It(e):[e],ft(i,1))},h.cond=function vp(t){var i=null==t?0:t.length,e=E();return t=i?it(t,function(n){if("function"!=typeof n[1])throw new Lt(mt);return[e(n[0]),n[1]]}):[],F(function(n){for(var r=-1;++r<i;){var u=t[r];if(Ct(u[0],this,n))return Ct(u[1],this,n)}})},h.conforms=function Ip(t){return function Ka(t){var i=at(t);return function(e){return Fr(e,t,i)}}(Ht(t,1))},h.constant=Bs,h.countBy=nd,h.create=function mc(t,i){var e=$i(t);return null==i?e:Dr(e,i)},h.curry=function Vh(t,i,e){var n=hi(t,8,l,l,l,l,l,i=e?l:i);return n.placeholder=Vh.placeholder,n},h.curryRight=function jh(t,i,e){var n=hi(t,16,l,l,l,l,l,i=e?l:i);return n.placeholder=jh.placeholder,n},h.debounce=to,h.defaults=_c,h.defaultsDeep=Wc,h.defer=kd,h.delay=Rd,h.difference=Zl,h.differenceBy=Jl,h.differenceWith=Ql,h.drop=function Vl(t,i,e){var n=null==t?0:t.length;return n?Pt(t,(i=e||i===l?1:H(i))<0?0:i,n):[]},h.dropRight=function jl(t,i,e){var n=null==t?0:t.length;return n?Pt(t,0,(i=n-(i=e||i===l?1:H(i)))<0?0:i):[]},h.dropRightWhile=function tf(t,i){return t&&t.length?Qe(t,E(i,3),!0,!0):[]},h.dropWhile=function ef(t,i){return t&&t.length?Qe(t,E(i,3),!0):[]},h.fill=function nf(t,i,e,n){var r=null==t?0:t.length;return r?(e&&"number"!=typeof e&&Wt(t,i,e)&&(e=0,n=r),function qa(t,i,e,n){var r=t.length;for((e=H(e))<0&&(e=-e>r?0:r+e),(n=n===l||n>r?r:H(n))<0&&(n+=r),n=e>n?0:oo(n);e<n;)t[e++]=i;return t}(t,i,e,n)):[]},h.filter=function rd(t,i){return(O(t)?gi:$r)(t,E(i,3))},h.flatMap=function ud(t,i){return ft(un(t,i),1)},h.flatMapDeep=function ad(t,i){return ft(un(t,i),ii)},h.flatMapDepth=function ld(t,i,e){return e=e===l?1:H(e),ft(un(t,i),e)},h.flatten=Fh,h.flattenDeep=function sf(t){return null!=t&&t.length?ft(t,ii):[]},h.flattenDepth=function rf(t,i){return null!=t&&t.length?ft(t,i=i===l?1:H(i)):[]},h.flip=function Td(t){return hi(t,512)},h.flow=yp,h.flowRight=Ap,h.fromPairs=function hf(t){for(var i=-1,e=null==t?0:t.length,n={};++i<e;){var r=t[i];n[r[0]]=r[1]}return n},h.functions=function Ac(t){return null==t?[]:qe(t,at(t))},h.functionsIn=function Cc(t){return null==t?[]:qe(t,yt(t))},h.groupBy=fd,h.initial=function uf(t){return null!=t&&t.length?Pt(t,0,-1):[]},h.intersection=af,h.intersectionBy=lf,h.intersectionWith=ff,h.invert=Rc,h.invertBy=Tc,h.invokeMap=cd,h.iteratee=Ls,h.keyBy=pd,h.keys=at,h.keysIn=yt,h.map=un,h.mapKeys=function Yc(t,i){var e={};return i=E(i,3),Qt(t,function(n,r,u){ri(e,i(n,r,u),n)}),e},h.mapValues=function Xc(t,i){var e={};return i=E(i,3),Qt(t,function(n,r,u){ri(e,r,i(n,r,u))}),e},h.matches=function Cp(t){return Vr(Ht(t,1))},h.matchesProperty=function kp(t,i){return jr(t,Ht(i,1))},h.memoize=ln,h.merge=Ec,h.mergeWith=lo,h.method=Rp,h.methodOf=Tp,h.mixin=Os,h.negate=fn,h.nthArg=function Yp(t){return t=H(t),F(function(i){return th(i,t)})},h.omit=Sc,h.omitBy=function Uc(t,i){return fo(t,fn(E(i)))},h.once=function Md(t){return Jh(2,t)},h.orderBy=function gd(t,i,e,n){return null==t?[]:(O(i)||(i=null==i?[]:[i]),O(e=n?l:e)||(e=null==e?[]:[e]),ih(t,i,e))},h.over=Xp,h.overArgs=Yd,h.overEvery=Ep,h.overSome=Sp,h.partial=Ms,h.partialRight=io,h.partition=md,h.pick=Bc,h.pickBy=fo,h.property=wo,h.propertyOf=function Up(t){return function(i){return null==t?l:Ti(t,i)}},h.pull=gf,h.pullAll=Nh,h.pullAllBy=function mf(t,i,e){return t&&t.length&&i&&i.length?os(t,i,E(e,2)):t},h.pullAllWith=function _f(t,i,e){return t&&t.length&&i&&i.length?os(t,i,l,e):t},h.pullAt=Wf,h.range=Bp,h.rangeRight=Lp,h.rearg=Xd,h.reject=function wd(t,i){return(O(t)?gi:$r)(t,fn(E(i,3)))},h.remove=function wf(t,i){var e=[];if(!t||!t.length)return e;var n=-1,r=[],u=t.length;for(i=E(i,3);++n<u;){var a=t[n];i(a,n,t)&&(e.push(a),r.push(n))}return nh(t,r),e},h.rest=function Ed(t,i){if("function"!=typeof t)throw new Lt(mt);return F(t,i=i===l?i:H(i))},h.reverse=ks,h.sampleSize=function vd(t,i,e){return i=(e?Wt(t,i,e):i===l)?1:H(i),(O(t)?Fa:dl)(t,i)},h.set=function Oc(t,i,e){return null==t?t:me(t,i,e)},h.setWith=function Hc(t,i,e,n){return n="function"==typeof n?n:l,null==t?t:me(t,i,e,n)},h.shuffle=function Id(t){return(O(t)?Ga:pl)(t)},h.slice=function bf(t,i,e){var n=null==t?0:t.length;return n?(e&&"number"!=typeof e&&Wt(t,i,e)?(i=0,e=n):(i=null==i?0:H(i),e=e===l?n:H(e)),Pt(t,i,e)):[]},h.sortBy=Ad,h.sortedUniq=function kf(t){return t&&t.length?rh(t):[]},h.sortedUniqBy=function Rf(t,i){return t&&t.length?rh(t,E(i,2)):[]},h.split=function up(t,i,e){return e&&"number"!=typeof e&&Wt(t,i,e)&&(i=e=l),(e=e===l?f:e>>>0)?(t=q(t))&&("string"==typeof i||null!=i&&!Xs(i))&&!(i=Rt(i))&&Pi(t)?Ii(zt(t),0,e):t.split(i,e):[]},h.spread=function Sd(t,i){if("function"!=typeof t)throw new Lt(mt);return i=null==i?0:ut(H(i),0),F(function(e){var n=e[i],r=Ii(e,0,i);return n&&mi(r,n),Ct(t,this,r)})},h.tail=function Tf(t){var i=null==t?0:t.length;return i?Pt(t,1,i):[]},h.take=function Mf(t,i,e){return t&&t.length?Pt(t,0,(i=e||i===l?1:H(i))<0?0:i):[]},h.takeRight=function Yf(t,i,e){var n=null==t?0:t.length;return n?Pt(t,(i=n-(i=e||i===l?1:H(i)))<0?0:i,n):[]},h.takeRightWhile=function Xf(t,i){return t&&t.length?Qe(t,E(i,3),!1,!0):[]},h.takeWhile=function Ef(t,i){return t&&t.length?Qe(t,E(i,3)):[]},h.tap=function qf(t,i){return i(t),t},h.throttle=function Ud(t,i,e){var n=!0,r=!0;if("function"!=typeof t)throw new Lt(mt);return et(e)&&(n="leading"in e?!!e.leading:n,r="trailing"in e?!!e.trailing:r),to(t,i,{leading:n,maxWait:i,trailing:r})},h.thru=on,h.toArray=ho,h.toPairs=co,h.toPairsIn=po,h.toPath=function Fp(t){return O(t)?it(t,jt):Tt(t)?[t]:It(Oh(q(t)))},h.toPlainObject=uo,h.transform=function Pc(t,i,e){var n=O(t),r=n||xi(t)||Zi(t);if(i=E(i,4),null==e){var u=t&&t.constructor;e=r?n?new u:[]:et(t)&&ai(u)?$i(Oe(t)):{}}return(r?Bt:Qt)(t,function(a,d,p){return i(e,a,d,p)}),e},h.unary=function Bd(t){return Zh(t,1)},h.union=Sf,h.unionBy=Uf,h.unionWith=Bf,h.uniq=function Lf(t){return t&&t.length?bi(t):[]},h.uniqBy=function Of(t,i){return t&&t.length?bi(t,E(i,2)):[]},h.uniqWith=function Hf(t,i){return i="function"==typeof i?i:l,t&&t.length?bi(t,l,i):[]},h.unset=function Dc(t,i){return null==t||fs(t,i)},h.unzip=Rs,h.unzipWith=$h,h.update=function Fc(t,i,e){return null==t?t:oh(t,i,ps(e))},h.updateWith=function Gc(t,i,e,n){return n="function"==typeof n?n:l,null==t?t:oh(t,i,ps(e),n)},h.values=Ji,h.valuesIn=function Nc(t){return null==t?[]:Kn(t,yt(t))},h.without=Pf,h.words=_o,h.wrap=function Ld(t,i){return Ms(ps(i),t)},h.xor=Df,h.xorBy=Ff,h.xorWith=Gf,h.zip=Nf,h.zipObject=function $f(t,i){return ah(t||[],i||[],de)},h.zipObjectDeep=function Kf(t,i){return ah(t||[],i||[],me)},h.zipWith=zf,h.entries=co,h.entriesIn=po,h.extend=ao,h.extendWith=pn,Os(h,h),h.add=Np,h.attempt=Wo,h.camelCase=qc,h.capitalize=go,h.ceil=$p,h.clamp=function $c(t,i,e){return e===l&&(e=i,i=l),e!==l&&(e=(e=Ft(e))==e?e:0),i!==l&&(i=(i=Ft(i))==i?i:0),Ri(Ft(t),i,e)},h.clone=function Hd(t){return Ht(t,4)},h.cloneDeep=function Dd(t){return Ht(t,5)},h.cloneDeepWith=function Fd(t,i){return Ht(t,5,i="function"==typeof i?i:l)},h.cloneWith=function Pd(t,i){return Ht(t,4,i="function"==typeof i?i:l)},h.conformsTo=function Gd(t,i){return null==i||Fr(t,i,at(i))},h.deburr=mo,h.defaultTo=function xp(t,i){return null==t||t!=t?i:t},h.divide=Kp,h.endsWith=function Zc(t,i,e){t=q(t),i=Rt(i);var n=t.length,r=e=e===l?n:Ri(H(e),0,n);return(e-=i.length)>=0&&t.slice(e,r)==i},h.eq=Zt,h.escape=function Jc(t){return(t=q(t))&&To.test(t)?t.replace($s,Ou):t},h.escapeRegExp=function Qc(t){return(t=q(t))&&Uo.test(t)?t.replace(Yn,"\\$&"):t},h.every=function sd(t,i,e){var n=O(t)?vr:za;return e&&Wt(t,i,e)&&(i=l),n(t,E(i,3))},h.find=hd,h.findIndex=Ph,h.findKey=function wc(t,i){return Ir(t,E(i,3),Qt)},h.findLast=od,h.findLastIndex=Dh,h.findLastKey=function bc(t,i){return Ir(t,E(i,3),is)},h.floor=zp,h.forEach=zh,h.forEachRight=qh,h.forIn=function vc(t,i){return null==t?t:ts(t,E(i,3),yt)},h.forInRight=function Ic(t,i){return null==t?t:Kr(t,E(i,3),yt)},h.forOwn=function xc(t,i){return t&&Qt(t,E(i,3))},h.forOwnRight=function yc(t,i){return t&&is(t,E(i,3))},h.get=Es,h.gt=Nd,h.gte=$d,h.has=function kc(t,i){return null!=t&&Th(t,i,Za)},h.hasIn=Ss,h.head=Gh,h.identity=At,h.includes=function dd(t,i,e,n){t=xt(t)?t:Ji(t),e=e&&!n?H(e):0;var r=t.length;return e<0&&(e=ut(r+e,0)),cn(t)?e<=r&&t.indexOf(i,e)>-1:!!r&&Hi(t,i,e)>-1},h.indexOf=function of(t,i,e){var n=null==t?0:t.length;if(!n)return-1;var r=null==e?0:H(e);return r<0&&(r=ut(n+r,0)),Hi(t,i,r)},h.inRange=function Kc(t,i,e){return i=li(i),e===l?(e=i,i=0):e=li(e),function Qa(t,i,e){return t>=pt(i,e)&&t<ut(i,e)}(t=Ft(t),i,e)},h.invoke=Mc,h.isArguments=Xi,h.isArray=O,h.isArrayBuffer=Kd,h.isArrayLike=xt,h.isArrayLikeObject=st,h.isBoolean=function zd(t){return!0===t||!1===t||nt(t)&&_t(t)==M},h.isBuffer=xi,h.isDate=qd,h.isElement=function Zd(t){return nt(t)&&1===t.nodeType&&!be(t)},h.isEmpty=function Jd(t){if(null==t)return!0;if(xt(t)&&(O(t)||"string"==typeof t||"function"==typeof t.splice||xi(t)||Zi(t)||Xi(t)))return!t.length;var i=gt(t);if(i==$t||i==Kt)return!t.size;if(We(t))return!rs(t).length;for(var e in t)if(Z.call(t,e))return!1;return!0},h.isEqual=function Qd(t,i){return ge(t,i)},h.isEqualWith=function Vd(t,i,e){var n=(e="function"==typeof e?e:l)?e(t,i):l;return n===l?ge(t,i,l,e):!!n},h.isError=Ys,h.isFinite=function jd(t){return"number"==typeof t&&Br(t)},h.isFunction=ai,h.isInteger=eo,h.isLength=dn,h.isMap=no,h.isMatch=function tc(t,i){return t===i||ss(t,i,vs(i))},h.isMatchWith=function ic(t,i,e){return e="function"==typeof e?e:l,ss(t,i,vs(i),e)},h.isNaN=function ec(t){return so(t)&&t!=+t},h.isNative=function nc(t){if(Hl(t))throw new L("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Zr(t)},h.isNil=function rc(t){return null==t},h.isNull=function sc(t){return null===t},h.isNumber=so,h.isObject=et,h.isObjectLike=nt,h.isPlainObject=be,h.isRegExp=Xs,h.isSafeInteger=function hc(t){return eo(t)&&t>=-S&&t<=S},h.isSet=ro,h.isString=cn,h.isSymbol=Tt,h.isTypedArray=Zi,h.isUndefined=function oc(t){return t===l},h.isWeakMap=function uc(t){return nt(t)&&gt(t)==ne},h.isWeakSet=function ac(t){return nt(t)&&"[object WeakSet]"==_t(t)},h.join=function df(t,i){return null==t?"":oa.call(t,i)},h.kebabCase=Vc,h.last=Dt,h.lastIndexOf=function cf(t,i,e){var n=null==t?0:t.length;if(!n)return-1;var r=n;return e!==l&&(r=(r=H(e))<0?ut(n+r,0):pt(r,n-1)),i==i?function $u(c,w,m){for(var T=m+1;T--;)if(c[T]===w)return T;return T}(t,i,r):Te(t,xr,r,!0)},h.lowerCase=jc,h.lowerFirst=tp,h.lt=lc,h.lte=fc,h.max=function qp(t){return t&&t.length?ze(t,At,es):l},h.maxBy=function Zp(t,i){return t&&t.length?ze(t,E(i,2),es):l},h.mean=function Jp(t){return yr(t,At)},h.meanBy=function Qp(t,i){return yr(t,E(i,2))},h.min=function Vp(t){return t&&t.length?ze(t,At,hs):l},h.minBy=function jp(t,i){return t&&t.length?ze(t,E(i,2),hs):l},h.stubArray=Ps,h.stubFalse=Ds,h.stubObject=function Op(){return{}},h.stubString=function Hp(){return""},h.stubTrue=function Pp(){return!0},h.multiply=tg,h.nth=function pf(t,i){return t&&t.length?th(t,H(i)):l},h.noConflict=function Mp(){return lt._===this&&(lt._=ia),this},h.noop=Hs,h.now=an,h.pad=function ip(t,i,e){t=q(t);var n=(i=H(i))?Di(t):0;if(!i||n>=i)return t;var r=(i-n)/2;return en(Fe(r),e)+t+en(De(r),e)},h.padEnd=function ep(t,i,e){t=q(t);var n=(i=H(i))?Di(t):0;return i&&n<i?t+en(i-n,e):t},h.padStart=function np(t,i,e){t=q(t);var n=(i=H(i))?Di(t):0;return i&&n<i?en(i-n,e)+t:t},h.parseInt=function sp(t,i,e){return e||null==i?i=0:i&&(i=+i),la(q(t).replace(Xn,""),i||0)},h.random=function zc(t,i,e){if(e&&"boolean"!=typeof e&&Wt(t,i,e)&&(i=e=l),e===l&&("boolean"==typeof i?(e=i,i=l):"boolean"==typeof t&&(e=t,t=l)),t===l&&i===l?(t=0,i=1):(t=li(t),i===l?(i=t,t=0):i=li(i)),t>i){var n=t;t=i,i=n}if(e||t%1||i%1){var r=Lr();return pt(t+r*(i-t+yu("1e-"+((r+"").length-1))),i)}return us(t,i)},h.reduce=function _d(t,i,e){var n=O(t)?Pn:Ar,r=arguments.length<3;return n(t,E(i,4),e,r,wi)},h.reduceRight=function Wd(t,i,e){var n=O(t)?Tu:Ar,r=arguments.length<3;return n(t,E(i,4),e,r,Nr)},h.repeat=function rp(t,i,e){return i=(e?Wt(t,i,e):i===l)?1:H(i),as(q(t),i)},h.replace=function hp(){var t=arguments,i=q(t[0]);return t.length<3?i:i.replace(t[1],t[2])},h.result=function Lc(t,i,e){var n=-1,r=(i=vi(i,t)).length;for(r||(r=1,t=l);++n<r;){var u=null==t?l:t[jt(i[n])];u===l&&(n=r,u=e),t=ai(u)?u.call(t):u}return t},h.round=ig,h.runInContext=c,h.sample=function bd(t){return(O(t)?Pr:fl)(t)},h.size=function xd(t){if(null==t)return 0;if(xt(t))return cn(t)?Di(t):t.length;var i=gt(t);return i==$t||i==Kt?t.size:rs(t).length},h.snakeCase=op,h.some=function yd(t,i,e){var n=O(t)?Dn:gl;return e&&Wt(t,i,e)&&(i=l),n(t,E(i,3))},h.sortedIndex=function vf(t,i){return Je(t,i)},h.sortedIndexBy=function If(t,i,e){return ls(t,i,E(e,2))},h.sortedIndexOf=function xf(t,i){var e=null==t?0:t.length;if(e){var n=Je(t,i);if(n<e&&Zt(t[n],i))return n}return-1},h.sortedLastIndex=function yf(t,i){return Je(t,i,!0)},h.sortedLastIndexBy=function Af(t,i,e){return ls(t,i,E(e,2),!0)},h.sortedLastIndexOf=function Cf(t,i){if(null!=t&&t.length){var n=Je(t,i,!0)-1;if(Zt(t[n],i))return n}return-1},h.startCase=ap,h.startsWith=function lp(t,i,e){return t=q(t),e=null==e?0:Ri(H(e),0,t.length),i=Rt(i),t.slice(e,e+i.length)==i},h.subtract=eg,h.sum=function ng(t){return t&&t.length?Nn(t,At):0},h.sumBy=function sg(t,i){return t&&t.length?Nn(t,E(i,2)):0},h.template=function fp(t,i,e){var n=h.templateSettings;e&&Wt(t,i,e)&&(i=l),t=q(t),i=pn({},i,n,Ah);var d,p,r=pn({},i.imports,n.imports,Ah),u=at(r),a=Kn(r,u),b=0,v=i.interpolate||Ae,I="__p += '",k=qn((i.escape||Ae).source+"|"+v.source+"|"+(v===Ks?Go:Ae).source+"|"+(i.evaluate||Ae).source+"|$","g"),Y="//# sourceURL="+(Z.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wu+"]")+"\n";t.replace(k,function(B,G,$,Mt,wt,Yt){return $||($=Mt),I+=t.slice(b,Yt).replace(Jo,Hu),G&&(d=!0,I+="' +\n__e("+G+") +\n'"),wt&&(p=!0,I+="';\n"+wt+";\n__p += '"),$&&(I+="' +\n((__t = ("+$+")) == null ? '' : __t) +\n'"),b=Yt+B.length,B}),I+="';\n";var U=Z.call(i,"variable")&&i.variable;if(U){if(Do.test(U))throw new L("Invalid `variable` option passed into `_.template`")}else I="with (obj) {\n"+I+"\n}\n";I=(p?I.replace(Ao,""):I).replace(Co,"$1").replace(ko,"$1;"),I="function("+(U||"obj")+") {\n"+(U?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(d?", __e = _.escape":"")+(p?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+I+"return __p\n}";var D=Wo(function(){return z(u,Y+"return "+I).apply(l,a)});if(D.source=I,Ys(D))throw D;return D},h.times=function Dp(t,i){if((t=H(t))<1||t>S)return[];var e=f,n=pt(t,f);i=E(i),t-=f;for(var r=$n(n,i);++e<t;)i(e);return r},h.toFinite=li,h.toInteger=H,h.toLength=oo,h.toLower=function dp(t){return q(t).toLowerCase()},h.toNumber=Ft,h.toSafeInteger=function dc(t){return t?Ri(H(t),-S,S):0===t?t:0},h.toString=q,h.toUpper=function cp(t){return q(t).toUpperCase()},h.trim=function pp(t,i,e){if((t=q(t))&&(e||i===l))return Cr(t);if(!t||!(i=Rt(i)))return t;var n=zt(t),r=zt(i);return Ii(n,kr(n,r),Rr(n,r)+1).join("")},h.trimEnd=function gp(t,i,e){if((t=q(t))&&(e||i===l))return t.slice(0,Mr(t)+1);if(!t||!(i=Rt(i)))return t;var n=zt(t);return Ii(n,0,Rr(n,zt(i))+1).join("")},h.trimStart=function mp(t,i,e){if((t=q(t))&&(e||i===l))return t.replace(Xn,"");if(!t||!(i=Rt(i)))return t;var n=zt(t);return Ii(n,kr(n,zt(i))).join("")},h.truncate=function _p(t,i){var e=30,n="...";if(et(i)){var r="separator"in i?i.separator:r;e="length"in i?H(i.length):e,n="omission"in i?Rt(i.omission):n}var u=(t=q(t)).length;if(Pi(t)){var a=zt(t);u=a.length}if(e>=u)return t;var d=e-Di(n);if(d<1)return n;var p=a?Ii(a,0,d).join(""):t.slice(0,d);if(r===l)return p+n;if(a&&(d+=p.length-d),Xs(r)){if(t.slice(d).search(r)){var b,v=p;for(r.global||(r=qn(r.source,q(zs.exec(r))+"g")),r.lastIndex=0;b=r.exec(v);)var I=b.index;p=p.slice(0,I===l?d:I)}}else if(t.indexOf(Rt(r),d)!=d){var k=p.lastIndexOf(r);k>-1&&(p=p.slice(0,k))}return p+n},h.unescape=function Wp(t){return(t=q(t))&&Ro.test(t)?t.replace(Ns,Ku):t},h.uniqueId=function Gp(t){var i=++ju;return q(t)+i},h.upperCase=wp,h.upperFirst=Us,h.each=zh,h.eachRight=qh,h.first=Gh,Os(h,function(){var t={};return Qt(h,function(i,e){Z.call(h.prototype,e)||(t[e]=i)}),t}(),{chain:!1}),h.VERSION="4.17.21",Bt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){h[t].placeholder=h}),Bt(["drop","take"],function(t,i){N.prototype[t]=function(e){e=e===l?1:ut(H(e),0);var n=this.__filtered__&&!i?new N(this):this.clone();return n.__filtered__?n.__takeCount__=pt(e,n.__takeCount__):n.__views__.push({size:pt(e,f),type:t+(n.__dir__<0?"Right":"")}),n},N.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Bt(["filter","map","takeWhile"],function(t,i){var e=i+1,n=1==e||3==e;N.prototype[t]=function(r){var u=this.clone();return u.__iteratees__.push({iteratee:E(r,3),type:e}),u.__filtered__=u.__filtered__||n,u}}),Bt(["head","last"],function(t,i){var e="take"+(i?"Right":"");N.prototype[t]=function(){return this[e](1).value()[0]}}),Bt(["initial","tail"],function(t,i){var e="drop"+(i?"":"Right");N.prototype[t]=function(){return this.__filtered__?new N(this):this[e](1)}}),N.prototype.compact=function(){return this.filter(At)},N.prototype.find=function(t){return this.filter(t).head()},N.prototype.findLast=function(t){return this.reverse().find(t)},N.prototype.invokeMap=F(function(t,i){return"function"==typeof t?new N(this):this.map(function(e){return pe(e,t,i)})}),N.prototype.reject=function(t){return this.filter(fn(E(t)))},N.prototype.slice=function(t,i){t=H(t);var e=this;return e.__filtered__&&(t>0||i<0)?new N(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),i!==l&&(e=(i=H(i))<0?e.dropRight(-i):e.take(i-t)),e)},N.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},N.prototype.toArray=function(){return this.take(f)},Qt(N.prototype,function(t,i){var e=/^(?:filter|find|map|reject)|While$/.test(i),n=/^(?:head|last)$/.test(i),r=h[n?"take"+("last"==i?"Right":""):i],u=n||/^find/.test(i);!r||(h.prototype[i]=function(){var a=this.__wrapped__,d=n?[1]:arguments,p=a instanceof N,b=d[0],v=p||O(a),I=function(G){var $=r.apply(h,mi([G],d));return n&&k?$[0]:$};v&&e&&"function"==typeof b&&1!=b.length&&(p=v=!1);var k=this.__chain__,Y=!!this.__actions__.length,U=u&&!k,D=p&&!Y;if(!u&&v){a=D?a:new N(this);var B=t.apply(a,d);return B.__actions__.push({func:on,args:[I],thisArg:l}),new Ot(B,k)}return U&&D?t.apply(this,d):(B=this.thru(I),U?n?B.value()[0]:B.value():B)})}),Bt(["pop","push","shift","sort","splice","unshift"],function(t){var i=Xe[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);h.prototype[t]=function(){var r=arguments;if(n&&!this.__chain__){var u=this.value();return i.apply(O(u)?u:[],r)}return this[e](function(a){return i.apply(O(a)?a:[],r)})}}),Qt(N.prototype,function(t,i){var e=h[i];if(e){var n=e.name+"";Z.call(Ni,n)||(Ni[n]=[]),Ni[n].push({name:i,func:e})}}),Ni[je(l,2).name]=[{name:"wrapper",func:l}],N.prototype.clone=function _a(){var t=new N(this.__wrapped__);return t.__actions__=It(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=It(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=It(this.__views__),t},N.prototype.reverse=function Wa(){if(this.__filtered__){var t=new N(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},N.prototype.value=function wa(){var t=this.__wrapped__.value(),i=this.__dir__,e=O(t),n=i<0,r=e?t.length:0,u=function Yl(t,i,e){for(var n=-1,r=e.length;++n<r;){var u=e[n],a=u.size;switch(u.type){case"drop":t+=a;break;case"dropRight":i-=a;break;case"take":i=pt(i,t+a);break;case"takeRight":t=ut(t,i-a)}}return{start:t,end:i}}(0,r,this.__views__),a=u.start,d=u.end,p=d-a,b=n?d:a-1,v=this.__iteratees__,I=v.length,k=0,Y=pt(p,this.__takeCount__);if(!e||!n&&r==p&&Y==p)return uh(t,this.__actions__);var U=[];t:for(;p--&&k<Y;){for(var D=-1,B=t[b+=i];++D<I;){var G=v[D],Mt=G.type,wt=(0,G.iteratee)(B);if(2==Mt)B=wt;else if(!wt){if(1==Mt)continue t;break t}}U[k++]=B}return U},h.prototype.at=Zf,h.prototype.chain=function Jf(){return Kh(this)},h.prototype.commit=function Qf(){return new Ot(this.value(),this.__chain__)},h.prototype.next=function Vf(){this.__values__===l&&(this.__values__=ho(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?l:this.__values__[this.__index__++]}},h.prototype.plant=function td(t){for(var i,e=this;e instanceof $e;){var n=Hh(e);n.__index__=0,n.__values__=l,i?r.__wrapped__=n:i=n;var r=n;e=e.__wrapped__}return r.__wrapped__=t,i},h.prototype.reverse=function id(){var t=this.__wrapped__;if(t instanceof N){var i=t;return this.__actions__.length&&(i=new N(this)),(i=i.reverse()).__actions__.push({func:on,args:[ks],thisArg:l}),new Ot(i,this.__chain__)}return this.thru(ks)},h.prototype.toJSON=h.prototype.valueOf=h.prototype.value=function ed(){return uh(this.__wrapped__,this.__actions__)},h.prototype.first=h.prototype.head,oe&&(h.prototype[oe]=function jf(){return this}),h}();lt._=Ye,(Ei=function(){return Ye}.call(dt,ht,dt,bt))!==l&&(bt.exports=Ei)}.call(this)},5030:(bt,dt,ht)=>{"use strict";ht.r(dt),ht.d(dt,{DemoModule:()=>ii});var Ei=ht(8692);class X{constructor(s,o){W(this,"X",0),W(this,"Y",0),this.X=s,this.Y=o}}class y{}W(y,"right",0),W(y,"bottom",1),W(y,"left",2),W(y,"top",3);class gn{constructor(s,o,f){W(this,"road",0),W(this,"wall",1),W(this,"closeRoad",2),W(this,"redBase",3),W(this,"blueBase",4),W(this,"bullet",5),W(this,"water",6),W(this,"sand",7),W(this,"hpRegenRed",8),W(this,"hpRegenBlue",9),W(this,"cpRegen",10),W(this,"next",11),W(this,"units",[]),W(this,"towers",[]),W(this,"mobs",[]),W(this,"homes",[]);for(let g=0;g<s;++g)this.units.push(this.next+g);for(let g=0;g<s;++g)this.homes.push(this.next+s+g);for(let g=0;g<o;++g)this.towers.push(this.next+2*s+g);for(let g=0;g<f;++g)this.mobs.push(this.next+2*s+o+g)}}class mt{constructor(){W(this,"coords",new X(0,0)),W(this,"pastCoords",new X(0,0)),W(this,"renderCoords",new X(0,0)),W(this,"crashCoords",new X(0,0)),W(this,"renderCrashCoords",new X(0,0)),W(this,"deltaCoords",new X(0,0)),W(this,"perimCoords",[])}}class x{constructor(s=0,o=0,f=0,g=0,A=0){this.id=A,this.width=f,this.height=g,this.TLX=s,this.TLY=o,this.BRX=this.TLX+this.width,this.BRY=this.TLY+this.height}update(s){this.TLX=s.X,this.TLY=s.Y,this.BRX=this.TLX+this.width,this.BRY=this.TLY+this.height}}class Si{constructor(s="T_2",o=20,f=20,g=6,A=2,R=200,C=600,P=1,K=0,M=0){this.model=s,this.health=o,this.armor=f,this.speed=g,this.shotPower=A,this.shotDistance=R,this.respawnTime=C,this.level=P,this.experience=K,this.commandPoints=M}}function Qi(S,s){return Math.floor(Math.random()*(s-S)+S)}class Ui extends x{constructor(o){super(),W(this,"map",null),W(this,"pos",null),W(this,"owner",null),W(this,"target",null),W(this,"turn",0),W(this,"speed",0),W(this,"bulletType",{model:"bullet_1",damage:1,quantity:1e4,shot_model:"bullet_1_shot",boom_model:"bullet_1_boom",shot_coords:new X(0,0),boom_coords:new X(0,0)}),W(this,"hit",!1),W(this,"hitMiss",!1),W(this,"degree",0),this.map=o.map,this.pos=new mt,this.owner=o,this.id=o.id,this.bulletType=o.ammunition[o.bulletType]}look(){let o=this.pos.coords.X+Math.round(this.map.unitWidth/3),f=this.pos.coords.Y+Math.round(this.map.unitWidth/3),g=[];this.update(new X(o,f));for(let A=0;A<this.map.backArray.length;++A)this.BRX<this.map.backArray[A].TLX||this.TLX>this.map.backArray[A].BRX||this.BRY<this.map.backArray[A].TLY||this.TLY>this.map.backArray[A].BRY||g.push(this.map.backArray[A].id);return 0===g.length&&g.push(this.map.backId.road),g}fatalHit(){return null!==this.target&&this.target.uc.health<=0?(this.target.uc.health=0,this.target):(this.target=null,null)}hitResult(){return Qi(this.bulletType.damage,this.owner.uc.shotPower+this.bulletType.damage)}checkHitMiss(o){return o.forEach(f=>{this.hitMiss=f===this.map.backId.wall}),this.hitMiss}checkHit(o){this.hit=!1;for(let f of this.owner.targets)o.forEach(g=>{if(g===f.id&&f.uc.health>0){this.target=f;let A=this.hitResult();f.uc.armor=f.uc.armor-2*A/3,f.uc.armor<=0?(f.uc.armor=0,f.uc.health=f.uc.health-A):f.uc.health=f.uc.health-A/3,this.hit=!0}});return this.hit}moveHelper(o,f){let g=Math.cos(this.degree*Math.PI/180)*f,A=Math.sin(this.degree*Math.PI/180)*f;o.X+=Math.round(g),o.Y+=Math.round(A)}move(){0===this.speed&&(this.pos.coords=Object.assign({},this.owner.pos.coords),this.pos.renderCoords=Object.assign({},this.owner.pos.renderCoords),this.degree=this.owner.gun.degree,this.turn=this.owner.turn,this.bulletType=this.owner.ammunition[this.owner.bulletType],--this.owner.ammunition[this.owner.bulletType].quantity);let o=Math.floor(this.owner.uc.shotDistance/10);this.moveHelper(this.pos.coords,o),this.moveHelper(this.pos.renderCoords,o);let f=this.look();++this.speed,(this.checkHitMiss(f)||this.checkHit(f))&&(this.speed=0),this.speed>10&&(this.speed=0)}}class Gt extends x{constructor(o=new Si,f={model:"gun_2",degree:0},g=[{model:"bullet_1",damage:1,quantity:1e4,shot_model:"bullet_1_shot",boom_model:"bullet_1_boom",shot_coords:new X(0,0),boom_coords:new X(0,0)}],A=0){super(),W(this,"userId","None"),W(this,"name","NoName"),W(this,"side","red"),W(this,"homeId",1111),W(this,"ability",0),W(this,"turn",0),W(this,"bulletType",0),W(this,"reload",0),W(this,"speedController",1),W(this,"trigger",!1),W(this,"uc",null),W(this,"etalonUc",null),W(this,"kill",null),W(this,"map",null),W(this,"bullet",null),W(this,"pos",null),W(this,"targets",null),W(this,"allies",null),W(this,"ammunition",null),W(this,"gun",null),this.uc=o,this.etalonUc=Object.assign({},this.uc),this.ammunition=g,this.bullet=new Ui(this),this.pos=new mt,this.gun=f,this.ability=A}levelUp(){null!==this.kill&&(this.uc.experience+=this.kill.etalonUc.health,this.uc.experience>20*this.uc.level&&(this.uc.experience-=20*this.uc.level,++this.uc.level,++this.etalonUc.level,++this.uc.commandPoints,++this.etalonUc.commandPoints,this.uc.level%2==0&&(this.etalonUc.health+=5),this.uc.level%2!=0&&(this.etalonUc.armor+=5),this.etalonUc.speed<12&&this.uc.level%3==0&&(this.uc.speed+=1,this.etalonUc.speed+=1),this.etalonUc.shotPower<=10&&this.uc.level%2!=0&&(this.uc.shotPower+=1,this.etalonUc.shotPower+=1))),this.experienceToLevel=20*this.uc.level}roadEffect(o){"red"===this.side?(o===this.map.backId.hpRegenRed&&this.uc.health<this.etalonUc.health&&(this.uc.health+=.1),o===this.map.backId.hpRegenBlue&&this.uc.health>=0&&(this.uc.health-=.1)):(o===this.map.backId.hpRegenBlue&&this.uc.health<this.etalonUc.health&&(this.uc.health+=.1),o===this.map.backId.hpRegenRed&&this.uc.health>=0&&(this.uc.health-=.1)),o===this.map.backId.cpRegen&&this.uc.armor<this.etalonUc.armor&&(this.uc.armor+=.1),o===this.map.backId.sand&&(this.uc.speed=2,this.speedController=2)}checkFrontWay(o){let f=!1,g=this.look(o),A=!0;return g.forEach(R=>{R===this.map.backId.hpRegenRed||R===this.map.backId.cpRegen||R===this.map.backId.hpRegenBlue||R===this.map.backId.sand?f=!0:A=R===this.map.backId.road,f?this.roadEffect(R):this.uc.speed=this.etalonUc.speed}),A}look(o){this.update(this.pos.coords);let f=[];switch(this.turn){case y.right:for(let g=0;g<this.map.backArray.length;++g)this.BRX+o+1<this.map.backArray[g].TLX||this.TLX+o+1>this.map.backArray[g].BRX||this.BRY<this.map.backArray[g].TLY||this.TLY>this.map.backArray[g].BRY||this.id===this.map.backArray[g].id||this.homeId===this.map.backArray[g].id||f.push(this.map.backArray[g].id);break;case y.bottom:for(let g=0;g<this.map.backArray.length;++g)this.BRX<this.map.backArray[g].TLX||this.TLX>this.map.backArray[g].BRX||this.BRY+o+1<this.map.backArray[g].TLY||this.TLY+o+1>this.map.backArray[g].BRY||this.id===this.map.backArray[g].id||this.homeId===this.map.backArray[g].id||f.push(this.map.backArray[g].id);break;case y.left:for(let g=0;g<this.map.backArray.length;++g)this.BRX-o-1<this.map.backArray[g].TLX||this.TLX-o-1>this.map.backArray[g].BRX||this.BRY<this.map.backArray[g].TLY||this.TLY>this.map.backArray[g].BRY||this.id===this.map.backArray[g].id||this.homeId===this.map.backArray[g].id||f.push(this.map.backArray[g].id);break;case y.top:for(let g=0;g<this.map.backArray.length;++g)this.BRX<this.map.backArray[g].TLX||this.TLX>this.map.backArray[g].BRX||this.BRY-o-1<this.map.backArray[g].TLY||this.TLY-o-1>this.map.backArray[g].BRY||this.id===this.map.backArray[g].id||this.homeId===this.map.backArray[g].id||f.push(this.map.backArray[g].id)}return 0===f.length&&f.push(this.map.backId.road),f}setPosition(o,f){switch(this.turn){case y.right:this.pos.coords.X=f?this.pos.coords.X+o:this.pos.coords.X-o;break;case y.bottom:this.pos.coords.Y=f?this.pos.coords.Y+o:this.pos.coords.Y-o;break;case y.left:this.pos.coords.X=f?this.pos.coords.X-o:this.pos.coords.X+o;break;case y.top:this.pos.coords.Y=f?this.pos.coords.Y-o:this.pos.coords.Y+o}this.update(this.pos.coords)}searchTarget(o){return o.pos.coords.X<this.pos.coords.X+this.uc.shotDistance&&o.pos.coords.X>this.pos.coords.X-this.uc.shotDistance&&o.pos.coords.Y<this.pos.coords.Y+this.uc.shotDistance&&o.pos.coords.Y>this.pos.coords.Y-this.uc.shotDistance&&o.uc.health>0}}class ct extends Gt{constructor(o="Blue",f="T_2",g=100,A=20,R=5,C=1,P=200,K=100,M={model:"gun_2",degree:0,coords:new X(0,0)},j=[{model:"bullet_1",damage:1,quantity:1e4,shot_model:"bullet_1_shot",boom_model:"bullet_1_boom",shot_coords:new X(0,0),boom_coords:new X(0,0)}],yi=0){super(new Si(f,g,A,R,C,P,K),M,j,yi),W(this,"directionPriority",!0),W(this,"turnFlag",!0),W(this,"counter",0),W(this,"target",null),W(this,"name","Bot"),this.side=o.toLowerCase()}checkTarget1(o){switch(this.turn){case y.right:{this.turn=this.directionPriority?y.top:y.bottom;let f=this.checkCollision(!1);return this.turn=y.right,this.pos.coords.X<o.pos.coords.X||f}case y.bottom:{this.turn=this.directionPriority?y.right:y.left;let f=this.checkCollision(!1);return this.turn=y.bottom,this.pos.coords.Y<o.pos.coords.Y||f}case y.left:{this.turn=this.directionPriority?y.bottom:y.top;let f=this.checkCollision(!1);return this.turn=y.left,this.pos.coords.X>o.pos.coords.X||f}case y.top:{this.turn=this.directionPriority?y.left:y.right;let f=this.checkCollision(!1);return this.turn=y.top,this.pos.coords.Y>o.pos.coords.Y||f}}return!0}checkTarget2(o){let f=this.uc.shotDistance-Math.round(this.uc.shotDistance/4),g=o.id!==this.map.backId.redBase&&o.id!==this.map.backId.blueBase?this.map.unitWidth+2:Math.round(this.map.unitWidth/2);switch(this.turn){case y.right:return this.pos.coords.X<o.pos.coords.X-f||this.pos.coords.Y>o.pos.coords.Y+g||this.pos.coords.Y<o.pos.coords.Y-g;case y.bottom:return this.pos.coords.Y<o.pos.coords.Y-f||this.pos.coords.X>o.pos.coords.X+g||this.pos.coords.X<o.pos.coords.X-g;case y.left:return this.pos.coords.X>o.pos.coords.X+f||this.pos.coords.Y>o.pos.coords.Y+g||this.pos.coords.Y<o.pos.coords.Y-g;case y.top:return this.pos.coords.Y>o.pos.coords.Y+f||this.pos.coords.X>o.pos.coords.X+g||this.pos.coords.X<o.pos.coords.X-g}return!0}checkCollision(o){let f=!1;if(o)for(let g=this.uc.speed;g>0&&(f=!1,this.setPosition(g,!0),this.checkFrontWay(g)||(this.setPosition(g,!1),f=!0),!1!==f);--g);else this.checkFrontWay(this.uc.speed)||(f=!0);return f}hunt(o){this.turnGun(o),null!==o&&this.uc.health>0&&(this.directionPriority?!1===this.turnFlag&&this.turn===y.top?this.turn=y.right:!1===this.turnFlag&&(this.turn+=1):!1===this.turnFlag&&this.turn===y.right?this.turn=y.top:!1===this.turnFlag&&(this.turn-=1),"red"===this.side&&this.turnFlag?this.directionPriority=this.pos.coords.Y<Math.round(this.map.frontHeight/2):this.turnFlag&&(this.directionPriority=this.pos.coords.Y>Math.round(this.map.frontHeight/2)),this.turnFlag=!0,this.checkTarget1(o)?this.checkTarget2(o)&&this.checkCollision(!0)&&this.checkCollision(!1)&&(this.turn=this.directionPriority?this.turn-1:this.turn+1,this.turnClosure(),this.turnFlag=this.checkCollision(!0)):this.turn=this.directionPriority?this.turn-1:this.turn+1,this.turnClosure())}turnClosure(){this.turn<y.right&&(this.turn=y.top),this.turn>y.top&&(this.turn=y.right)}turnGun(o){let f=Math.round(this.map.unitWidth/2),g=Math.round(this.map.unitWidth/2),A=o.pos.coords.X+Math.round(this.map.unitWidth/2),R=o.pos.coords.Y+Math.round(this.map.unitWidth/2),C=this.pos.coords.X+f,K=(R-(this.pos.coords.Y+g))/(A-C);this.gun.degree=C<=A?180*Math.atan(K)/Math.PI:180*Math.atan(K)/Math.PI+180}shot(){this.counter++;let o=null;for(let f of this.targets)if(this.uc.health>0&&f.uc.health>0&&this.searchTarget(f)){o=f;break}null!==o&&(this.turnGun(o),this.trigger=!0),this.trigger&&(this.counter%2==0&&this.reload===this.bullet.speed&&this.bullet.move(),this.counter%2==0&&this.reload++,this.kill=this.bullet.fatalHit(),null!==this.kill&&(++this.kills,++this.killsInGame,this.bullet.target=null,this.levelUp(),this.kill=null),this.reload>10&&(this.trigger=!1,this.bullet.hit=!1,this.bullet.hitMiss=!1,this.reload=0))}}class di extends class l{constructor(s,o,f){W(this,"renderX",0),W(this,"renderY",0),W(this,"deltaWidth",0),W(this,"deltaHeight",0),W(this,"unitWidth",0),W(this,"unitPerim",0),W(this,"baseWidth",280),W(this,"frontWidth",0),W(this,"frontHeight",0),W(this,"backWidth",0),W(this,"backHeight",0),W(this,"barrier",1e3),this.canvas=s,this.mapImg=o,this.unitWidth=f.width,this.unitPerim=4*f.width,this.frontWidth=o.width,this.frontHeight=o.height,this.backWidth=this.frontWidth+2*this.barrier,this.backHeight=this.frontHeight+2*this.barrier}calculateDelta(){this.deltaWidth=this.frontWidth-this.canvas.width,this.deltaHeight=this.frontHeight-this.canvas.height}moveMap(s,o){this.calculateDelta(),s<=10&&this.renderX>0?this.renderX-=10:this.renderX<0&&(this.renderX=0),o<=10&&this.renderY>0?this.renderY-=10:this.renderY<0&&(this.renderY=0),s>=this.canvas.width-10&&this.renderX<this.deltaWidth?this.renderX+=10:this.renderX>this.deltaWidth&&(this.renderX=this.deltaWidth),o>=this.canvas.height-10&&this.renderY<this.deltaHeight?this.renderY+=10:this.renderY>this.deltaHeight&&(this.renderY=this.deltaHeight)}}{constructor(o,f,g){super(o,f,g),W(this,"unitsCount",8),W(this,"towersCount",18),W(this,"mobsCount",6),W(this,"backArray",[]),W(this,"unitsCoords",[]),W(this,"startUnitsTurn",[]),W(this,"baseTowers",[]),W(this,"towers",[]),W(this,"mobs",[]),W(this,"etalonMobs",[]),W(this,"redBase",null),W(this,"blueBase",null),W(this,"etalonTower",null),W(this,"backId",null),this.backId=new gn(this.unitsCount,this.towersCount,this.mobsCount);const A={model:"gun_1",degree:0},R={model:"gun_3",degree:0},C={model:"gun_5",degree:0};this.redBase=new ct("Red","",200,0),this.redBase.tower1=new ct("Red","tower_1",100,0,0,3,350,0,_.cloneDeep(A)),this.redBase.tower2=new ct("Red","tower_1",100,0,0,3,350,0,_.cloneDeep(A)),this.blueBase=new ct("Blue","",200,0),this.blueBase.tower1=new ct("Blue","tower_2",100,0,0,3,350,0,_.cloneDeep(R)),this.blueBase.tower2=new ct("Blue","tower_2",100,0,0,3,350,0,_.cloneDeep(R)),this.etalonTower=new ct("","",100,0,0,3,350),Math.round(2*this.unitWidth/3);const K=Math.round(this.unitWidth/3),M=Math.round(this.unitWidth/2);this.unitsCoords=[new X(3*this.unitWidth-M,this.frontHeight-12*this.unitWidth-M),new X(3*this.unitWidth-M,this.frontHeight-9*this.unitWidth-M),new X(9*this.unitWidth-M,this.frontHeight-3*this.unitWidth-M),new X(12*this.unitWidth-M,this.frontHeight-3*this.unitWidth-M),new X(this.frontWidth-3*this.unitWidth-M,this.frontHeight-13*this.unitWidth+M),new X(this.frontWidth-3*this.unitWidth-M,this.frontHeight-10*this.unitWidth+M),new X(this.frontWidth-9*this.unitWidth-M,this.frontHeight-3*this.unitWidth-M),new X(this.frontWidth-12*this.unitWidth-M,this.frontHeight-3*this.unitWidth-M)],this.startUnitsTurn=[y.right,y.right,y.top,y.top,y.left,y.left,y.top,y.top],this.baseTowers=[this.redBase.tower1,this.redBase.tower2,this.blueBase.tower1,this.blueBase.tower2],this.redBase.tower1.pos.coords=new X(9*this.unitWidth+M,10*this.unitWidth+M),this.redBase.tower2.pos.coords=new X(9*this.unitWidth+M,15*this.unitWidth+M),this.blueBase.tower1.pos.coords=new X(this.frontWidth-11*this.unitWidth+M,9*this.unitWidth+M),this.blueBase.tower2.pos.coords=new X(this.frontWidth-11*this.unitWidth+M,14*this.unitWidth+M);for(let j=0;j<9;++j)this.towers.push(new ct("Red","tower_1",100,0,0,3,350,0,_.cloneDeep(A)));for(let j=0;j<9;++j)this.towers.push(new ct("Blue","tower_2",100,0,0,3,350,0,_.cloneDeep(R)));this.towersCoords=[new X(16*this.unitWidth,8*this.unitWidth),new X(15*this.unitWidth,4*this.unitWidth),new X(17*this.unitWidth,14*this.unitWidth),new X(17*this.unitWidth,18*this.unitWidth),new X(16*this.unitWidth,24*this.unitWidth+K),new X(15*this.unitWidth,28*this.unitWidth+K),new X(27*this.unitWidth,2*this.unitWidth),new X(28*this.unitWidth,15*this.unitWidth),new X(27*this.unitWidth,this.frontHeight-3*this.unitWidth),new X(this.frontWidth-16*this.unitWidth,4*this.unitWidth),new X(this.frontWidth-17*this.unitWidth,8*this.unitWidth),new X(this.frontWidth-18*this.unitWidth,14*this.unitWidth),new X(this.frontWidth-18*this.unitWidth,18*this.unitWidth),new X(this.frontWidth-17*this.unitWidth,24*this.unitWidth+K),new X(this.frontWidth-16*this.unitWidth,28*this.unitWidth+K),new X(this.frontWidth-28*this.unitWidth,2*this.unitWidth),new X(this.frontWidth-29*this.unitWidth,17*this.unitWidth),new X(this.frontWidth-28*this.unitWidth,this.frontHeight-3*this.unitWidth)];for(let j=0;j<6;++j)this.mobs.push(new ct("Green","tower_3",15,0,0,3,250,1e3,_.cloneDeep(C))),this.etalonMobs.push(new ct("Green","tower_3",15,0,0,3,250,1e3,_.cloneDeep(C)));this.mobsCoords=[new X(24*this.unitWidth+M,10*this.unitWidth+M),new X(24*this.unitWidth+M,21*this.unitWidth),new X(23*this.unitWidth+M,24*this.unitWidth+M),new X(this.frontWidth-25*this.unitWidth-M,9*this.unitWidth+M),new X(this.frontWidth-25*this.unitWidth-M,20*this.unitWidth),new X(this.frontWidth-24*this.unitWidth-M,24*this.unitWidth)],this.mapInit()}mapInit(){const o=Math.round(2*this.unitWidth/3),f=Math.round(this.unitWidth/3);this.backArray.push(new x(0,0,7*this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new x(0,this.frontHeight-8*this.unitWidth,4*this.unitWidth,8*this.unitWidth,this.backId.wall)),this.backArray.push(new x(4*this.unitWidth,this.frontHeight-6*this.unitWidth,this.unitWidth,6*this.unitWidth,this.backId.wall)),this.backArray.push(new x(5*this.unitWidth,this.frontHeight-5*this.unitWidth,this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new x(6*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new x(0,5*this.unitWidth,2*this.unitWidth,this.frontHeight-8*this.unitWidth,this.backId.wall)),this.backArray.push(new x(2*this.unitWidth,this.frontHeight-11*this.unitWidth,2*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(2*this.unitWidth,5*this.unitWidth,2*this.unitWidth,15*this.unitWidth+f,this.backId.wall)),this.backArray.push(new x(7*this.unitWidth,0,22*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new x(10*this.unitWidth,2*this.unitWidth,10*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(10*this.unitWidth,3*this.unitWidth,8*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(8*this.unitWidth,this.frontHeight-2*this.unitWidth,21*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new x(10*this.unitWidth,this.frontHeight-4*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new x(13*this.unitWidth,this.frontHeight-3*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(13*this.unitWidth,this.frontHeight-4*this.unitWidth,5*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(17*this.unitWidth,9*this.unitWidth,4*this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new x(20*this.unitWidth,6*this.unitWidth,6*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(23*this.unitWidth,7*this.unitWidth,this.unitWidth,8*this.unitWidth,this.backId.wall)),this.backArray.push(new x(24*this.unitWidth,7*this.unitWidth,2*this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new x(24*this.unitWidth,12*this.unitWidth,2*this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new x(25*this.unitWidth,10*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new x(28*this.unitWidth,6*this.unitWidth,this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new x(28*this.unitWidth,11*this.unitWidth,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new x(17*this.unitWidth,this.frontHeight-14*this.unitWidth-f,4*this.unitWidth,5*this.unitWidth+f,this.backId.wall)),this.backArray.push(new x(23*this.unitWidth,this.frontHeight-14*this.unitWidth-f,3*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(23*this.unitWidth,this.frontHeight-13*this.unitWidth-f,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new x(24*this.unitWidth,this.frontHeight-10*this.unitWidth-f,2*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(25*this.unitWidth,this.frontHeight-13*this.unitWidth-f,this.unitWidth,3*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new x(25*this.unitWidth,this.frontHeight-9*this.unitWidth-f,this.unitWidth,3*this.unitWidth+f,this.backId.wall)),this.backArray.push(new x(20*this.unitWidth,this.frontHeight-7*this.unitWidth,5*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(23*this.unitWidth,this.frontHeight-9*this.unitWidth-f,this.unitWidth,2*this.unitWidth+f,this.backId.closeRoad)),this.backArray.push(new x(28*this.unitWidth,this.frontHeight-15*this.unitWidth-f,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new x(28*this.unitWidth,this.frontHeight-9*this.unitWidth-f,this.unitWidth,3*this.unitWidth+f,this.backId.wall)),this.backArray.push(new x(this.frontWidth-7*this.unitWidth,0,7*this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-4*this.unitWidth,this.frontHeight-8*this.unitWidth,4*this.unitWidth,8*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-5*this.unitWidth,this.frontHeight-6*this.unitWidth,this.unitWidth,6*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-6*this.unitWidth,this.frontHeight-5*this.unitWidth,this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-8*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-2*this.unitWidth,5*this.unitWidth,2*this.unitWidth,20*this.unitWidth+f,this.backId.wall)),this.backArray.push(new x(this.frontWidth-4*this.unitWidth,this.frontHeight-11*this.unitWidth,2*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-4*this.unitWidth,5*this.unitWidth,2*this.unitWidth,15*this.unitWidth+f,this.backId.wall)),this.backArray.push(new x(this.frontWidth-29*this.unitWidth,0,22*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-20*this.unitWidth,2*this.unitWidth,10*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-18*this.unitWidth,3*this.unitWidth,8*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-29*this.unitWidth,this.frontHeight-2*this.unitWidth,21*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-21*this.unitWidth,this.frontHeight-3*this.unitWidth,8*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-18*this.unitWidth,this.frontHeight-4*this.unitWidth,5*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-11*this.unitWidth,this.frontHeight-4*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-21*this.unitWidth,9*this.unitWidth,4*this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-26*this.unitWidth,6*this.unitWidth,6*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-26*this.unitWidth,7*this.unitWidth,3*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-24*this.unitWidth,9*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-26*this.unitWidth,11*this.unitWidth,3*this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-26*this.unitWidth,9*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new x(this.frontWidth-29*this.unitWidth,6*this.unitWidth,this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-29*this.unitWidth,11*this.unitWidth,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-21*this.unitWidth,this.frontHeight-14*this.unitWidth-f,4*this.unitWidth,5*this.unitWidth+f,this.backId.wall)),this.backArray.push(new x(this.frontWidth-26*this.unitWidth,this.frontHeight-15*this.unitWidth-f,3*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-24*this.unitWidth,this.frontHeight-14*this.unitWidth-f,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-26*this.unitWidth,this.frontHeight-11*this.unitWidth-f,2*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-26*this.unitWidth,this.frontHeight-10*this.unitWidth-f,this.unitWidth,4*this.unitWidth+f,this.backId.wall)),this.backArray.push(new x(this.frontWidth-25*this.unitWidth,this.frontHeight-7*this.unitWidth,5*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-26*this.unitWidth,this.frontHeight-14*this.unitWidth-f,this.unitWidth,2*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new x(this.frontWidth-24*this.unitWidth,this.frontHeight-10*this.unitWidth-f,this.unitWidth,3*this.unitWidth+f,this.backId.closeRoad)),this.backArray.push(new x(this.frontWidth-29*this.unitWidth,this.frontHeight-15*this.unitWidth-f,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new x(this.frontWidth-29*this.unitWidth,this.frontHeight-9*this.unitWidth-f,this.unitWidth,3*this.unitWidth+f,this.backId.wall)),this.backArray.push(new x(29*this.unitWidth,0,8*this.unitWidth+o,3*this.unitWidth,this.backId.water)),this.backArray.push(new x(29*this.unitWidth,6*this.unitWidth,8*this.unitWidth+o,3*this.unitWidth,this.backId.water)),this.backArray.push(new x(29*this.unitWidth,11*this.unitWidth,8*this.unitWidth+o,4*this.unitWidth,this.backId.water)),this.backArray.push(new x(29*this.unitWidth,18*this.unitWidth,8*this.unitWidth+o,4*this.unitWidth,this.backId.water)),this.backArray.push(new x(29*this.unitWidth,24*this.unitWidth,8*this.unitWidth+o,3*this.unitWidth+f,this.backId.water)),this.backArray.push(new x(29*this.unitWidth,30*this.unitWidth+f,8*this.unitWidth+o,3*this.unitWidth,this.backId.water)),this.backArray.push(new x(29*this.unitWidth,9*this.unitWidth,9*this.unitWidth+o,2*this.unitWidth,this.backId.sand)),this.backArray.push(new x(29*this.unitWidth,22*this.unitWidth,9*this.unitWidth+o,2*this.unitWidth,this.backId.sand)),this.backArray.push(new x(2*this.unitWidth,this.frontHeight-13*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[0])),this.backArray.push(new x(2*this.unitWidth,this.frontHeight-10*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[1])),this.backArray.push(new x(8*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[2])),this.backArray.push(new x(11*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[3])),this.backArray.push(new x(this.frontWidth-4*this.unitWidth,this.frontHeight-13*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[4])),this.backArray.push(new x(this.frontWidth-4*this.unitWidth,this.frontHeight-10*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[5])),this.backArray.push(new x(this.frontWidth-10*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[6])),this.backArray.push(new x(this.frontWidth-13*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[7])),this.backArray.push(new x(7*this.unitWidth,2*this.unitWidth,3*this.unitWidth,3*this.unitWidth-20,this.backId.hpRegenRed)),this.backArray.push(new x(4*this.unitWidth,5*this.unitWidth,3*this.unitWidth-20,3*this.unitWidth,this.backId.cpRegen)),this.backArray.push(new x(this.frontWidth-7*this.unitWidth+20,5*this.unitWidth,3*this.unitWidth-20,3*this.unitWidth,this.backId.cpRegen)),this.backArray.push(new x(this.frontWidth-10*this.unitWidth,2*this.unitWidth,3*this.unitWidth,3*this.unitWidth-20,this.backId.hpRegenBlue)),this.backArray.push(new x(4*this.unitWidth,11*this.unitWidth,6*this.unitWidth,5*this.unitWidth,this.backId.redBase)),this.backArray.push(new x(4*this.unitWidth,10*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.closeRoad)),this.backArray.push(new x(10*this.unitWidth,11*this.unitWidth,this.unitWidth,5*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new x(4*this.unitWidth,16*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.closeRoad)),this.backArray.push(new x(this.frontWidth-10*this.unitWidth,10*this.unitWidth,6*this.unitWidth,5*this.unitWidth,this.backId.blueBase)),this.backArray.push(new x(this.frontWidth-11*this.unitWidth,9*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.closeRoad)),this.backArray.push(new x(this.frontWidth-11*this.unitWidth,10*this.unitWidth,this.unitWidth,5*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new x(this.frontWidth-11*this.unitWidth,15*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.closeRoad))}}class ci{constructor(){W(this,"images",new Map([["testGameMap",new Image(4e3,2e3)],["bullet_1",new Image(60,60)],["bullet_1_shot",new Image(60,60)],["bullet_1_boom",new Image(60,60)],["T_1",new Image(60,60)],["T_2",new Image(60,60)],["T_3",new Image(60,60)],["T_4",new Image(60,60)],["tower_1",new Image(60,60)],["tower_2",new Image(60,60)],["tower_3",new Image(60,60)],["gun_1",new Image(60,60)],["gun_2",new Image(60,60)],["gun_3",new Image(60,60)],["gun_4",new Image(60,60)],["gun_5",new Image(60,60)],["redCrash",new Image(60,60)],["blueCrash",new Image(60,60)],["smoke_1",new Image(60,60)]])),W(this,"counter",0),this.images.get("testGameMap").src="../../images/testGame/map_1.png",this.images.get("bullet_1").src="../../images/testGame/bullet_1.png",this.images.get("bullet_1_shot").src="../../images/testGame/bullet_1_shot.png",this.images.get("bullet_1_boom").src="../../images/testGame/bullet_1_boom.png",this.images.get("T_1").src="../../images/testGame/T_1.png",this.images.get("T_2").src="../../images/testGame/T_2.png",this.images.get("T_3").src="../../images/testGame/T_3.png",this.images.get("T_4").src="../../images/testGame/T_4.png",this.images.get("tower_1").src="../../images/testGame/tower_1.png",this.images.get("tower_2").src="../../images/testGame/tower_2.png",this.images.get("tower_3").src="../../images/testGame/tower_3.png",this.images.get("gun_1").src="../../images/testGame/gun_1.png",this.images.get("gun_2").src="../../images/testGame/gun_2.png",this.images.get("gun_3").src="../../images/testGame/gun_3.png",this.images.get("gun_4").src="../../images/testGame/gun_4.png",this.images.get("gun_5").src="../../images/testGame/gun_5.png",this.images.get("redCrash").src="../../images/testGame/redCrash.png",this.images.get("blueCrash").src="../../images/testGame/blueCrash.png",this.images.get("smoke_1").src="../../images/testGame/smoke_1.png"}allUploaded(s){let o=()=>{++this.counter===this.images.size&&s()};this.images.forEach(f=>{f.onload=o})}}class Bi{constructor(s,o,f,g,A,R){W(this,"sounds",new Map),W(this,"counter",0),g.forEach(C=>{this.sounds.set(C.id,C.id===f.id?new Audio("../../sounds/ShotLoud.mp3"):new Audio("../../sounds/ShotQuit.mp3"))}),A.forEach(C=>{this.sounds.set(C.id,new Audio("../../sounds/ShotQuit.mp3"))}),R.forEach(C=>{this.sounds.set(C.id,new Audio("../../sounds/ShotQuit.mp3"))}),this.sounds.set(s.tower1.id,new Audio("../../sounds/ShotQuit.mp3")),this.sounds.set(s.tower2.id,new Audio("../../sounds/ShotQuit.mp3")),this.sounds.set(o.tower1.id,new Audio("../../sounds/ShotQuit.mp3")),this.sounds.set(o.tower2.id,new Audio("../../sounds/ShotQuit.mp3")),this.sounds.set("Wind",new Audio("../../sounds/Wind.mp3"))}}class vt{constructor(s,o,f){W(this,"map",null),W(this,"uI",0),W(this,"etalonUnits",[]),W(this,"cloneUnits",[]),this.map=s,this.etalonUnits=o,this.userId=f,this.uI=this.findUser(),this.preparation(),this.counter=0,this.pause=!1,this.defeat=!1,this.win=!1,this.bonus=0}findUser(){for(let s=0;s<this.etalonUnits.length;++s)if(this.userId===this.etalonUnits[s].userId)return s}preparation(){this.etalonUnits.forEach((s,o)=>{s.pos.coords.X=this.map.unitsCoords[o].X,s.pos.coords.Y=this.map.unitsCoords[o].Y,s.turn=this.map.startUnitsTurn[o],s.id=this.map.backId.units[o],s.homeId=this.map.backId.homes[o],s.gun.degree=90*s.turn,this.cloneUnits[o]=_.cloneDeep(s),this.cloneUnits[o].map=s.map=this.map,this.cloneUnits[o].width=this.cloneUnits[o].height=this.map.unitWidth,this.cloneUnits[o].bullet.map=s.bullet.map=this.map,this.cloneUnits[o].bullet.width=this.cloneUnits[o].bullet.height=Math.round(this.map.unitWidth/5),this.map.backArray.push(this.cloneUnits[o]),this.userId===s.userId&&(this.cloneUnits[o].control=s.control,this.cloneUnits[o].control.mouseMove(),this.cloneUnits[o].control.mouseDown(),this.cloneUnits[o].control.mouseUp(),this.cloneUnits[o].control.keyDown(),this.cloneUnits[o].control.keyUp())}),this.map.towers.forEach((s,o)=>{s.map=this.map,s.bullet.map=this.map,s.id=this.map.backId.towers[o],s.pos.coords=this.map.towersCoords[o],s.turn="blue"===s.side?y.left:y.right,s.gun.degree="blue"===s.side?180:0,s.targets=this.cloneUnits.filter(f=>s.side!==f.side),s.allies=this.cloneUnits.filter(f=>s.side===f.side),s.width=s.height=this.map.unitWidth,this.map.backArray.push(s),s.update(s.pos.coords)}),this.map.mobs.forEach((s,o)=>{s.map=this.map,s.bullet.map=this.map,s.id=this.map.backId.mobs[o],s.pos.coords=this.map.mobsCoords[o],s.targets=this.cloneUnits.filter(f=>s.side!==f.side),s.allies=this.cloneUnits.filter(f=>s.side===f.side),s.width=s.height=this.map.unitWidth,this.map.backArray.push(s),s.update(s.pos.coords)}),this.map.etalonMobs.forEach((s,o)=>{s.map=this.map,s.bullet.map=this.map,s.id=this.map.backId.mobs[o],s.pos.coords=this.map.mobsCoords[o],s.targets=this.cloneUnits.filter(f=>s.side!==f.side),s.allies=this.cloneUnits.filter(f=>s.side===f.side)}),this.cloneUnits.forEach(s=>{s.targets=this.cloneUnits.filter(o=>s.side!==o.side),this.map.towers.filter(o=>s.side!==o.side).forEach(o=>{s.targets.push(o)}),this.map.mobs.filter(o=>s.side!==o.side).forEach(o=>{s.targets.push(o)}),s.targets.push("red"===s.side?this.map.blueBase:this.map.redBase),s.allies=this.cloneUnits.filter(o=>s.side===o.side)}),this.map.baseTowers.forEach(s=>{s.map=this.map,s.bullet.map=this.map,s.targets=this.cloneUnits.filter(o=>s.side!==o.side),s.allies=this.cloneUnits.filter(o=>s.side===o.side)}),this.map.redBase.id=this.map.backId.redBase,this.map.blueBase.id=this.map.backId.blueBase,this.map.redBase.tower1.id=1e3,this.map.blueBase.tower2.id=1001,this.map.blueBase.tower1.id=1002,this.map.blueBase.tower2.id=1003,this.sound=new Bi(this.map.redBase,this.map.blueBase,this.cloneUnits[this.uI],this.cloneUnits,this.map.towers,this.map.mobs)}unitsBackFill(){this.cloneUnits.forEach(s=>{s.pos.pastCoords.X=s.pos.coords.X,s.pos.pastCoords.Y=s.pos.coords.Y,s.update(s.pos.coords),s.checkFrontWay(1)})}run(){"Space"===this.cloneUnits[this.uI].control.buttonUp&&(this.pause=!1===this.pause,this.cloneUnits[this.uI].control.buttonUp=""),!this.pause&&!this.win&&!this.defeat&&(this.counter++,this.counter>5400&&(this.counter=0),this.unitsBackFill(),this.cloneUnits.forEach((s,o)=>{this.uI!==o&&(this.botLogic(s),null!==s.target&&s.hunt(s.target),s.shot(),this.crash(s,this.etalonUnits[o]),this.rebirth(s,this.etalonUnits[o]))}),this.map.baseTowers.forEach(s=>{s.shot()}),this.map.towers.forEach(s=>{s.shot()}),this.map.mobs.forEach((s,o)=>{s.uc.health<s.etalonUc.health&&s.shot(),this.crash(s,this.map.etalonMobs[o]),this.rebirth(s,this.map.etalonMobs[o])}),this.cloneUnits[this.uI].controlHandling(),this.cloneUnits[this.uI].shot(),this.crash(this.cloneUnits[this.uI],this.etalonUnits[this.uI]),this.rebirth(this.cloneUnits[this.uI],this.etalonUnits[this.uI]),this.gameOver())}gameOver(){"red"===this.cloneUnits[this.uI].side&&this.map.blueBase.uc.health<=0||"blue"===this.cloneUnits[this.uI].side&&this.map.redBase.uc.health<=0?(++this.etalonUnits[this.uI].wins,++this.etalonUnits[this.uI].battles,this.etalonUnits[this.uI].kills=this.cloneUnits[this.uI].kills,this.bonus=Qi(500,1e3),this.etalonUnits[this.uI].money+=this.bonus,this.win=!0):("red"===this.cloneUnits[this.uI].side&&this.map.redBase.uc.health<=0||"blue"===this.cloneUnits[this.uI].side&&this.map.blueBase.uc.health<=0)&&(++this.etalonUnits[this.uI].defeats,++this.etalonUnits[this.uI].battles,this.etalonUnits[this.uI].kills=this.cloneUnits[this.uI].kills,this.bonus=Qi(200,300),this.etalonUnits[this.uI].money+=this.bonus,this.defeat=!0)}botLogic(s){if(this.counter%1200==0||1===this.counter||null===s.target||s.target.uc.health<=0){let o=new Map;s.targets.forEach((A,R)=>{let C=Math.abs(A.pos.coords.X-s.pos.coords.X),P=Math.abs(A.pos.coords.Y-s.pos.coords.Y);o.set(A,Math.round(Math.sqrt(Math.pow(C,2)+Math.pow(P,2))))});const f=[...o.entries()].sort((A,R)=>A[1]-R[1]).map(([A,R])=>A).filter(A=>!s.allies.find(R=>R.target?.id===A.id));let g=!1;for(let A of f){for(let R of s.allies){if(R.target?.id===A.id)break;if(A.uc.health>0){s.target=A,g=!0;break}}if(g)break}}}crash(s,o){s.uc.health<=0&&s.uc.respawnTime===s.etalonUc.respawnTime&&(s.pos.crashCoords.X=s.pos.coords.X,s.pos.crashCoords.Y=s.pos.coords.Y,s.turn=o.turn,s.gun.degree=o.gun.degree,s.pos.coords.X=o.pos.coords.X,s.pos.coords.Y=o.pos.coords.Y),s.uc.health<=0&&--s.uc.respawnTime}rebirth(s){s.uc.respawnTime<=0&&(s.uc.respawnTime=s.etalonUc.respawnTime,s.uc.armor=s.etalonUc.armor,s.uc.health=s.etalonUc.health)}}class ti extends Gt{constructor(o,f,g){super(),W(this,"experienceToLevel",0),W(this,"money",0),W(this,"battles",0),W(this,"wins",0),W(this,"kills",0),W(this,"killsInGame",0),W(this,"defeats",0),W(this,"counter",0),W(this,"control",null),W(this,"name","Player"),super.userId=f,super.side=g.team.toLowerCase(),this.control=o,this.uc.model=g.tankBody,this.etalonUc.model=g.tankBody,this.gun.model=g.tankHead}checkCollision(o){let f=!1;for(let R=this.speedController;R>0&&(f=!1,this.setPosition(R,!0),this.checkFrontWay(R)||(this.setPosition(R,!1),f=!0),!1!==f);R--);let A=this.pos.coords.Y-this.pos.pastCoords.Y;if(this.pos.deltaCoords.X=this.pos.coords.X-this.pos.pastCoords.X,this.pos.deltaCoords.Y=A,o&&!f){let C=this.pos.renderCoords.Y+this.pos.deltaCoords.Y;this.pos.renderCoords.X=this.pos.renderCoords.X+this.pos.deltaCoords.X,this.pos.renderCoords.Y=C}}shot(){!0===this.trigger&&(this.counter%2==0&&this.reload===this.bullet.speed&&this.bullet.move(),this.counter%2==0&&this.reload++,this.kill=this.bullet.fatalHit(),null!==this.kill&&(++this.kills,++this.killsInGame,this.bullet.target=null,this.levelUp(),this.kill=null),this.reload>10&&(this.trigger=!1,this.bullet.hit=!1,this.bullet.hitMiss=!1,this.reload=0))}extraMove(o){this.uc.health>0&&(this.speedController<this.uc.speed&&this.counter%2==0&&++this.speedController,this.checkCollision(o))}checkMapSides(){let o=this.map.renderY>=this.uc.speed,f=this.pos.coords.Y<=this.map.frontHeight-Math.floor(this.control.canvas.height/2),g=this.map.renderY<=this.map.frontHeight-this.control.canvas.height-this.uc.speed,A=this.pos.coords.Y>=Math.floor(this.control.canvas.height/2),R=this.map.renderX>=this.uc.speed,C=this.pos.coords.X<=this.map.frontWidth-Math.floor(this.control.canvas.width/2),P=this.map.renderX<=this.map.frontWidth-this.control.canvas.width-this.uc.speed,K=this.pos.coords.X>=Math.floor(this.control.canvas.width/2);return this.turn===y.top?o&&f:this.turn===y.bottom?g&&A:this.turn===y.left?R&&C:this.turn===y.right?P&&K:void 0}correctRenderCoords1(){this.map.renderX-=this.pos.deltaCoords.X,this.map.renderY-=this.pos.deltaCoords.Y,this.targets.forEach(o=>{o.bullet.pos.renderCoords.X+=this.pos.deltaCoords.X,o.bullet.pos.renderCoords.Y+=this.pos.deltaCoords.Y}),this.allies.forEach(o=>{o.bullet.pos.renderCoords.X+=this.pos.deltaCoords.X,o.bullet.pos.renderCoords.Y+=this.pos.deltaCoords.Y})}correctRenderCoords2(){this.map.renderX+=this.pos.deltaCoords.X,this.map.renderY+=this.pos.deltaCoords.Y,this.targets.forEach(o=>{o.bullet.pos.renderCoords.X-=this.pos.deltaCoords.X,o.bullet.pos.renderCoords.Y-=this.pos.deltaCoords.Y}),this.allies.forEach(o=>{o.bullet.pos.renderCoords.X-=this.pos.deltaCoords.X,o.bullet.pos.renderCoords.Y-=this.pos.deltaCoords.Y})}move(o){this.checkMapSides()?(o(!1),this.pos.deltaCoords.X<0||this.pos.deltaCoords.Y<0?this.turn===y.right||this.turn===y.bottom?this.correctRenderCoords1():this.correctRenderCoords2():this.turn===y.right||this.turn===y.bottom?this.correctRenderCoords2():this.correctRenderCoords1()):o(!0)}turnGun(){let o=Math.round(this.map.unitWidth/2),f=Math.round(this.map.unitWidth/2),g=this.pos.renderCoords.X+o,R=(this.control.mouseY-(this.pos.renderCoords.Y+f))/(this.control.mouseX-g);this.gun.degree=g<this.control.mouseX?180*Math.atan(R)/Math.PI:180*Math.atan(R)/Math.PI+180}controlHandling(){if(this.uc.health>0)switch(this.turnGun(),this.counter++,this.counter>1e3&&(this.counter=0),this.control.buttonDown){case"ArrowUp":case"KeyW":this.turn=y.top,this.move(o=>this.extraMove(o));break;case"ArrowDown":case"KeyS":this.turn=y.bottom,this.move(o=>this.extraMove(o));break;case"ArrowLeft":case"KeyA":this.turn=y.left,this.move(o=>this.extraMove(o));break;case"ArrowRight":case"KeyD":this.turn=y.right,this.move(o=>this.extraMove(o));break;default:this.speedController>0&&this.counter%4==0&&""!==this.control.buttonUp&&(--this.speedController,this.move(o=>this.checkCollision(o)))}""!==this.control.buttonUp&&(this.control.buttonDown=""),this.control.checkMouseDown&&this.uc.health>0&&(this.trigger=!0),this.control.checkMouseUp&&(this.control.checkMouseDown=!1,this.control.checkMouseUp=!1)}}class ve{constructor(s,o,f,g){W(this,"pic",null),W(this,"canvas",null),W(this,"context",null),W(this,"map",null),W(this,"etalonUnits",[]),W(this,"cloneUnits",[]),W(this,"uI",0),W(this,"game",null),this.game=g,this.map=g.map,this.pic=s,this.canvas=o,this.context=f,this.etalonUnits=g.etalonUnits,this.cloneUnits=g.cloneUnits,this.userId=g.userId,this.uI=g.uI,this.crashDegrees=0,this.userPreparation(),this.othersPreparation()}userPreparation(){let s=Math.round(this.canvas.width/2),o=Math.round(this.canvas.height/2),P=this.cloneUnits[this.uI].pos.coords.Y+o>=this.map.frontHeight?this.map.frontHeight-this.cloneUnits[this.uI].pos.coords.Y:o;this.cloneUnits[this.uI].pos.coords.X>=this.canvas.width?(this.map.renderX=this.cloneUnits[this.uI].pos.coords.X+(this.cloneUnits[this.uI].pos.coords.X+s>=this.map.frontWidth?this.map.frontWidth-this.cloneUnits[this.uI].pos.coords.X:s)-this.canvas.width,this.cloneUnits[this.uI].pos.renderCoords.X=this.cloneUnits[this.uI].pos.coords.X-this.map.renderX,this.etalonUnits[this.uI].pos.renderCoords.X=this.cloneUnits[this.uI].pos.coords.X-this.map.renderX):(this.cloneUnits[this.uI].pos.renderCoords.X=this.cloneUnits[this.uI].pos.coords.X,this.etalonUnits[this.uI].pos.renderCoords.X=this.etalonUnits[this.uI].pos.coords.X),this.cloneUnits[this.uI].pos.coords.Y>this.canvas.height?(this.map.renderY=this.cloneUnits[this.uI].pos.coords.Y+P-this.canvas.height,this.cloneUnits[this.uI].pos.renderCoords.Y=this.cloneUnits[this.uI].pos.coords.Y-this.map.renderY,this.etalonUnits[this.uI].pos.renderCoords.Y=this.cloneUnits[this.uI].pos.coords.Y-this.map.renderY):(this.cloneUnits[this.uI].pos.renderCoords.Y=this.cloneUnits[this.uI].pos.coords.Y,this.etalonUnits[this.uI].pos.renderCoords.Y=this.etalonUnits[this.uI].pos.coords.Y)}othersPreparation(){for(let s=0;s<this.cloneUnits.length;++s)s!==this.uI&&(this.cloneUnits[s].pos.renderCoords.X=this.cloneUnits[s].pos.coords.X-this.cloneUnits[this.uI].map.renderX,this.cloneUnits[s].pos.renderCoords.Y=this.cloneUnits[s].pos.coords.Y-this.map.renderY,this.cloneUnits[s].bullet.pos.renderCoords.X=this.cloneUnits[s].bullet.pos.coords.X-this.map.renderX,this.cloneUnits[s].bullet.pos.renderCoords.Y=this.cloneUnits[s].bullet.pos.coords.Y-this.map.renderY);this.map.baseTowers.forEach(s=>{s.pos.renderCoords.X=s.pos.coords.X-this.cloneUnits[this.uI].map.renderX,s.pos.renderCoords.Y=s.pos.coords.Y-this.cloneUnits[this.uI].map.renderY,s.bullet.pos.renderCoords.X=s.bullet.pos.coords.X-this.map.renderX,s.bullet.pos.renderCoords.Y=s.bullet.pos.coords.Y-this.map.renderY}),this.map.towers.forEach(s=>{s.pos.renderCoords.X=s.pos.coords.X-this.cloneUnits[this.uI].map.renderX,s.pos.renderCoords.Y=s.pos.coords.Y-this.cloneUnits[this.uI].map.renderY,s.bullet.pos.renderCoords.X=s.bullet.pos.coords.X-this.map.renderX,s.bullet.pos.renderCoords.Y=s.bullet.pos.coords.Y-this.map.renderY}),this.map.mobs.forEach(s=>{s.pos.renderCoords.X=s.pos.coords.X-this.cloneUnits[this.uI].map.renderX,s.pos.renderCoords.Y=s.pos.coords.Y-this.cloneUnits[this.uI].map.renderY,s.bullet.pos.renderCoords.X=s.bullet.pos.coords.X-this.map.renderX,s.bullet.pos.renderCoords.Y=s.bullet.pos.coords.Y-this.map.renderY}),this.map.redBase.pos.renderCoords.X=4*this.map.unitWidth-this.map.renderX,this.map.redBase.pos.renderCoords.Y=11*this.map.unitWidth-this.map.renderY,this.map.blueBase.pos.renderCoords.X=this.map.frontWidth-4*this.map.unitWidth-this.map.renderX,this.map.blueBase.pos.renderCoords.Y=10*this.map.unitWidth-this.map.renderY}showUnitModel(s){let o=0;s.turn===y.right&&(o=0),s.turn===y.bottom&&(o=90),s.turn===y.left&&(o=180),s.turn===y.top&&(o=270),this.rotateImage(o,this.map.unitWidth,this.map.unitWidth,s.pos.renderCoords,()=>{this.context.drawImage(this.pic.images.get(s.uc.model),-Math.floor(this.map.unitWidth/2),-Math.floor(this.map.unitWidth/2))}),this.showGunModel(s)}showGunModel(s){s.uc.health>0&&this.rotateImage(s.gun.degree,this.map.unitWidth,this.map.unitWidth,s.pos.renderCoords,()=>{this.context.drawImage(this.pic.images.get(s.gun.model),-Math.floor(this.map.unitWidth/2),-Math.floor(this.map.unitWidth/2))})}rotateImage(s,o,f,g,A){this.context.save(),this.context.translate(g.X+Math.floor(o/2),g.Y+Math.floor(f/2)),this.context.rotate(s*(Math.PI/180)),A(),this.context.restore()}showShot(s){this.showBullet(s.bullet.degree,s),this.showShotMoment(s.bullet.degree,s),this.showBoomMoment(s.bullet.degree,s)}showBullet(s,o){if(1===o.bullet.speed&&(this.game.sound.sounds.get(o.id).currentTime=0,this.game.sound.sounds.get(o.id).play()),0!==o.bullet.speed){let f=this.pic.images.get(o.ammunition[o.bulletType].model);this.rotateImage(s,f.width,f.height,o.bullet.pos.renderCoords,()=>{this.context.drawImage(f,-Math.floor(f.width/2),-Math.floor(f.height/2))})}}showShotMoment(s,o){if(2===o.bullet.speed||3===o.bullet.speed){let f=this.pic.images.get(o.ammunition[o.bulletType].shot_model);2===o.bullet.speed&&(o.bullet.bulletType.shot_coords.X=o.bullet.pos.renderCoords.X,o.bullet.bulletType.shot_coords.Y=o.bullet.pos.renderCoords.Y),this.rotateImage(s,f.width,f.height,o.bullet.bulletType.shot_coords,()=>{this.context.drawImage(f,-Math.floor(f.width/2),-Math.floor(f.height/2))})}}showBoomMoment(s,o){if(o.bullet.hit||o.bullet.hitMiss){let f=this.pic.images.get(o.ammunition[o.bulletType].boom_model);o.bullet.bulletType.boom_coords.X=o.bullet.pos.renderCoords.X,o.bullet.bulletType.boom_coords.Y=o.bullet.pos.renderCoords.Y,this.rotateImage(s,f.width,f.height,o.bullet.bulletType.boom_coords,()=>{this.context.drawImage(f,-Math.floor(f.width/2),-Math.floor(f.height/2))})}}healthArmorBalancer(s,o,f){return s*f/o}showArmor(s){if(s.uc.health>0){const R=this.map.unitWidth-20+3;this.context.fillStyle="darkOrange";let C=this.healthArmorBalancer(s.uc.armor,s.etalonUc.armor,R);switch(s.turn){case y.right:this.context.fillRect(s.pos.renderCoords.X-28,s.pos.renderCoords.Y+20+R-C,4,C),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X-28,s.pos.renderCoords.Y+20,4,R-C);break;case y.bottom:this.context.fillRect(s.pos.renderCoords.X-3+R-C,s.pos.renderCoords.Y-28,C,4),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X-3,s.pos.renderCoords.Y-28,R-C,4);break;case y.left:this.context.fillRect(s.pos.renderCoords.X+this.map.unitWidth+28-4,s.pos.renderCoords.Y+20+R-C,4,C),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X+this.map.unitWidth+28-4,s.pos.renderCoords.Y+20,4,R-C);break;case y.top:this.context.fillRect(s.pos.renderCoords.X-3+R-C,s.pos.renderCoords.Y+this.map.unitWidth+28-4,C,4),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X-3,s.pos.renderCoords.Y+this.map.unitWidth+28-4,R-C,4)}}}showHealth(s){if(s.uc.health>0){const R=this.map.unitWidth-20+3;this.context.fillStyle="red"===s.side?"darkRed":"green"===s.side?"darkGreen":"blue";let C=this.healthArmorBalancer(s.uc.health,s.etalonUc.health,R);switch(s.turn){case y.right:this.context.fillRect(s.pos.renderCoords.X-24,s.pos.renderCoords.Y+20+R-C,4,C),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X-24,s.pos.renderCoords.Y+20,4,R-C);break;case y.bottom:this.context.fillRect(s.pos.renderCoords.X-3+R-C,s.pos.renderCoords.Y-24,C,4),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X-3,s.pos.renderCoords.Y-24,R-C,4);break;case y.left:this.context.fillRect(s.pos.renderCoords.X+this.map.unitWidth+24-4,s.pos.renderCoords.Y+20+R-C,4,C),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X+this.map.unitWidth+24-4,s.pos.renderCoords.Y+20,4,R-C);break;case y.top:this.context.fillRect(s.pos.renderCoords.X-3+R-C,s.pos.renderCoords.Y+this.map.unitWidth+24-4,C,4),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X-3,s.pos.renderCoords.Y+this.map.unitWidth+24-4,R-C,4)}}}showLevel(s){if(s.uc.health>0){this.context.save(),this.context.fillStyle="rgb(255, 255, 255)",this.context.font="16px Arial",this.context.lineWidth=2;const P=30;switch(s.turn){case y.right:this.context.textAlign="center",this.context.translate(s.pos.renderCoords.X-P-2-2+20.5,s.pos.renderCoords.Y-3+9),this.context.rotate(270*Math.PI/180);break;case y.bottom:this.context.textAlign="center",this.context.translate(s.pos.renderCoords.X+this.map.unitWidth+3-9,s.pos.renderCoords.Y-P-2-2+20.5);break;case y.left:this.context.textAlign="center",this.context.translate(s.pos.renderCoords.X+this.map.unitWidth+P+2+2-12.5,s.pos.renderCoords.Y-3+9),this.context.rotate(270*Math.PI/180);break;case y.top:this.context.textAlign="center",this.context.translate(s.pos.renderCoords.X+this.map.unitWidth+3-9,s.pos.renderCoords.Y+this.map.unitWidth+P+2+2-12.5)}this.text(`${s.uc.level}`,0,0,21),this.context.restore()}}showName(s){if(s.uc.health>0){const P=3+this.map.unitWidth-18;this.context.save(),this.context.fillStyle="rgb(255, 255, 255)",this.context.font="13px Arial",this.context.lineWidth=1;const K=30;switch(s.turn){case y.right:this.context.textAlign="center",this.context.translate(s.pos.renderCoords.X-K-2+25,s.pos.renderCoords.Y+this.map.unitWidth+3-1-P/2),this.context.rotate(270*Math.PI/180);break;case y.bottom:this.context.textAlign="center",this.context.translate(s.pos.renderCoords.X-3+1+P/2,s.pos.renderCoords.Y-K-2+25);break;case y.left:this.context.textAlign="center",this.context.translate(s.pos.renderCoords.X+this.map.unitWidth+K-2-12.5,s.pos.renderCoords.Y+this.map.unitWidth+3-1-P/2),this.context.rotate(270*Math.PI/180);break;case y.top:this.context.textAlign="center",this.context.translate(s.pos.renderCoords.X-3+1+P/2,s.pos.renderCoords.Y+this.map.unitWidth+K-2-12.5)}this.wrapText(this.context,`${s.name}`,0,0,P),this.context.restore()}}showUCContainer(s){if(s.uc.health>0){const R=this.map.unitWidth+10;let C,P;switch(this.context.save(),this.context.fillStyle="rgba(60, 50, 50, 0.7)",this.context.strokeStyle="rgb(20, 20, 20)",this.context.lineJoin="round",this.context.lineWidth=1,this.context.beginPath(),s.turn){case y.right:C=s.pos.renderCoords.X-30,P=s.pos.renderCoords.Y-5,this.context.roundRect(C,P,25,R,3);break;case y.bottom:C=s.pos.renderCoords.X-5,P=s.pos.renderCoords.Y-30,this.context.roundRect(C,P,R,25,3);break;case y.left:C=s.pos.renderCoords.X+30-25+this.map.unitWidth,P=s.pos.renderCoords.Y-5,this.context.roundRect(C,P,25,R,3);break;case y.top:C=s.pos.renderCoords.X-5,P=s.pos.renderCoords.Y+30-25+this.map.unitWidth,this.context.roundRect(C,P,R,25,3)}this.context.stroke(),this.context.fill(),this.context.restore()}}showBaseHealth(s){if(s.uc.health>0){let g=this.healthArmorBalancer(s.uc.health,s.etalonUc.health,this.map.baseWidth);this.context.fillStyle="red"===s.side?"darkRed":"blue","red"===s.side?(this.context.fillRect(s.pos.renderCoords.X-20,s.pos.renderCoords.Y+this.map.baseWidth-g,12,g),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X-20,s.pos.renderCoords.Y,12,this.map.baseWidth-g)):(this.context.fillRect(s.pos.renderCoords.X+20,s.pos.renderCoords.Y+this.map.baseWidth-g,12,g),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X+20,s.pos.renderCoords.Y,12,this.map.baseWidth-g))}}showCrash(s){s.uc.health<=0&&(s.pos.renderCrashCoords.X=s.pos.crashCoords.X-this.map.renderX,s.pos.renderCrashCoords.Y=s.pos.crashCoords.Y-this.map.renderY,this.rotateImage(0,this.map.unitWidth,this.map.unitWidth,s.pos.renderCrashCoords,()=>{this.context.drawImage(this.pic.images.get(s.uc.model),-Math.floor(this.map.unitWidth/2),-Math.floor(this.map.unitWidth/2))}),++this.crashDegrees,this.rotateImage(this.crashDegrees,this.map.unitWidth,this.map.unitWidth,s.pos.renderCrashCoords,()=>{this.context.drawImage(this.pic.images.get("smoke_1"),-Math.floor(this.map.unitWidth/2),-Math.floor(this.map.unitWidth/2))}))}isVisible(s){return!(s.pos.renderCoords.X>this.canvas.width+this.map.unitWidth||s.pos.renderCoords.X<-this.map.unitWidth||s.pos.renderCoords.Y>this.canvas.height+this.map.unitWidth||s.pos.renderCoords.X<-this.map.unitWidth)}render(){if(5===this.game.counter&&(this.game.sound.sounds.get("Wind").currentTime=0,this.game.sound.sounds.get("Wind").play()),this.othersPreparation(),1===this.cloneUnits[this.uI].uc.respawnTime?(this.map.renderX=0,this.map.renderY=0,this.userPreparation()):this.cloneUnits[this.uI].uc.health<=0&&this.map.moveMap(this.cloneUnits[this.uI].control.mouseX,this.cloneUnits[this.uI].control.mouseY),this.context.drawImage(this.map.mapImg,this.map.renderX,this.map.renderY,this.canvas.width,this.canvas.height,0,0,this.canvas.width,this.canvas.height),this.cloneUnits.forEach(s=>{this.showCrash(s)}),this.cloneUnits.forEach(s=>{s.uc.health>0&&this.isVisible(s)&&this.showUnitModel(s)}),this.map.towers.forEach(s=>{this.isVisible(s)&&this.showUnitModel(s)}),this.map.baseTowers.forEach(s=>{this.isVisible(s)&&this.showUnitModel(s)}),this.map.mobs.forEach(s=>{this.isVisible(s)&&this.showUnitModel(s)}),this.cloneUnits.forEach(s=>{s.uc.health>0&&this.isVisible(s)&&this.showShot(s)}),this.map.towers.forEach(s=>{s.uc.health>0&&this.isVisible(s)&&this.showShot(s)}),this.map.baseTowers.forEach(s=>{s.uc.health>0&&this.isVisible(s)&&this.showShot(s)}),this.map.mobs.forEach(s=>{s.uc.health>0&&this.isVisible(s)&&this.showShot(s)}),this.cloneUnits.forEach(s=>{s.uc.health>0&&this.isVisible(s)&&(this.showUCContainer(s),this.showName(s),this.showHealth(s),this.showArmor(s),this.showLevel(s))}),this.map.towers.forEach(s=>{this.isVisible(s)&&this.showHealth(s)}),this.map.mobs.forEach(s=>{this.isVisible(s)&&this.showHealth(s)}),this.isVisible(this.map.redBase)&&this.showBaseHealth(this.map.redBase),this.isVisible(this.map.blueBase)&&this.showBaseHealth(this.map.blueBase),this.showUC(),this.game.win||this.game.defeat){this.cloneUnits[this.uI].pos.renderCoords.X=this.cloneUnits[this.uI].pos.coords.X-this.map.renderX,this.cloneUnits[this.uI].pos.renderCoords.Y=this.cloneUnits[this.uI].pos.coords.Y-this.map.renderY,this.cloneUnits[this.uI].bullet.pos.renderCoords.X=this.cloneUnits[this.uI].bullet.pos.coords.X-this.map.renderX,this.cloneUnits[this.uI].bullet.pos.renderCoords.Y=this.cloneUnits[this.uI].bullet.pos.coords.Y-this.map.renderY,this.map.moveMap(this.cloneUnits[this.uI].control.mouseX,this.cloneUnits[this.uI].control.mouseY),this.context.fillStyle="rgba(60, 50, 50, 0.8)",this.context.strokeStyle="rgb(20, 20, 20)";let s=Math.round(this.canvas.width/10),o=Math.round(this.canvas.height/10),f=8*s,g=8*o,A=20;this.context.lineJoin="round",this.context.lineWidth=A,this.context.strokeRect(s+A/2,o+A/2,f-A,g-A),this.context.fillRect(s+A/2,o+A/2,f-A,g-A),this.game.win&&this.winMessage(o),this.game.defeat&&this.defeatMessage(o)}}showUC(){this.context.fillStyle="rgb(0, 0, 0)",this.context.font="20px Palatino Linotype",this.context.lineWidth=2;let s=20;this.text(`Level: ${this.cloneUnits[this.uI].uc.level}`,s,20),this.text(`Exp: ${Math.floor(this.cloneUnits[this.uI].uc.experience)} / ${Math.floor(this.cloneUnits[this.uI].experienceToLevel)}`,s,40),this.text(`Health: ${Math.floor(this.cloneUnits[this.uI].uc.health)} / ${Math.floor(this.cloneUnits[this.uI].etalonUc.health)}`,s,60),this.text(`Armor: ${Math.floor(this.cloneUnits[this.uI].uc.armor)} / ${Math.floor(this.cloneUnits[this.uI].etalonUc.armor)}`,s,80),this.text(`Speed: ${Math.floor(this.cloneUnits[this.uI].uc.speed)} / ${Math.floor(this.cloneUnits[this.uI].etalonUc.speed)}`,s,100),this.text(`Power: ${Math.floor(this.cloneUnits[this.uI].uc.shotPower)} / ${Math.floor(this.cloneUnits[this.uI].etalonUc.shotPower)}`,s,120)}winMessage(s){this.context.textAlign="center";let o=Math.round(this.canvas.width/2);this.context.fillStyle="rgb(255, 255, 255)",this.context.font="48px Palatino Linotype",this.context.lineWidth=5,this.text("PERFECT VICTORY",o,2*s),this.context.font="36px Palatino Linotype",this.context.lineWidth=3,this.text("Congratulations! Your awards / achievements:",o,3*s),this.message(s)}defeatMessage(s){this.context.textAlign="center";let o=Math.round(this.canvas.width/2);this.context.fillStyle="rgb(255, 255, 255)",this.context.font="48px Palatino Linotype",this.context.lineWidth=5,this.text("UNFORTUNATE DEFEAT",o,2*s),this.context.font="36px Palatino Linotype",this.context.lineWidth=3,this.text("Your awards / achievements:",o,3*s),this.message(s)}message(s){let o=Math.round(this.canvas.width/2),f=Math.round(s/2);this.context.lineWidth=3,this.context.font="28px Palatino Linotype",this.text(`Money: +${this.game.bonus}`,o,4*s+f),this.text(`Kills in game: ${this.cloneUnits[this.uI].killsInGame}`,o,4*s+2*f),this.text(`Level in game: ${this.cloneUnits[this.uI].uc.level}`,o,4*s+3*f),this.text(`Total kills: ${this.etalonUnits[this.uI].kills}`,o,4*s+4*f),this.text(`Wins: ${this.etalonUnits[this.uI].wins}`,o,4*s+5*f),this.text(`Defeats: ${this.etalonUnits[this.uI].defeats}`,o,4*s+6*f),this.text(`Battles: ${this.etalonUnits[this.uI].battles}`,o,4*s+7*f)}text(s,o,f,g=this.canvas.width){this.context.strokeText(s,o,f,g),this.context.fillText(s,o,f,g)}wrapText(s,o,f,g,A){const R=o.split("");let C="",P="";for(let K=0;K<R.length;++K)if(P+=R[K],s.measureText(P).width>1.2*A){for(let yi=0;yi<K;++yi)C+=R[yi];C+="...";break}C||(C=o),this.text(C,f,g,A)}}class Xt{constructor(s){W(this,"mouseX",0),W(this,"mouseY",0),W(this,"buttonDown",""),W(this,"buttonUp",""),W(this,"checkMouseDown",!1),W(this,"checkMouseUp",!1),this.canvas=s}mouseMove(){this.canvas.addEventListener("mousemove",s=>{this.mouseX=s.offsetX,this.mouseY=s.offsetY})}mouseDown(){this.canvas.addEventListener("mousedown",()=>{this.checkMouseDown=!0})}mouseUp(){this.canvas.addEventListener("mouseup",()=>{this.checkMouseUp=!0})}keyDown(){document.addEventListener("keydown",s=>{this.buttonDown=s.code,this.buttonUp=""})}keyUp(){document.addEventListener("keyup",s=>{this.buttonUp=s.code})}}window._=ht(3815);class pi{constructor(){W(this,"position",0),W(this,"team","red"),W(this,"tankHead","gun_1"),W(this,"tankBody","T_1")}}class Et{constructor(s,o=new pi){W(this,"map"),W(this,"game"),W(this,"control"),W(this,"units"),W(this,"render"),W(this,"animationFrameRef"),this.canvas=s,this.context=this.canvas.getContext("2d"),this.control=new Xt(s),this.pictures=new ci,this.start=(new Date).getTime(),this.fps=0,this.settings=o}draw(){this.game.run(),setTimeout(()=>this.render.render(),0);let s=(new Date).getTime();this.fps++,s-this.start>=1e3&&(this.start=s,this.fps=0),this.animationFrameRef=requestAnimationFrame(this.draw.bind(this))}run(){this.pictures.allUploaded(()=>{this.map=new di(this.canvas,this.pictures.images.get("testGameMap"),this.pictures.images.get("T_2")),this.canvas.style.cursor=this.pictures.images.get("cursor"),this.units=this.getUnits(),this.game=new vt(this.map,this.units,"user"),this.render=new ve(this.pictures,this.canvas,this.context,this.game),this.draw()})}getUnits(){const o=()=>new ct("Red","T_1",30,30,5,1,200,600,{model:"gun_1",degree:0,coords:new X(0,0)}),f=()=>new ct("Blue","T_3",30,30,5,1,200,600,{model:"gun_3",degree:0,coords:new X(0,0)}),g="red"===this.settings.team?this.settings.position:this.settings.position+4,A=[o(),o(),o(),o(),f(),f(),f(),f()];return A.splice(g,1,(()=>new ti(this.control,"user",this.settings))()),A}destroy(){this.animationFrameRef&&(cancelAnimationFrame(this.animationFrameRef),Array.from(this.game.sound.sounds.values()).forEach(s=>{s.pause(),s.currentTime=0}))}}var Nt=ht(9865),St=ht(9670),J=ht(6796),Vi=ht(3941),mn=ht(1928),ji=ht(1588);const _n=["demoPanel"],Wn=["canvas"],bn=[{path:"",component:(()=>{class S{constructor(o,f,g){this.demoService=o,this.lsService=f,this.router=g}ngOnInit(){localStorage.getItem(Nt.$.inDemo)&&this.router.navigate([St.RK.HOME]).then()}onClose(){this.router.navigate([St.RK.HOME]).then()}ngAfterViewInit(){if(!localStorage.getItem(Nt.$.inDemo)){this.lsService.setItem(Nt.$.inDemo,"inDemo");const o=this.demoPanelRef.nativeElement,f=this.canvasRef.nativeElement;o.clientHeight>o.clientWidth?(f.width=o.clientHeight-160,f.height=o.clientWidth-10,f.style.transform="rotate(90deg)"):(f.width=o.clientWidth-160,f.height=o.clientHeight-10),this.startGame(f),onbeforeunload=()=>{this.game&&this.game.destroy()}}}ngOnDestroy(){localStorage.removeItem(Nt.$.inDemo),this.game&&this.game.destroy()}startGame(o){this.game=new Et(o,this.demoService.demoSettings),this.game.run()}}return S.\u0275fac=function(o){return new(o||S)(J.Y36(Vi.e),J.Y36(mn.n),J.Y36(ji.F0))},S.\u0275cmp=J.Xpm({type:S,selectors:[["app-demo"]],viewQuery:function(o,f){if(1&o&&(J.Gf(_n,5),J.Gf(Wn,5)),2&o){let g;J.iGM(g=J.CRH())&&(f.demoPanelRef=g.first),J.iGM(g=J.CRH())&&(f.canvasRef=g.first)}},decls:7,vars:0,consts:[[1,"wrapper"],[1,"back-link",3,"click"],[1,"demo-panel"],["demoPanel",""],[1,"demo-canvas"],["canvas",""]],template:function(o,f){1&o&&(J.TgZ(0,"div",0)(1,"div",1),J.NdJ("click",function(){return f.onClose()}),J._uU(2,"Close Demo"),J.qZA(),J.TgZ(3,"div",2,3),J._UZ(5,"canvas",4,5),J.qZA()())},styles:["@keyframes make_visible_move_right_on_start{0%{left:0;transform:translate(-100%,-50%)}to{left:0;transform:translateY(-50%)}}@keyframes make_hidden_move_left_from_start{0%{left:0;transform:translateY(-50%)}to{left:0;transform:translate(-100%,-50%)}}@keyframes make_visible_move_right_on_center{0%{left:0;transform:translate(-100%,-50%)}to{left:50%;transform:translate(-50%,-50%)}}@keyframes make_hidden_move_left_from_center{0%{left:50%;transform:translate(-50%,-50%)}to{left:0;transform:translate(-100%,-50%)}}@keyframes make_visible_move_right_on_end{0%{left:0;transform:translate(-100%,-50%)}to{left:100%;transform:translate(-100%,-50%)}}@keyframes make_hidden_move_left_from_end{0%{left:100%;transform:translate(-100%,-50%)}to{left:0;transform:translate(-100%,-50%)}}@keyframes make_visible_move_left_on_end{0%{left:100%;transform:translateY(-50%)}to{left:100%;transform:translate(-100%,-50%)}}@keyframes make_hidden_move_right_from_end{0%{left:100%;transform:translate(-100%,-50%)}to{left:100%;transform:translateY(-50%)}}@keyframes make_visible_move_left_on_center{0%{left:100%;transform:translateY(-50%)}to{left:50%;transform:translate(-50%,-50%)}}@keyframes make_hidden_move_right_from_center{0%{left:50%;transform:translate(-50%,-50%)}to{left:100%;transform:translateY(-50%)}}@keyframes make_visible_move_left_on_start{0%{left:100%;transform:translateY(-50%)}to{left:0;transform:translateY(-50%)}}@keyframes make_hidden_move_right_from_start{0%{left:0;transform:translateY(-50%)}to{left:100%;transform:translateY(-50%)}}@keyframes switch-blue{0%{left:0;right:50%}to{left:50%;right:0}}@keyframes switch-red{0%{left:50%;right:0}to{left:0;right:50%}}.wrapper[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden;position:relative}.wrapper[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{color:#ce9f25;font-size:14px;font-weight:700;padding:5px;background:#1E1E1E;border-radius:5px;cursor:pointer;position:absolute;top:10px;left:20px;z-index:10}.wrapper[_ngcontent-%COMP%]   .demo-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;margin:0;width:100%;height:100%}.wrapper[_ngcontent-%COMP%]   .demo-panel[_ngcontent-%COMP%]   .demo-canvas[_ngcontent-%COMP%]{border:2px solid #EB3636;cursor:url(cursor.8e939e809d527865.png) 20 20,auto}"]}),S})()}];let vn=(()=>{class S{}return S.\u0275fac=function(o){return new(o||S)},S.\u0275mod=J.oAB({type:S}),S.\u0275inj=J.cJS({imports:[Ei.ez,ji.Bz.forChild(bn),ji.Bz]}),S})(),ii=(()=>{class S{}return S.\u0275fac=function(o){return new(o||S)},S.\u0275mod=J.oAB({type:S}),S.\u0275inj=J.cJS({imports:[Ei.ez,vn]}),S})()}}]);