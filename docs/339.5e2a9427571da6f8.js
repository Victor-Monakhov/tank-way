(self.webpackChunktanks=self.webpackChunktanks||[]).push([[339],{3815:function(oi,ai,vt){var Xi;oi=vt.nmd(oi),function(){var h,gt="Expected a function",I="__lodash_hash_undefined__",li="__lodash_placeholder__",Qt=1/0,Kt=9007199254740991,s=NaN,a=4294967295,k=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],F="[object Arguments]",z="[object Array]",U="[object Boolean]",ht="[object Date]",ve="[object Error]",Ie="[object Function]",Ds="[object GeneratorFunction]",Ht="[object Map]",Ji="[object Number]",Vt="[object Object]",Fs="[object Promise]",Qi="[object RegExp]",Ot="[object Set]",Vi="[object String]",ye="[object Symbol]",ji="[object WeakMap]",te="[object ArrayBuffer]",Ui="[object DataView]",bn="[object Float32Array]",vn="[object Float64Array]",In="[object Int8Array]",yn="[object Int16Array]",An="[object Int32Array]",Cn="[object Uint8Array]",kn="[object Uint8ClampedArray]",xn="[object Uint16Array]",Rn="[object Uint32Array]",yu=/\b__p \+= '';/g,Au=/\b(__p \+=) '' \+/g,Cu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Gs=/&(?:amp|lt|gt|quot|#39);/g,Ns=/[&<>"']/g,ku=RegExp(Gs.source),xu=RegExp(Ns.source),Ru=/<%-([\s\S]+?)%>/g,Tu=/<%([\s\S]+?)%>/g,$s=/<%=([\s\S]+?)%>/g,Mu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yu=/^\w*$/,Xu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tn=/[\\^$.*+?()[\]{}|]/g,Eu=RegExp(Tn.source),Mn=/^\s+/,Uu=/\s/,Su=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bu=/\{\n\/\* \[wrapped with (.+)\] \*/,Lu=/,? & /,Pu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hu=/[()=,{}\[\]\/\s]/,Ou=/\\(\\)?/g,Du=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ks=/\w*$/,Fu=/^[-+]0x[0-9a-f]+$/i,Gu=/^0b[01]+$/i,Nu=/^\[object .+?Constructor\]$/,$u=/^0o[0-7]+$/i,Ku=/^(?:0|[1-9]\d*)$/,qu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ae=/($^)/,zu=/['\n\r\u2028\u2029\\]/g,Ce="\\ud800-\\udfff",qs="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",zs="\\u2700-\\u27bf",Zs="a-z\\xdf-\\xf6\\xf8-\\xff",Js="A-Z\\xc0-\\xd6\\xd8-\\xde",Qs="\\ufe0e\\ufe0f",Vs="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",eo="["+Ce+"]",js="["+Vs+"]",ke="["+qs+"]",tr="\\d+",no="["+zs+"]",ir="["+Zs+"]",er="[^"+Ce+Vs+tr+zs+Zs+Js+"]",Xn="\\ud83c[\\udffb-\\udfff]",nr="[^"+Ce+"]",En="(?:\\ud83c[\\udde6-\\uddff]){2}",Un="[\\ud800-\\udbff][\\udc00-\\udfff]",Si="["+Js+"]",rr="(?:"+ir+"|"+er+")",ro="(?:"+Si+"|"+er+")",hr="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ur="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",or="(?:"+ke+"|"+Xn+")?",ar="["+Qs+"]?",lr=ar+or+"(?:\\u200d(?:"+[nr,En,Un].join("|")+")"+ar+or+")*",ao="(?:"+[no,En,Un].join("|")+")"+lr,lo="(?:"+[nr+ke+"?",ke,En,Un,eo].join("|")+")",fo=RegExp("['\u2019]","g"),co=RegExp(ke,"g"),Sn=RegExp(Xn+"(?="+Xn+")|"+lo+lr,"g"),po=RegExp([Si+"?"+ir+"+"+hr+"(?="+[js,Si,"$"].join("|")+")",ro+"+"+ur+"(?="+[js,Si+rr,"$"].join("|")+")",Si+"?"+rr+"+"+hr,Si+"+"+ur,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tr,ao].join("|"),"g"),go=RegExp("[\\u200d"+Ce+qs+Qs+"]"),mo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_o=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wo=-1,Z={};Z[bn]=Z[vn]=Z[In]=Z[yn]=Z[An]=Z[Cn]=Z[kn]=Z[xn]=Z[Rn]=!0,Z[F]=Z[z]=Z[te]=Z[U]=Z[Ui]=Z[ht]=Z[ve]=Z[Ie]=Z[Ht]=Z[Ji]=Z[Vt]=Z[Qi]=Z[Ot]=Z[Vi]=Z[ji]=!1;var q={};q[F]=q[z]=q[te]=q[Ui]=q[U]=q[ht]=q[bn]=q[vn]=q[In]=q[yn]=q[An]=q[Ht]=q[Ji]=q[Vt]=q[Qi]=q[Ot]=q[Vi]=q[ye]=q[Cn]=q[kn]=q[xn]=q[Rn]=!0,q[ve]=q[Ie]=q[ji]=!1;var Io={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yo=parseFloat,Ao=parseInt,fr="object"==typeof global&&global&&global.Object===Object&&global,Co="object"==typeof self&&self&&self.Object===Object&&self,ot=fr||Co||Function("return this")(),dr=ai&&!ai.nodeType&&ai,ie=dr&&oi&&!oi.nodeType&&oi,cr=ie&&ie.exports===dr,Bn=cr&&fr.process,Yt=function(){try{return ie&&ie.require&&ie.require("util").types||Bn&&Bn.binding&&Bn.binding("util")}catch{}}(),pr=Yt&&Yt.isArrayBuffer,gr=Yt&&Yt.isDate,mr=Yt&&Yt.isMap,_r=Yt&&Yt.isRegExp,Wr=Yt&&Yt.isSet,wr=Yt&&Yt.isTypedArray;function yt(d,m,g){switch(g.length){case 0:return d.call(m);case 1:return d.call(m,g[0]);case 2:return d.call(m,g[0],g[1]);case 3:return d.call(m,g[0],g[1],g[2])}return d.apply(m,g)}function ko(d,m,g,C){for(var E=-1,G=null==d?0:d.length;++E<G;){var st=d[E];m(C,st,g(st),d)}return C}function Xt(d,m){for(var g=-1,C=null==d?0:d.length;++g<C&&!1!==m(d[g],g,d););return d}function xo(d,m){for(var g=null==d?0:d.length;g--&&!1!==m(d[g],g,d););return d}function br(d,m){for(var g=-1,C=null==d?0:d.length;++g<C;)if(!m(d[g],g,d))return!1;return!0}function pi(d,m){for(var g=-1,C=null==d?0:d.length,E=0,G=[];++g<C;){var st=d[g];m(st,g,d)&&(G[E++]=st)}return G}function xe(d,m){return!(null==d||!d.length)&&Bi(d,m,0)>-1}function Ln(d,m,g){for(var C=-1,E=null==d?0:d.length;++C<E;)if(g(m,d[C]))return!0;return!1}function J(d,m){for(var g=-1,C=null==d?0:d.length,E=Array(C);++g<C;)E[g]=m(d[g],g,d);return E}function gi(d,m){for(var g=-1,C=m.length,E=d.length;++g<C;)d[E+g]=m[g];return d}function Pn(d,m,g,C){var E=-1,G=null==d?0:d.length;for(C&&G&&(g=d[++E]);++E<G;)g=m(g,d[E],E,d);return g}function Ro(d,m,g,C){var E=null==d?0:d.length;for(C&&E&&(g=d[--E]);E--;)g=m(g,d[E],E,d);return g}function Hn(d,m){for(var g=-1,C=null==d?0:d.length;++g<C;)if(m(d[g],g,d))return!0;return!1}var To=On("length");function vr(d,m,g){var C;return g(d,function(E,G,st){if(m(E,G,st))return C=G,!1}),C}function Re(d,m,g,C){for(var E=d.length,G=g+(C?1:-1);C?G--:++G<E;)if(m(d[G],G,d))return G;return-1}function Bi(d,m,g){return m==m?function Go(d,m,g){for(var C=g-1,E=d.length;++C<E;)if(d[C]===m)return C;return-1}(d,m,g):Re(d,Ir,g)}function Xo(d,m,g,C){for(var E=g-1,G=d.length;++E<G;)if(C(d[E],m))return E;return-1}function Ir(d){return d!=d}function yr(d,m){var g=null==d?0:d.length;return g?Fn(d,m)/g:s}function On(d){return function(m){return null==m?h:m[d]}}function Dn(d){return function(m){return null==d?h:d[m]}}function Ar(d,m,g,C,E){return E(d,function(G,st,K){g=C?(C=!1,G):m(g,G,st,K)}),g}function Fn(d,m){for(var g,C=-1,E=d.length;++C<E;){var G=m(d[C]);G!==h&&(g=g===h?G:g+G)}return g}function Gn(d,m){for(var g=-1,C=Array(d);++g<d;)C[g]=m(g);return C}function Cr(d){return d&&d.slice(0,Tr(d)+1).replace(Mn,"")}function At(d){return function(m){return d(m)}}function Nn(d,m){return J(m,function(g){return d[g]})}function ee(d,m){return d.has(m)}function kr(d,m){for(var g=-1,C=d.length;++g<C&&Bi(m,d[g],0)>-1;);return g}function xr(d,m){for(var g=d.length;g--&&Bi(m,d[g],0)>-1;);return g}function So(d,m){for(var g=d.length,C=0;g--;)d[g]===m&&++C;return C}var Bo=Dn({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Lo=Dn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Po(d){return"\\"+Io[d]}function Li(d){return go.test(d)}function $n(d){var m=-1,g=Array(d.size);return d.forEach(function(C,E){g[++m]=[E,C]}),g}function Rr(d,m){return function(g){return d(m(g))}}function mi(d,m){for(var g=-1,C=d.length,E=0,G=[];++g<C;){var st=d[g];(st===m||st===li)&&(d[g]=li,G[E++]=g)}return G}function Te(d){var m=-1,g=Array(d.size);return d.forEach(function(C){g[++m]=C}),g}function Pi(d){return Li(d)?function Ko(d){for(var m=Sn.lastIndex=0;Sn.test(d);)++m;return m}(d):To(d)}function Dt(d){return Li(d)?function qo(d){return d.match(Sn)||[]}(d):function Mo(d){return d.split("")}(d)}function Tr(d){for(var m=d.length;m--&&Uu.test(d.charAt(m)););return m}var $o=Dn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Me=function d(m){var t,g=(m=null==m?ot:Me.defaults(ot.Object(),m,Me.pick(ot,_o))).Array,C=m.Date,E=m.Error,G=m.Function,st=m.Math,K=m.Object,Kn=m.RegExp,Jo=m.String,Et=m.TypeError,Ye=g.prototype,Hi=K.prototype,Xe=m["__core-js_shared__"],Ee=G.prototype.toString,$=Hi.hasOwnProperty,Vo=0,Mr=(t=/[^.]+$/.exec(Xe&&Xe.keys&&Xe.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",Ue=Hi.toString,jo=Ee.call(K),ta=ot._,ia=Kn("^"+Ee.call($).replace(Tn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Se=cr?m.Buffer:h,_i=m.Symbol,Be=m.Uint8Array,Yr=Se?Se.allocUnsafe:h,Le=Rr(K.getPrototypeOf,K),Xr=K.create,Er=Hi.propertyIsEnumerable,Pe=Ye.splice,Ur=_i?_i.isConcatSpreadable:h,ne=_i?_i.iterator:h,Ai=_i?_i.toStringTag:h,He=function(){try{var t=Ti(K,"defineProperty");return t({},"",{}),t}catch{}}(),ea=m.clearTimeout!==ot.clearTimeout&&m.clearTimeout,na=C&&C.now!==ot.Date.now&&C.now,sa=m.setTimeout!==ot.setTimeout&&m.setTimeout,Oe=st.ceil,De=st.floor,qn=K.getOwnPropertySymbols,ra=Se?Se.isBuffer:h,Sr=m.isFinite,ha=Ye.join,ua=Rr(K.keys,K),rt=st.max,lt=st.min,oa=C.now,aa=m.parseInt,Br=st.random,la=Ye.reverse,zn=Ti(m,"DataView"),se=Ti(m,"Map"),Zn=Ti(m,"Promise"),Oi=Ti(m,"Set"),re=Ti(m,"WeakMap"),he=Ti(K,"create"),Fe=re&&new re,Di={},fa=Mi(zn),da=Mi(se),ca=Mi(Zn),pa=Mi(Oi),ga=Mi(re),Ge=_i?_i.prototype:h,ue=Ge?Ge.valueOf:h,Lr=Ge?Ge.toString:h;function u(t){if(V(t)&&!S(t)&&!(t instanceof O)){if(t instanceof Ut)return t;if($.call(t,"__wrapped__"))return Ph(t)}return new Ut(t)}var Fi=function(){function t(){}return function(i){if(!Q(i))return{};if(Xr)return Xr(i);t.prototype=i;var e=new t;return t.prototype=h,e}}();function Ne(){}function Ut(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=h}function O(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}function Ci(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}function jt(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}function ti(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}function ki(t){var i=-1,e=null==t?0:t.length;for(this.__data__=new ti;++i<e;)this.add(t[i])}function Ft(t){var i=this.__data__=new jt(t);this.size=i.size}function Pr(t,i){var e=S(t),n=!e&&Yi(t),r=!e&&!n&&Ii(t),o=!e&&!n&&!r&&Ki(t),l=e||n||r||o,f=l?Gn(t.length,Jo):[],p=f.length;for(var w in t)(i||$.call(t,w))&&(!l||!("length"==w||r&&("offset"==w||"parent"==w)||o&&("buffer"==w||"byteLength"==w||"byteOffset"==w)||si(w,p)))&&f.push(w);return f}function Hr(t){var i=t.length;return i?t[hs(0,i-1)]:h}function Da(t,i){return rn(_t(t),xi(i,0,t.length))}function Fa(t){return rn(_t(t))}function Jn(t,i,e){(e!==h&&!Gt(t[i],e)||e===h&&!(i in t))&&ii(t,i,e)}function oe(t,i,e){var n=t[i];(!$.call(t,i)||!Gt(n,e)||e===h&&!(i in t))&&ii(t,i,e)}function $e(t,i){for(var e=t.length;e--;)if(Gt(t[e][0],i))return e;return-1}function Ga(t,i,e,n){return Wi(t,function(r,o,l){i(n,r,e(r),l)}),n}function Or(t,i){return t&&zt(i,ut(i),t)}function ii(t,i,e){"__proto__"==i&&He?He(t,i,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[i]=e}function Qn(t,i){for(var e=-1,n=i.length,r=g(n),o=null==t;++e<n;)r[e]=o?h:Ys(t,i[e]);return r}function xi(t,i,e){return t==t&&(e!==h&&(t=t<=e?t:e),i!==h&&(t=t>=i?t:i)),t}function St(t,i,e,n,r,o){var l,f=1&i,p=2&i,w=4&i;if(e&&(l=r?e(t,n,r,o):e(t)),l!==h)return l;if(!Q(t))return t;var b=S(t);if(b){if(l=function Xl(t){var i=t.length,e=new t.constructor(i);return i&&"string"==typeof t[0]&&$.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!f)return _t(t,l)}else{var v=ft(t),A=v==Ie||v==Ds;if(Ii(t))return lh(t,f);if(v==Vt||v==F||A&&!r){if(l=p||A?{}:Th(t),!f)return p?function vl(t,i){return zt(t,xh(t),i)}(t,function Na(t,i){return t&&zt(i,wt(i),t)}(l,t)):function bl(t,i){return zt(t,bs(t),i)}(t,Or(l,t))}else{if(!q[v])return r?t:{};l=function El(t,i,e){var n=t.constructor;switch(i){case te:return cs(t);case U:case ht:return new n(+t);case Ui:return function ml(t,i){var e=i?cs(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case bn:case vn:case In:case yn:case An:case Cn:case kn:case xn:case Rn:return fh(t,e);case Ht:return new n;case Ji:case Vi:return new n(t);case Qi:return function _l(t){var i=new t.constructor(t.source,Ks.exec(t));return i.lastIndex=t.lastIndex,i}(t);case Ot:return new n;case ye:return function Wl(t){return ue?K(ue.call(t)):{}}(t)}}(t,v,f)}}o||(o=new Ft);var x=o.get(t);if(x)return x;o.set(t,l),su(t)?t.forEach(function(Y){l.add(St(Y,i,e,Y,t,o))}):eu(t)&&t.forEach(function(Y,H){l.set(H,St(Y,i,e,H,t,o))});var L=b?h:(w?p?_s:ms:p?wt:ut)(t);return Xt(L||t,function(Y,H){L&&(Y=t[H=Y]),oe(l,H,St(Y,i,e,H,t,o))}),l}function Dr(t,i,e){var n=e.length;if(null==t)return!n;for(t=K(t);n--;){var r=e[n],l=t[r];if(l===h&&!(r in t)||!(0,i[r])(l))return!1}return!0}function Fr(t,i,e){if("function"!=typeof t)throw new Et(gt);return ge(function(){t.apply(h,e)},i)}function ae(t,i,e,n){var r=-1,o=xe,l=!0,f=t.length,p=[],w=i.length;if(!f)return p;e&&(i=J(i,At(e))),n?(o=Ln,l=!1):i.length>=200&&(o=ee,l=!1,i=new ki(i));t:for(;++r<f;){var b=t[r],v=null==e?b:e(b);if(b=n||0!==b?b:0,l&&v==v){for(var A=w;A--;)if(i[A]===v)continue t;p.push(b)}else o(i,v,n)||p.push(b)}return p}u.templateSettings={escape:Ru,evaluate:Tu,interpolate:$s,variable:"",imports:{_:u}},(u.prototype=Ne.prototype).constructor=u,(Ut.prototype=Fi(Ne.prototype)).constructor=Ut,(O.prototype=Fi(Ne.prototype)).constructor=O,Ci.prototype.clear=function wa(){this.__data__=he?he(null):{},this.size=0},Ci.prototype.delete=function ba(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i},Ci.prototype.get=function va(t){var i=this.__data__;if(he){var e=i[t];return e===I?h:e}return $.call(i,t)?i[t]:h},Ci.prototype.has=function Ia(t){var i=this.__data__;return he?i[t]!==h:$.call(i,t)},Ci.prototype.set=function ya(t,i){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=he&&i===h?I:i,this},jt.prototype.clear=function Aa(){this.__data__=[],this.size=0},jt.prototype.delete=function Ca(t){var i=this.__data__,e=$e(i,t);return!(e<0||(e==i.length-1?i.pop():Pe.call(i,e,1),--this.size,0))},jt.prototype.get=function ka(t){var i=this.__data__,e=$e(i,t);return e<0?h:i[e][1]},jt.prototype.has=function xa(t){return $e(this.__data__,t)>-1},jt.prototype.set=function Ra(t,i){var e=this.__data__,n=$e(e,t);return n<0?(++this.size,e.push([t,i])):e[n][1]=i,this},ti.prototype.clear=function Ta(){this.size=0,this.__data__={hash:new Ci,map:new(se||jt),string:new Ci}},ti.prototype.delete=function Ma(t){var i=sn(this,t).delete(t);return this.size-=i?1:0,i},ti.prototype.get=function Ya(t){return sn(this,t).get(t)},ti.prototype.has=function Xa(t){return sn(this,t).has(t)},ti.prototype.set=function Ea(t,i){var e=sn(this,t),n=e.size;return e.set(t,i),this.size+=e.size==n?0:1,this},ki.prototype.add=ki.prototype.push=function Ua(t){return this.__data__.set(t,I),this},ki.prototype.has=function Sa(t){return this.__data__.has(t)},Ft.prototype.clear=function Ba(){this.__data__=new jt,this.size=0},Ft.prototype.delete=function La(t){var i=this.__data__,e=i.delete(t);return this.size=i.size,e},Ft.prototype.get=function Pa(t){return this.__data__.get(t)},Ft.prototype.has=function Ha(t){return this.__data__.has(t)},Ft.prototype.set=function Oa(t,i){var e=this.__data__;if(e instanceof jt){var n=e.__data__;if(!se||n.length<199)return n.push([t,i]),this.size=++e.size,this;e=this.__data__=new ti(n)}return e.set(t,i),this.size=e.size,this};var Wi=gh(qt),Gr=gh(jn,!0);function Ka(t,i){var e=!0;return Wi(t,function(n,r,o){return e=!!i(n,r,o)}),e}function Ke(t,i,e){for(var n=-1,r=t.length;++n<r;){var o=t[n],l=i(o);if(null!=l&&(f===h?l==l&&!kt(l):e(l,f)))var f=l,p=o}return p}function Nr(t,i){var e=[];return Wi(t,function(n,r,o){i(n,r,o)&&e.push(n)}),e}function at(t,i,e,n,r){var o=-1,l=t.length;for(e||(e=Sl),r||(r=[]);++o<l;){var f=t[o];i>0&&e(f)?i>1?at(f,i-1,e,n,r):gi(r,f):n||(r[r.length]=f)}return r}var Vn=mh(),$r=mh(!0);function qt(t,i){return t&&Vn(t,i,ut)}function jn(t,i){return t&&$r(t,i,ut)}function qe(t,i){return pi(i,function(e){return ri(t[e])})}function Ri(t,i){for(var e=0,n=(i=bi(i,t)).length;null!=t&&e<n;)t=t[Zt(i[e++])];return e&&e==n?t:h}function Kr(t,i,e){var n=i(t);return S(t)?n:gi(n,e(t))}function dt(t){return null==t?t===h?"[object Undefined]":"[object Null]":Ai&&Ai in K(t)?function Tl(t){var i=$.call(t,Ai),e=t[Ai];try{t[Ai]=h;var n=!0}catch{}var r=Ue.call(t);return n&&(i?t[Ai]=e:delete t[Ai]),r}(t):function Fl(t){return Ue.call(t)}(t)}function ts(t,i){return t>i}function za(t,i){return null!=t&&$.call(t,i)}function Za(t,i){return null!=t&&i in K(t)}function is(t,i,e){for(var n=e?Ln:xe,r=t[0].length,o=t.length,l=o,f=g(o),p=1/0,w=[];l--;){var b=t[l];l&&i&&(b=J(b,At(i))),p=lt(b.length,p),f[l]=!e&&(i||r>=120&&b.length>=120)?new ki(l&&b):h}b=t[0];var v=-1,A=f[0];t:for(;++v<r&&w.length<p;){var x=b[v],M=i?i(x):x;if(x=e||0!==x?x:0,!(A?ee(A,M):n(w,M,e))){for(l=o;--l;){var L=f[l];if(!(L?ee(L,M):n(t[l],M,e)))continue t}A&&A.push(M),w.push(x)}}return w}function le(t,i,e){var n=null==(t=Eh(t,i=bi(i,t)))?t:t[Zt(Lt(i))];return null==n?h:yt(n,t,e)}function qr(t){return V(t)&&dt(t)==F}function fe(t,i,e,n,r){return t===i||(null==t||null==i||!V(t)&&!V(i)?t!=t&&i!=i:function tl(t,i,e,n,r,o){var l=S(t),f=S(i),p=l?z:ft(t),w=f?z:ft(i),b=(p=p==F?Vt:p)==Vt,v=(w=w==F?Vt:w)==Vt,A=p==w;if(A&&Ii(t)){if(!Ii(i))return!1;l=!0,b=!1}if(A&&!b)return o||(o=new Ft),l||Ki(t)?kh(t,i,e,n,r,o):function xl(t,i,e,n,r,o,l){switch(e){case Ui:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case te:return!(t.byteLength!=i.byteLength||!o(new Be(t),new Be(i)));case U:case ht:case Ji:return Gt(+t,+i);case ve:return t.name==i.name&&t.message==i.message;case Qi:case Vi:return t==i+"";case Ht:var f=$n;case Ot:if(f||(f=Te),t.size!=i.size&&!(1&n))return!1;var w=l.get(t);if(w)return w==i;n|=2,l.set(t,i);var b=kh(f(t),f(i),n,r,o,l);return l.delete(t),b;case ye:if(ue)return ue.call(t)==ue.call(i)}return!1}(t,i,p,e,n,r,o);if(!(1&e)){var x=b&&$.call(t,"__wrapped__"),M=v&&$.call(i,"__wrapped__");if(x||M){var L=x?t.value():t,Y=M?i.value():i;return o||(o=new Ft),r(L,Y,e,n,o)}}return!!A&&(o||(o=new Ft),function Rl(t,i,e,n,r,o){var l=1&e,f=ms(t),p=f.length;if(p!=ms(i).length&&!l)return!1;for(var v=p;v--;){var A=f[v];if(!(l?A in i:$.call(i,A)))return!1}var x=o.get(t),M=o.get(i);if(x&&M)return x==i&&M==t;var L=!0;o.set(t,i),o.set(i,t);for(var Y=l;++v<p;){var H=t[A=f[v]],D=i[A];if(n)var xt=l?n(D,H,A,i,t,o):n(H,D,A,t,i,o);if(!(xt===h?H===D||r(H,D,e,n,o):xt)){L=!1;break}Y||(Y="constructor"==A)}if(L&&!Y){var pt=t.constructor,Rt=i.constructor;pt!=Rt&&"constructor"in t&&"constructor"in i&&!("function"==typeof pt&&pt instanceof pt&&"function"==typeof Rt&&Rt instanceof Rt)&&(L=!1)}return o.delete(t),o.delete(i),L}(t,i,e,n,r,o))}(t,i,e,n,fe,r))}function es(t,i,e,n){var r=e.length,o=r,l=!n;if(null==t)return!o;for(t=K(t);r--;){var f=e[r];if(l&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++r<o;){var p=(f=e[r])[0],w=t[p],b=f[1];if(l&&f[2]){if(w===h&&!(p in t))return!1}else{var v=new Ft;if(n)var A=n(w,b,p,t,i,v);if(!(A===h?fe(b,w,3,n,v):A))return!1}}return!0}function zr(t){return!(!Q(t)||function Ll(t){return!!Mr&&Mr in t}(t))&&(ri(t)?ia:Nu).test(Mi(t))}function Zr(t){return"function"==typeof t?t:null==t?bt:"object"==typeof t?S(t)?Vr(t[0],t[1]):Qr(t):_u(t)}function ns(t){if(!pe(t))return ua(t);var i=[];for(var e in K(t))$.call(t,e)&&"constructor"!=e&&i.push(e);return i}function ss(t,i){return t<i}function Jr(t,i){var e=-1,n=Wt(t)?g(t.length):[];return Wi(t,function(r,o,l){n[++e]=i(r,o,l)}),n}function Qr(t){var i=ws(t);return 1==i.length&&i[0][2]?Yh(i[0][0],i[0][1]):function(e){return e===t||es(e,t,i)}}function Vr(t,i){return vs(t)&&Mh(i)?Yh(Zt(t),i):function(e){var n=Ys(e,t);return n===h&&n===i?Xs(e,t):fe(i,n,3)}}function ze(t,i,e,n,r){t!==i&&Vn(i,function(o,l){if(r||(r=new Ft),Q(o))!function hl(t,i,e,n,r,o,l){var f=ys(t,e),p=ys(i,e),w=l.get(p);if(w)Jn(t,e,w);else{var b=o?o(f,p,e+"",t,i,l):h,v=b===h;if(v){var A=S(p),x=!A&&Ii(p),M=!A&&!x&&Ki(p);b=p,A||x||M?S(f)?b=f:tt(f)?b=_t(f):x?(v=!1,b=lh(p,!0)):M?(v=!1,b=fh(p,!0)):b=[]:me(p)||Yi(p)?(b=f,Yi(f)?b=uu(f):(!Q(f)||ri(f))&&(b=Th(p))):v=!1}v&&(l.set(p,b),r(b,p,n,o,l),l.delete(p)),Jn(t,e,b)}}(t,i,l,e,ze,n,r);else{var f=n?n(ys(t,l),o,l+"",t,i,r):h;f===h&&(f=o),Jn(t,l,f)}},wt)}function jr(t,i){var e=t.length;if(e)return si(i+=i<0?e:0,e)?t[i]:h}function th(t,i,e){i=i.length?J(i,function(o){return S(o)?function(l){return Ri(l,1===o.length?o[0]:o)}:o}):[bt];var n=-1;return i=J(i,At(T())),function Eo(d,m){var g=d.length;for(d.sort(m);g--;)d[g]=d[g].value;return d}(Jr(t,function(o,l,f){return{criteria:J(i,function(w){return w(o)}),index:++n,value:o}}),function(o,l){return function wl(t,i,e){for(var n=-1,r=t.criteria,o=i.criteria,l=r.length,f=e.length;++n<l;){var p=dh(r[n],o[n]);if(p)return n>=f?p:p*("desc"==e[n]?-1:1)}return t.index-i.index}(o,l,e)})}function ih(t,i,e){for(var n=-1,r=i.length,o={};++n<r;){var l=i[n],f=Ri(t,l);e(f,l)&&de(o,bi(l,t),f)}return o}function rs(t,i,e,n){var r=n?Xo:Bi,o=-1,l=i.length,f=t;for(t===i&&(i=_t(i)),e&&(f=J(t,At(e)));++o<l;)for(var p=0,w=i[o],b=e?e(w):w;(p=r(f,b,p,n))>-1;)f!==t&&Pe.call(f,p,1),Pe.call(t,p,1);return t}function eh(t,i){for(var e=t?i.length:0,n=e-1;e--;){var r=i[e];if(e==n||r!==o){var o=r;si(r)?Pe.call(t,r,1):as(t,r)}}return t}function hs(t,i){return t+De(Br()*(i-t+1))}function us(t,i){var e="";if(!t||i<1||i>Kt)return e;do{i%2&&(e+=t),(i=De(i/2))&&(t+=t)}while(i);return e}function P(t,i){return As(Xh(t,i,bt),t+"")}function ll(t){return Hr(qi(t))}function fl(t,i){var e=qi(t);return rn(e,xi(i,0,e.length))}function de(t,i,e,n){if(!Q(t))return t;for(var r=-1,o=(i=bi(i,t)).length,l=o-1,f=t;null!=f&&++r<o;){var p=Zt(i[r]),w=e;if("__proto__"===p||"constructor"===p||"prototype"===p)return t;if(r!=l){var b=f[p];(w=n?n(b,p,f):h)===h&&(w=Q(b)?b:si(i[r+1])?[]:{})}oe(f,p,w),f=f[p]}return t}var nh=Fe?function(t,i){return Fe.set(t,i),t}:bt,dl=He?function(t,i){return He(t,"toString",{configurable:!0,enumerable:!1,value:Us(i),writable:!0})}:bt;function cl(t){return rn(qi(t))}function Bt(t,i,e){var n=-1,r=t.length;i<0&&(i=-i>r?0:r+i),(e=e>r?r:e)<0&&(e+=r),r=i>e?0:e-i>>>0,i>>>=0;for(var o=g(r);++n<r;)o[n]=t[n+i];return o}function pl(t,i){var e;return Wi(t,function(n,r,o){return!(e=i(n,r,o))}),!!e}function Ze(t,i,e){var n=0,r=null==t?n:t.length;if("number"==typeof i&&i==i&&r<=2147483647){for(;n<r;){var o=n+r>>>1,l=t[o];null!==l&&!kt(l)&&(e?l<=i:l<i)?n=o+1:r=o}return r}return os(t,i,bt,e)}function os(t,i,e,n){var r=0,o=null==t?0:t.length;if(0===o)return 0;for(var l=(i=e(i))!=i,f=null===i,p=kt(i),w=i===h;r<o;){var b=De((r+o)/2),v=e(t[b]),A=v!==h,x=null===v,M=v==v,L=kt(v);if(l)var Y=n||M;else Y=w?M&&(n||A):f?M&&A&&(n||!x):p?M&&A&&!x&&(n||!L):!x&&!L&&(n?v<=i:v<i);Y?r=b+1:o=b}return lt(o,4294967294)}function sh(t,i){for(var e=-1,n=t.length,r=0,o=[];++e<n;){var l=t[e],f=i?i(l):l;if(!e||!Gt(f,p)){var p=f;o[r++]=0===l?0:l}}return o}function rh(t){return"number"==typeof t?t:kt(t)?s:+t}function Ct(t){if("string"==typeof t)return t;if(S(t))return J(t,Ct)+"";if(kt(t))return Lr?Lr.call(t):"";var i=t+"";return"0"==i&&1/t==-Qt?"-0":i}function wi(t,i,e){var n=-1,r=xe,o=t.length,l=!0,f=[],p=f;if(e)l=!1,r=Ln;else if(o>=200){var w=i?null:Cl(t);if(w)return Te(w);l=!1,r=ee,p=new ki}else p=i?[]:f;t:for(;++n<o;){var b=t[n],v=i?i(b):b;if(b=e||0!==b?b:0,l&&v==v){for(var A=p.length;A--;)if(p[A]===v)continue t;i&&p.push(v),f.push(b)}else r(p,v,e)||(p!==f&&p.push(v),f.push(b))}return f}function as(t,i){return null==(t=Eh(t,i=bi(i,t)))||delete t[Zt(Lt(i))]}function hh(t,i,e,n){return de(t,i,e(Ri(t,i)),n)}function Je(t,i,e,n){for(var r=t.length,o=n?r:-1;(n?o--:++o<r)&&i(t[o],o,t););return e?Bt(t,n?0:o,n?o+1:r):Bt(t,n?o+1:0,n?r:o)}function uh(t,i){var e=t;return e instanceof O&&(e=e.value()),Pn(i,function(n,r){return r.func.apply(r.thisArg,gi([n],r.args))},e)}function ls(t,i,e){var n=t.length;if(n<2)return n?wi(t[0]):[];for(var r=-1,o=g(n);++r<n;)for(var l=t[r],f=-1;++f<n;)f!=r&&(o[r]=ae(o[r]||l,t[f],i,e));return wi(at(o,1),i,e)}function oh(t,i,e){for(var n=-1,r=t.length,o=i.length,l={};++n<r;)e(l,t[n],n<o?i[n]:h);return l}function fs(t){return tt(t)?t:[]}function ds(t){return"function"==typeof t?t:bt}function bi(t,i){return S(t)?t:vs(t,i)?[t]:Lh(N(t))}var gl=P;function vi(t,i,e){var n=t.length;return e=e===h?n:e,!i&&e>=n?t:Bt(t,i,e)}var ah=ea||function(t){return ot.clearTimeout(t)};function lh(t,i){if(i)return t.slice();var e=t.length,n=Yr?Yr(e):new t.constructor(e);return t.copy(n),n}function cs(t){var i=new t.constructor(t.byteLength);return new Be(i).set(new Be(t)),i}function fh(t,i){var e=i?cs(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function dh(t,i){if(t!==i){var e=t!==h,n=null===t,r=t==t,o=kt(t),l=i!==h,f=null===i,p=i==i,w=kt(i);if(!f&&!w&&!o&&t>i||o&&l&&p&&!f&&!w||n&&l&&p||!e&&p||!r)return 1;if(!n&&!o&&!w&&t<i||w&&e&&r&&!n&&!o||f&&e&&r||!l&&r||!p)return-1}return 0}function ch(t,i,e,n){for(var r=-1,o=t.length,l=e.length,f=-1,p=i.length,w=rt(o-l,0),b=g(p+w),v=!n;++f<p;)b[f]=i[f];for(;++r<l;)(v||r<o)&&(b[e[r]]=t[r]);for(;w--;)b[f++]=t[r++];return b}function ph(t,i,e,n){for(var r=-1,o=t.length,l=-1,f=e.length,p=-1,w=i.length,b=rt(o-f,0),v=g(b+w),A=!n;++r<b;)v[r]=t[r];for(var x=r;++p<w;)v[x+p]=i[p];for(;++l<f;)(A||r<o)&&(v[x+e[l]]=t[r++]);return v}function _t(t,i){var e=-1,n=t.length;for(i||(i=g(n));++e<n;)i[e]=t[e];return i}function zt(t,i,e,n){var r=!e;e||(e={});for(var o=-1,l=i.length;++o<l;){var f=i[o],p=n?n(e[f],t[f],f,e,t):h;p===h&&(p=t[f]),r?ii(e,f,p):oe(e,f,p)}return e}function Qe(t,i){return function(e,n){var r=S(e)?ko:Ga,o=i?i():{};return r(e,t,T(n,2),o)}}function Gi(t){return P(function(i,e){var n=-1,r=e.length,o=r>1?e[r-1]:h,l=r>2?e[2]:h;for(o=t.length>3&&"function"==typeof o?(r--,o):h,l&&ct(e[0],e[1],l)&&(o=r<3?h:o,r=1),i=K(i);++n<r;){var f=e[n];f&&t(i,f,n,o)}return i})}function gh(t,i){return function(e,n){if(null==e)return e;if(!Wt(e))return t(e,n);for(var r=e.length,o=i?r:-1,l=K(e);(i?o--:++o<r)&&!1!==n(l[o],o,l););return e}}function mh(t){return function(i,e,n){for(var r=-1,o=K(i),l=n(i),f=l.length;f--;){var p=l[t?f:++r];if(!1===e(o[p],p,o))break}return i}}function _h(t){return function(i){var e=Li(i=N(i))?Dt(i):h,n=e?e[0]:i.charAt(0),r=e?vi(e,1).join(""):i.slice(1);return n[t]()+r}}function Ni(t){return function(i){return Pn(gu(pu(i).replace(fo,"")),t,"")}}function ce(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var e=Fi(t.prototype),n=t.apply(e,i);return Q(n)?n:e}}function Wh(t){return function(i,e,n){var r=K(i);if(!Wt(i)){var o=T(e,3);i=ut(i),e=function(f){return o(r[f],f,r)}}var l=t(i,e,n);return l>-1?r[o?i[l]:l]:h}}function wh(t){return ni(function(i){var e=i.length,n=e,r=Ut.prototype.thru;for(t&&i.reverse();n--;){var o=i[n];if("function"!=typeof o)throw new Et(gt);if(r&&!l&&"wrapper"==nn(o))var l=new Ut([],!0)}for(n=l?n:e;++n<e;){var f=nn(o=i[n]),p="wrapper"==f?Ws(o):h;l=p&&Is(p[0])&&424==p[1]&&!p[4].length&&1==p[9]?l[nn(p[0])].apply(l,p[3]):1==o.length&&Is(o)?l[f]():l.thru(o)}return function(){var w=arguments,b=w[0];if(l&&1==w.length&&S(b))return l.plant(b).value();for(var v=0,A=e?i[v].apply(this,w):b;++v<e;)A=i[v].call(this,A);return A}})}function Ve(t,i,e,n,r,o,l,f,p,w){var b=128&i,v=1&i,A=2&i,x=24&i,M=512&i,L=A?h:ce(t);return function Y(){for(var H=arguments.length,D=g(H),xt=H;xt--;)D[xt]=arguments[xt];if(x)var pt=$i(Y),Rt=So(D,pt);if(n&&(D=ch(D,n,r,x)),o&&(D=ph(D,o,l,x)),H-=Rt,x&&H<w){var it=mi(D,pt);return Ih(t,i,Ve,Y.placeholder,e,D,it,f,p,w-H)}var Nt=v?e:this,ui=A?Nt[t]:t;return H=D.length,f?D=Gl(D,f):M&&H>1&&D.reverse(),b&&p<H&&(D.length=p),this&&this!==ot&&this instanceof Y&&(ui=L||ce(ui)),ui.apply(Nt,D)}}function bh(t,i){return function(e,n){return function Qa(t,i,e,n){return qt(t,function(r,o,l){i(n,e(r),o,l)}),n}(e,t,i(n),{})}}function je(t,i){return function(e,n){var r;if(e===h&&n===h)return i;if(e!==h&&(r=e),n!==h){if(r===h)return n;"string"==typeof e||"string"==typeof n?(e=Ct(e),n=Ct(n)):(e=rh(e),n=rh(n)),r=t(e,n)}return r}}function ps(t){return ni(function(i){return i=J(i,At(T())),P(function(e){var n=this;return t(i,function(r){return yt(r,n,e)})})})}function tn(t,i){var e=(i=i===h?" ":Ct(i)).length;if(e<2)return e?us(i,t):i;var n=us(i,Oe(t/Pi(i)));return Li(i)?vi(Dt(n),0,t).join(""):n.slice(0,t)}function vh(t){return function(i,e,n){return n&&"number"!=typeof n&&ct(i,e,n)&&(e=n=h),i=hi(i),e===h?(e=i,i=0):e=hi(e),function al(t,i,e,n){for(var r=-1,o=rt(Oe((i-t)/(e||1)),0),l=g(o);o--;)l[n?o:++r]=t,t+=e;return l}(i,e,n=n===h?i<e?1:-1:hi(n),t)}}function en(t){return function(i,e){return"string"==typeof i&&"string"==typeof e||(i=Pt(i),e=Pt(e)),t(i,e)}}function Ih(t,i,e,n,r,o,l,f,p,w){var b=8&i;i|=b?32:64,4&(i&=~(b?64:32))||(i&=-4);var L=[t,i,r,b?o:h,b?l:h,b?h:o,b?h:l,f,p,w],Y=e.apply(h,L);return Is(t)&&Uh(Y,L),Y.placeholder=n,Sh(Y,t,i)}function gs(t){var i=st[t];return function(e,n){if(e=Pt(e),(n=null==n?0:lt(B(n),292))&&Sr(e)){var r=(N(e)+"e").split("e");return+((r=(N(i(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return i(e)}}var Cl=Oi&&1/Te(new Oi([,-0]))[1]==Qt?function(t){return new Oi(t)}:Ls;function yh(t){return function(i){var e=ft(i);return e==Ht?$n(i):e==Ot?function Fo(d){var m=-1,g=Array(d.size);return d.forEach(function(C){g[++m]=[C,C]}),g}(i):function Uo(d,m){return J(m,function(g){return[g,d[g]]})}(i,t(i))}}function ei(t,i,e,n,r,o,l,f){var p=2&i;if(!p&&"function"!=typeof t)throw new Et(gt);var w=n?n.length:0;if(w||(i&=-97,n=r=h),l=l===h?l:rt(B(l),0),f=f===h?f:B(f),w-=r?r.length:0,64&i){var b=n,v=r;n=r=h}var A=p?h:Ws(t),x=[t,i,e,n,r,b,v,o,l,f];if(A&&function Ol(t,i){var e=t[1],n=i[1],r=e|n;if(!(r<131||(128==n&&8==e||128==n&&256==e&&t[7].length<=i[8]||384==n&&i[7].length<=i[8]&&8==e)))return t;1&n&&(t[2]=i[2],r|=1&e?0:4);var f=i[3];if(f){var p=t[3];t[3]=p?ch(p,f,i[4]):f,t[4]=p?mi(t[3],li):i[4]}(f=i[5])&&(t[5]=(p=t[5])?ph(p,f,i[6]):f,t[6]=p?mi(t[5],li):i[6]),(f=i[7])&&(t[7]=f),128&n&&(t[8]=null==t[8]?i[8]:lt(t[8],i[8])),null==t[9]&&(t[9]=i[9]),t[0]=i[0],t[1]=r}(x,A),t=x[0],i=x[1],e=x[2],n=x[3],r=x[4],!(f=x[9]=x[9]===h?p?0:t.length:rt(x[9]-w,0))&&24&i&&(i&=-25),i&&1!=i)M=8==i||16==i?function yl(t,i,e){var n=ce(t);return function r(){for(var o=arguments.length,l=g(o),f=o,p=$i(r);f--;)l[f]=arguments[f];var w=o<3&&l[0]!==p&&l[o-1]!==p?[]:mi(l,p);return(o-=w.length)<e?Ih(t,i,Ve,r.placeholder,h,l,w,h,h,e-o):yt(this&&this!==ot&&this instanceof r?n:t,this,l)}}(t,i,f):32!=i&&33!=i||r.length?Ve.apply(h,x):function Al(t,i,e,n){var r=1&i,o=ce(t);return function l(){for(var f=-1,p=arguments.length,w=-1,b=n.length,v=g(b+p),A=this&&this!==ot&&this instanceof l?o:t;++w<b;)v[w]=n[w];for(;p--;)v[w++]=arguments[++f];return yt(A,r?e:this,v)}}(t,i,e,n);else var M=function Il(t,i,e){var n=1&i,r=ce(t);return function o(){return(this&&this!==ot&&this instanceof o?r:t).apply(n?e:this,arguments)}}(t,i,e);return Sh((A?nh:Uh)(M,x),t,i)}function Ah(t,i,e,n){return t===h||Gt(t,Hi[e])&&!$.call(n,e)?i:t}function Ch(t,i,e,n,r,o){return Q(t)&&Q(i)&&(o.set(i,t),ze(t,i,h,Ch,o),o.delete(i)),t}function kl(t){return me(t)?h:t}function kh(t,i,e,n,r,o){var l=1&e,f=t.length,p=i.length;if(f!=p&&!(l&&p>f))return!1;var w=o.get(t),b=o.get(i);if(w&&b)return w==i&&b==t;var v=-1,A=!0,x=2&e?new ki:h;for(o.set(t,i),o.set(i,t);++v<f;){var M=t[v],L=i[v];if(n)var Y=l?n(L,M,v,i,t,o):n(M,L,v,t,i,o);if(Y!==h){if(Y)continue;A=!1;break}if(x){if(!Hn(i,function(H,D){if(!ee(x,D)&&(M===H||r(M,H,e,n,o)))return x.push(D)})){A=!1;break}}else if(M!==L&&!r(M,L,e,n,o)){A=!1;break}}return o.delete(t),o.delete(i),A}function ni(t){return As(Xh(t,h,Dh),t+"")}function ms(t){return Kr(t,ut,bs)}function _s(t){return Kr(t,wt,xh)}var Ws=Fe?function(t){return Fe.get(t)}:Ls;function nn(t){for(var i=t.name+"",e=Di[i],n=$.call(Di,i)?e.length:0;n--;){var r=e[n],o=r.func;if(null==o||o==t)return r.name}return i}function $i(t){return($.call(u,"placeholder")?u:t).placeholder}function T(){var t=u.iteratee||Ss;return t=t===Ss?Zr:t,arguments.length?t(arguments[0],arguments[1]):t}function sn(t,i){var e=t.__data__;return function Bl(t){var i=typeof t;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t}(i)?e["string"==typeof i?"string":"hash"]:e.map}function ws(t){for(var i=ut(t),e=i.length;e--;){var n=i[e],r=t[n];i[e]=[n,r,Mh(r)]}return i}function Ti(t,i){var e=function Ho(d,m){return null==d?h:d[m]}(t,i);return zr(e)?e:h}var bs=qn?function(t){return null==t?[]:(t=K(t),pi(qn(t),function(i){return Er.call(t,i)}))}:Ps,xh=qn?function(t){for(var i=[];t;)gi(i,bs(t)),t=Le(t);return i}:Ps,ft=dt;function Rh(t,i,e){for(var n=-1,r=(i=bi(i,t)).length,o=!1;++n<r;){var l=Zt(i[n]);if(!(o=null!=t&&e(t,l)))break;t=t[l]}return o||++n!=r?o:!!(r=null==t?0:t.length)&&fn(r)&&si(l,r)&&(S(t)||Yi(t))}function Th(t){return"function"!=typeof t.constructor||pe(t)?{}:Fi(Le(t))}function Sl(t){return S(t)||Yi(t)||!!(Ur&&t&&t[Ur])}function si(t,i){var e=typeof t;return!!(i=i??Kt)&&("number"==e||"symbol"!=e&&Ku.test(t))&&t>-1&&t%1==0&&t<i}function ct(t,i,e){if(!Q(e))return!1;var n=typeof i;return!!("number"==n?Wt(e)&&si(i,e.length):"string"==n&&i in e)&&Gt(e[i],t)}function vs(t,i){if(S(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!kt(t))||Yu.test(t)||!Mu.test(t)||null!=i&&t in K(i)}function Is(t){var i=nn(t),e=u[i];if("function"!=typeof e||!(i in O.prototype))return!1;if(t===e)return!0;var n=Ws(e);return!!n&&t===n[0]}(zn&&ft(new zn(new ArrayBuffer(1)))!=Ui||se&&ft(new se)!=Ht||Zn&&ft(Zn.resolve())!=Fs||Oi&&ft(new Oi)!=Ot||re&&ft(new re)!=ji)&&(ft=function(t){var i=dt(t),e=i==Vt?t.constructor:h,n=e?Mi(e):"";if(n)switch(n){case fa:return Ui;case da:return Ht;case ca:return Fs;case pa:return Ot;case ga:return ji}return i});var Pl=Xe?ri:Hs;function pe(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||Hi)}function Mh(t){return t==t&&!Q(t)}function Yh(t,i){return function(e){return null!=e&&e[t]===i&&(i!==h||t in K(e))}}function Xh(t,i,e){return i=rt(i===h?t.length-1:i,0),function(){for(var n=arguments,r=-1,o=rt(n.length-i,0),l=g(o);++r<o;)l[r]=n[i+r];r=-1;for(var f=g(i+1);++r<i;)f[r]=n[r];return f[i]=e(l),yt(t,this,f)}}function Eh(t,i){return i.length<2?t:Ri(t,Bt(i,0,-1))}function Gl(t,i){for(var e=t.length,n=lt(i.length,e),r=_t(t);n--;){var o=i[n];t[n]=si(o,e)?r[o]:h}return t}function ys(t,i){if(("constructor"!==i||"function"!=typeof t[i])&&"__proto__"!=i)return t[i]}var Uh=Bh(nh),ge=sa||function(t,i){return ot.setTimeout(t,i)},As=Bh(dl);function Sh(t,i,e){var n=i+"";return As(t,function Ul(t,i){var e=i.length;if(!e)return t;var n=e-1;return i[n]=(e>1?"& ":"")+i[n],i=i.join(e>2?", ":" "),t.replace(Su,"{\n/* [wrapped with "+i+"] */\n")}(n,function Nl(t,i){return Xt(k,function(e){var n="_."+e[0];i&e[1]&&!xe(t,n)&&t.push(n)}),t.sort()}(function Yl(t){var i=t.match(Bu);return i?i[1].split(Lu):[]}(n),e)))}function Bh(t){var i=0,e=0;return function(){var n=oa(),r=16-(n-e);if(e=n,r>0){if(++i>=800)return arguments[0]}else i=0;return t.apply(h,arguments)}}function rn(t,i){var e=-1,n=t.length,r=n-1;for(i=i===h?n:i;++e<i;){var o=hs(e,r),l=t[o];t[o]=t[e],t[e]=l}return t.length=i,t}var Lh=function Hl(t){var i=an(t,function(n){return 500===e.size&&e.clear(),n}),e=i.cache;return i}(function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(Xu,function(e,n,r,o){i.push(r?o.replace(Ou,"$1"):n||e)}),i});function Zt(t){if("string"==typeof t||kt(t))return t;var i=t+"";return"0"==i&&1/t==-Qt?"-0":i}function Mi(t){if(null!=t){try{return Ee.call(t)}catch{}try{return t+""}catch{}}return""}function Ph(t){if(t instanceof O)return t.clone();var i=new Ut(t.__wrapped__,t.__chain__);return i.__actions__=_t(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}var zl=P(function(t,i){return tt(t)?ae(t,at(i,1,tt,!0)):[]}),Zl=P(function(t,i){var e=Lt(i);return tt(e)&&(e=h),tt(t)?ae(t,at(i,1,tt,!0),T(e,2)):[]}),Jl=P(function(t,i){var e=Lt(i);return tt(e)&&(e=h),tt(t)?ae(t,at(i,1,tt,!0),h,e):[]});function Hh(t,i,e){var n=null==t?0:t.length;if(!n)return-1;var r=null==e?0:B(e);return r<0&&(r=rt(n+r,0)),Re(t,T(i,3),r)}function Oh(t,i,e){var n=null==t?0:t.length;if(!n)return-1;var r=n-1;return e!==h&&(r=B(e),r=e<0?rt(n+r,0):lt(r,n-1)),Re(t,T(i,3),r,!0)}function Dh(t){return null!=t&&t.length?at(t,1):[]}function Fh(t){return t&&t.length?t[0]:h}var of=P(function(t){var i=J(t,fs);return i.length&&i[0]===t[0]?is(i):[]}),af=P(function(t){var i=Lt(t),e=J(t,fs);return i===Lt(e)?i=h:e.pop(),e.length&&e[0]===t[0]?is(e,T(i,2)):[]}),lf=P(function(t){var i=Lt(t),e=J(t,fs);return(i="function"==typeof i?i:h)&&e.pop(),e.length&&e[0]===t[0]?is(e,h,i):[]});function Lt(t){var i=null==t?0:t.length;return i?t[i-1]:h}var pf=P(Gh);function Gh(t,i){return t&&t.length&&i&&i.length?rs(t,i):t}var _f=ni(function(t,i){var e=null==t?0:t.length,n=Qn(t,i);return eh(t,J(i,function(r){return si(r,e)?+r:r}).sort(dh)),n});function Cs(t){return null==t?t:la.call(t)}var Ef=P(function(t){return wi(at(t,1,tt,!0))}),Uf=P(function(t){var i=Lt(t);return tt(i)&&(i=h),wi(at(t,1,tt,!0),T(i,2))}),Sf=P(function(t){var i=Lt(t);return i="function"==typeof i?i:h,wi(at(t,1,tt,!0),h,i)});function ks(t){if(!t||!t.length)return[];var i=0;return t=pi(t,function(e){if(tt(e))return i=rt(e.length,i),!0}),Gn(i,function(e){return J(t,On(e))})}function Nh(t,i){if(!t||!t.length)return[];var e=ks(t);return null==i?e:J(e,function(n){return yt(i,h,n)})}var Hf=P(function(t,i){return tt(t)?ae(t,i):[]}),Of=P(function(t){return ls(pi(t,tt))}),Df=P(function(t){var i=Lt(t);return tt(i)&&(i=h),ls(pi(t,tt),T(i,2))}),Ff=P(function(t){var i=Lt(t);return i="function"==typeof i?i:h,ls(pi(t,tt),h,i)}),Gf=P(ks),Kf=P(function(t){var i=t.length,e=i>1?t[i-1]:h;return e="function"==typeof e?(t.pop(),e):h,Nh(t,e)});function $h(t){var i=u(t);return i.__chain__=!0,i}function hn(t,i){return i(t)}var zf=ni(function(t){var i=t.length,e=i?t[0]:0,n=this.__wrapped__,r=function(o){return Qn(o,t)};return!(i>1||this.__actions__.length)&&n instanceof O&&si(e)?((n=n.slice(e,+e+(i?1:0))).__actions__.push({func:hn,args:[r],thisArg:h}),new Ut(n,this.__chain__).thru(function(o){return i&&!o.length&&o.push(h),o})):this.thru(r)}),ed=Qe(function(t,i,e){$.call(t,e)?++t[e]:ii(t,e,1)}),rd=Wh(Hh),hd=Wh(Oh);function Kh(t,i){return(S(t)?Xt:Wi)(t,T(i,3))}function qh(t,i){return(S(t)?xo:Gr)(t,T(i,3))}var ld=Qe(function(t,i,e){$.call(t,e)?t[e].push(i):ii(t,e,[i])}),dd=P(function(t,i,e){var n=-1,r="function"==typeof i,o=Wt(t)?g(t.length):[];return Wi(t,function(l){o[++n]=r?yt(i,l,e):le(l,i,e)}),o}),cd=Qe(function(t,i,e){ii(t,e,i)});function un(t,i){return(S(t)?J:Jr)(t,T(i,3))}var gd=Qe(function(t,i,e){t[e?0:1].push(i)},function(){return[[],[]]}),Ad=P(function(t,i){if(null==t)return[];var e=i.length;return e>1&&ct(t,i[0],i[1])?i=[]:e>2&&ct(i[0],i[1],i[2])&&(i=[i[0]]),th(t,at(i,1),[])}),on=na||function(){return ot.Date.now()};function zh(t,i,e){return i=e?h:i,ei(t,128,h,h,h,h,i=t&&null==i?t.length:i)}function Zh(t,i){var e;if("function"!=typeof i)throw new Et(gt);return t=B(t),function(){return--t>0&&(e=i.apply(this,arguments)),t<=1&&(i=h),e}}var xs=P(function(t,i,e){var n=1;if(e.length){var r=mi(e,$i(xs));n|=32}return ei(t,n,i,e,r)}),Jh=P(function(t,i,e){var n=3;if(e.length){var r=mi(e,$i(Jh));n|=32}return ei(i,n,t,e,r)});function jh(t,i,e){var n,r,o,l,f,p,w=0,b=!1,v=!1,A=!0;if("function"!=typeof t)throw new Et(gt);function x(it){var Nt=n,ui=r;return n=r=h,w=it,l=t.apply(ui,Nt)}function M(it){return w=it,f=ge(H,i),b?x(it):l}function Y(it){var Nt=it-p;return p===h||Nt>=i||Nt<0||v&&it-w>=o}function H(){var it=on();if(Y(it))return D(it);f=ge(H,function L(it){var Wu=i-(it-p);return v?lt(Wu,o-(it-w)):Wu}(it))}function D(it){return f=h,A&&n?x(it):(n=r=h,l)}function Rt(){var it=on(),Nt=Y(it);if(n=arguments,r=this,p=it,Nt){if(f===h)return M(p);if(v)return ah(f),f=ge(H,i),x(p)}return f===h&&(f=ge(H,i)),l}return i=Pt(i)||0,Q(e)&&(b=!!e.leading,o=(v="maxWait"in e)?rt(Pt(e.maxWait)||0,i):o,A="trailing"in e?!!e.trailing:A),Rt.cancel=function xt(){f!==h&&ah(f),w=0,n=p=r=f=h},Rt.flush=function pt(){return f===h?l:D(on())},Rt}var kd=P(function(t,i){return Fr(t,1,i)}),xd=P(function(t,i,e){return Fr(t,Pt(i)||0,e)});function an(t,i){if("function"!=typeof t||null!=i&&"function"!=typeof i)throw new Et(gt);var e=function(){var n=arguments,r=i?i.apply(this,n):n[0],o=e.cache;if(o.has(r))return o.get(r);var l=t.apply(this,n);return e.cache=o.set(r,l)||o,l};return e.cache=new(an.Cache||ti),e}function ln(t){if("function"!=typeof t)throw new Et(gt);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}an.Cache=ti;var Md=gl(function(t,i){var e=(i=1==i.length&&S(i[0])?J(i[0],At(T())):J(at(i,1),At(T()))).length;return P(function(n){for(var r=-1,o=lt(n.length,e);++r<o;)n[r]=i[r].call(this,n[r]);return yt(t,this,n)})}),Rs=P(function(t,i){var e=mi(i,$i(Rs));return ei(t,32,h,i,e)}),tu=P(function(t,i){var e=mi(i,$i(tu));return ei(t,64,h,i,e)}),Yd=ni(function(t,i){return ei(t,256,h,h,h,i)});function Gt(t,i){return t===i||t!=t&&i!=i}var Gd=en(ts),Nd=en(function(t,i){return t>=i}),Yi=qr(function(){return arguments}())?qr:function(t){return V(t)&&$.call(t,"callee")&&!Er.call(t,"callee")},S=g.isArray,$d=pr?At(pr):function Va(t){return V(t)&&dt(t)==te};function Wt(t){return null!=t&&fn(t.length)&&!ri(t)}function tt(t){return V(t)&&Wt(t)}var Ii=ra||Hs,qd=gr?At(gr):function ja(t){return V(t)&&dt(t)==ht};function Ts(t){if(!V(t))return!1;var i=dt(t);return i==ve||"[object DOMException]"==i||"string"==typeof t.message&&"string"==typeof t.name&&!me(t)}function ri(t){if(!Q(t))return!1;var i=dt(t);return i==Ie||i==Ds||"[object AsyncFunction]"==i||"[object Proxy]"==i}function iu(t){return"number"==typeof t&&t==B(t)}function fn(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Kt}function Q(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}function V(t){return null!=t&&"object"==typeof t}var eu=mr?At(mr):function il(t){return V(t)&&ft(t)==Ht};function nu(t){return"number"==typeof t||V(t)&&dt(t)==Ji}function me(t){if(!V(t)||dt(t)!=Vt)return!1;var i=Le(t);if(null===i)return!0;var e=$.call(i,"constructor")&&i.constructor;return"function"==typeof e&&e instanceof e&&Ee.call(e)==jo}var Ms=_r?At(_r):function el(t){return V(t)&&dt(t)==Qi},su=Wr?At(Wr):function nl(t){return V(t)&&ft(t)==Ot};function dn(t){return"string"==typeof t||!S(t)&&V(t)&&dt(t)==Vi}function kt(t){return"symbol"==typeof t||V(t)&&dt(t)==ye}var Ki=wr?At(wr):function sl(t){return V(t)&&fn(t.length)&&!!Z[dt(t)]},ac=en(ss),lc=en(function(t,i){return t<=i});function ru(t){if(!t)return[];if(Wt(t))return dn(t)?Dt(t):_t(t);if(ne&&t[ne])return function Do(d){for(var m,g=[];!(m=d.next()).done;)g.push(m.value);return g}(t[ne]());var i=ft(t);return(i==Ht?$n:i==Ot?Te:qi)(t)}function hi(t){return t?(t=Pt(t))===Qt||t===-Qt?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function B(t){var i=hi(t),e=i%1;return i==i?e?i-e:i:0}function hu(t){return t?xi(B(t),0,a):0}function Pt(t){if("number"==typeof t)return t;if(kt(t))return s;if(Q(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=Q(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=Cr(t);var e=Gu.test(t);return e||$u.test(t)?Ao(t.slice(2),e?2:8):Fu.test(t)?s:+t}function uu(t){return zt(t,wt(t))}function N(t){return null==t?"":Ct(t)}var dc=Gi(function(t,i){if(pe(i)||Wt(i))zt(i,ut(i),t);else for(var e in i)$.call(i,e)&&oe(t,e,i[e])}),ou=Gi(function(t,i){zt(i,wt(i),t)}),cn=Gi(function(t,i,e,n){zt(i,wt(i),t,n)}),cc=Gi(function(t,i,e,n){zt(i,ut(i),t,n)}),pc=ni(Qn),mc=P(function(t,i){t=K(t);var e=-1,n=i.length,r=n>2?i[2]:h;for(r&&ct(i[0],i[1],r)&&(n=1);++e<n;)for(var o=i[e],l=wt(o),f=-1,p=l.length;++f<p;){var w=l[f],b=t[w];(b===h||Gt(b,Hi[w])&&!$.call(t,w))&&(t[w]=o[w])}return t}),_c=P(function(t){return t.push(h,Ch),yt(au,h,t)});function Ys(t,i,e){var n=null==t?h:Ri(t,i);return n===h?e:n}function Xs(t,i){return null!=t&&Rh(t,i,Za)}var xc=bh(function(t,i,e){null!=i&&"function"!=typeof i.toString&&(i=Ue.call(i)),t[i]=e},Us(bt)),Rc=bh(function(t,i,e){null!=i&&"function"!=typeof i.toString&&(i=Ue.call(i)),$.call(t,i)?t[i].push(e):t[i]=[e]},T),Tc=P(le);function ut(t){return Wt(t)?Pr(t):ns(t)}function wt(t){return Wt(t)?Pr(t,!0):function rl(t){if(!Q(t))return function Dl(t){var i=[];if(null!=t)for(var e in K(t))i.push(e);return i}(t);var i=pe(t),e=[];for(var n in t)"constructor"==n&&(i||!$.call(t,n))||e.push(n);return e}(t)}var Xc=Gi(function(t,i,e){ze(t,i,e)}),au=Gi(function(t,i,e,n){ze(t,i,e,n)}),Ec=ni(function(t,i){var e={};if(null==t)return e;var n=!1;i=J(i,function(o){return o=bi(o,t),n||(n=o.length>1),o}),zt(t,_s(t),e),n&&(e=St(e,7,kl));for(var r=i.length;r--;)as(e,i[r]);return e}),Sc=ni(function(t,i){return null==t?{}:function ul(t,i){return ih(t,i,function(e,n){return Xs(t,n)})}(t,i)});function lu(t,i){if(null==t)return{};var e=J(_s(t),function(n){return[n]});return i=T(i),ih(t,e,function(n,r){return i(n,r[0])})}var fu=yh(ut),du=yh(wt);function qi(t){return null==t?[]:Nn(t,ut(t))}var qc=Ni(function(t,i,e){return i=i.toLowerCase(),t+(e?cu(i):i)});function cu(t){return Es(N(t).toLowerCase())}function pu(t){return(t=N(t))&&t.replace(qu,Bo).replace(co,"")}var Qc=Ni(function(t,i,e){return t+(e?"-":"")+i.toLowerCase()}),Vc=Ni(function(t,i,e){return t+(e?" ":"")+i.toLowerCase()}),jc=_h("toLowerCase"),hp=Ni(function(t,i,e){return t+(e?"_":"")+i.toLowerCase()}),op=Ni(function(t,i,e){return t+(e?" ":"")+Es(i)}),Wp=Ni(function(t,i,e){return t+(e?" ":"")+i.toUpperCase()}),Es=_h("toUpperCase");function gu(t,i,e){return t=N(t),(i=e?h:i)===h?function Oo(d){return mo.test(d)}(t)?function zo(d){return d.match(po)||[]}(t):function Yo(d){return d.match(Pu)||[]}(t):t.match(i)||[]}var mu=P(function(t,i){try{return yt(t,h,i)}catch(e){return Ts(e)?e:new E(e)}}),wp=ni(function(t,i){return Xt(i,function(e){e=Zt(e),ii(t,e,xs(t[e],t))}),t});function Us(t){return function(){return t}}var yp=wh(),Ap=wh(!0);function bt(t){return t}function Ss(t){return Zr("function"==typeof t?t:St(t,1))}var xp=P(function(t,i){return function(e){return le(e,t,i)}}),Rp=P(function(t,i){return function(e){return le(t,e,i)}});function Bs(t,i,e){var n=ut(i),r=qe(i,n);null==e&&(!Q(i)||!r.length&&n.length)&&(e=i,i=t,t=this,r=qe(i,ut(i)));var o=!(Q(e)&&"chain"in e&&!e.chain),l=ri(t);return Xt(r,function(f){var p=i[f];t[f]=p,l&&(t.prototype[f]=function(){var w=this.__chain__;if(o||w){var b=t(this.__wrapped__),v=b.__actions__=_t(this.__actions__);return v.push({func:p,args:arguments,thisArg:t}),b.__chain__=w,b}return p.apply(t,gi([this.value()],arguments))})}),t}function Ls(){}var Yp=ps(J),Xp=ps(br),Ep=ps(Hn);function _u(t){return vs(t)?On(Zt(t)):function ol(t){return function(i){return Ri(i,t)}}(t)}var Sp=vh(),Bp=vh(!0);function Ps(){return[]}function Hs(){return!1}var Gp=je(function(t,i){return t+i},0),Np=gs("ceil"),$p=je(function(t,i){return t/i},1),Kp=gs("floor"),jp=je(function(t,i){return t*i},1),tg=gs("round"),ig=je(function(t,i){return t-i},0);return u.after=function Cd(t,i){if("function"!=typeof i)throw new Et(gt);return t=B(t),function(){if(--t<1)return i.apply(this,arguments)}},u.ary=zh,u.assign=dc,u.assignIn=ou,u.assignInWith=cn,u.assignWith=cc,u.at=pc,u.before=Zh,u.bind=xs,u.bindAll=wp,u.bindKey=Jh,u.castArray=function Ld(){if(!arguments.length)return[];var t=arguments[0];return S(t)?t:[t]},u.chain=$h,u.chunk=function $l(t,i,e){i=(e?ct(t,i,e):i===h)?1:rt(B(i),0);var n=null==t?0:t.length;if(!n||i<1)return[];for(var r=0,o=0,l=g(Oe(n/i));r<n;)l[o++]=Bt(t,r,r+=i);return l},u.compact=function Kl(t){for(var i=-1,e=null==t?0:t.length,n=0,r=[];++i<e;){var o=t[i];o&&(r[n++]=o)}return r},u.concat=function ql(){var t=arguments.length;if(!t)return[];for(var i=g(t-1),e=arguments[0],n=t;n--;)i[n-1]=arguments[n];return gi(S(e)?_t(e):[e],at(i,1))},u.cond=function bp(t){var i=null==t?0:t.length,e=T();return t=i?J(t,function(n){if("function"!=typeof n[1])throw new Et(gt);return[e(n[0]),n[1]]}):[],P(function(n){for(var r=-1;++r<i;){var o=t[r];if(yt(o[0],this,n))return yt(o[1],this,n)}})},u.conforms=function vp(t){return function $a(t){var i=ut(t);return function(e){return Dr(e,t,i)}}(St(t,1))},u.constant=Us,u.countBy=ed,u.create=function gc(t,i){var e=Fi(t);return null==i?e:Or(e,i)},u.curry=function Qh(t,i,e){var n=ei(t,8,h,h,h,h,h,i=e?h:i);return n.placeholder=Qh.placeholder,n},u.curryRight=function Vh(t,i,e){var n=ei(t,16,h,h,h,h,h,i=e?h:i);return n.placeholder=Vh.placeholder,n},u.debounce=jh,u.defaults=mc,u.defaultsDeep=_c,u.defer=kd,u.delay=xd,u.difference=zl,u.differenceBy=Zl,u.differenceWith=Jl,u.drop=function Ql(t,i,e){var n=null==t?0:t.length;return n?Bt(t,(i=e||i===h?1:B(i))<0?0:i,n):[]},u.dropRight=function Vl(t,i,e){var n=null==t?0:t.length;return n?Bt(t,0,(i=n-(i=e||i===h?1:B(i)))<0?0:i):[]},u.dropRightWhile=function jl(t,i){return t&&t.length?Je(t,T(i,3),!0,!0):[]},u.dropWhile=function tf(t,i){return t&&t.length?Je(t,T(i,3),!0):[]},u.fill=function ef(t,i,e,n){var r=null==t?0:t.length;return r?(e&&"number"!=typeof e&&ct(t,i,e)&&(e=0,n=r),function qa(t,i,e,n){var r=t.length;for((e=B(e))<0&&(e=-e>r?0:r+e),(n=n===h||n>r?r:B(n))<0&&(n+=r),n=e>n?0:hu(n);e<n;)t[e++]=i;return t}(t,i,e,n)):[]},u.filter=function sd(t,i){return(S(t)?pi:Nr)(t,T(i,3))},u.flatMap=function ud(t,i){return at(un(t,i),1)},u.flatMapDeep=function od(t,i){return at(un(t,i),Qt)},u.flatMapDepth=function ad(t,i,e){return e=e===h?1:B(e),at(un(t,i),e)},u.flatten=Dh,u.flattenDeep=function nf(t){return null!=t&&t.length?at(t,Qt):[]},u.flattenDepth=function sf(t,i){return null!=t&&t.length?at(t,i=i===h?1:B(i)):[]},u.flip=function Rd(t){return ei(t,512)},u.flow=yp,u.flowRight=Ap,u.fromPairs=function rf(t){for(var i=-1,e=null==t?0:t.length,n={};++i<e;){var r=t[i];n[r[0]]=r[1]}return n},u.functions=function Ac(t){return null==t?[]:qe(t,ut(t))},u.functionsIn=function Cc(t){return null==t?[]:qe(t,wt(t))},u.groupBy=ld,u.initial=function uf(t){return null!=t&&t.length?Bt(t,0,-1):[]},u.intersection=of,u.intersectionBy=af,u.intersectionWith=lf,u.invert=xc,u.invertBy=Rc,u.invokeMap=dd,u.iteratee=Ss,u.keyBy=cd,u.keys=ut,u.keysIn=wt,u.map=un,u.mapKeys=function Mc(t,i){var e={};return i=T(i,3),qt(t,function(n,r,o){ii(e,i(n,r,o),n)}),e},u.mapValues=function Yc(t,i){var e={};return i=T(i,3),qt(t,function(n,r,o){ii(e,r,i(n,r,o))}),e},u.matches=function Cp(t){return Qr(St(t,1))},u.matchesProperty=function kp(t,i){return Vr(t,St(i,1))},u.memoize=an,u.merge=Xc,u.mergeWith=au,u.method=xp,u.methodOf=Rp,u.mixin=Bs,u.negate=ln,u.nthArg=function Mp(t){return t=B(t),P(function(i){return jr(i,t)})},u.omit=Ec,u.omitBy=function Uc(t,i){return lu(t,ln(T(i)))},u.once=function Td(t){return Zh(2,t)},u.orderBy=function pd(t,i,e,n){return null==t?[]:(S(i)||(i=null==i?[]:[i]),S(e=n?h:e)||(e=null==e?[]:[e]),th(t,i,e))},u.over=Yp,u.overArgs=Md,u.overEvery=Xp,u.overSome=Ep,u.partial=Rs,u.partialRight=tu,u.partition=gd,u.pick=Sc,u.pickBy=lu,u.property=_u,u.propertyOf=function Up(t){return function(i){return null==t?h:Ri(t,i)}},u.pull=pf,u.pullAll=Gh,u.pullAllBy=function gf(t,i,e){return t&&t.length&&i&&i.length?rs(t,i,T(e,2)):t},u.pullAllWith=function mf(t,i,e){return t&&t.length&&i&&i.length?rs(t,i,h,e):t},u.pullAt=_f,u.range=Sp,u.rangeRight=Bp,u.rearg=Yd,u.reject=function Wd(t,i){return(S(t)?pi:Nr)(t,ln(T(i,3)))},u.remove=function Wf(t,i){var e=[];if(!t||!t.length)return e;var n=-1,r=[],o=t.length;for(i=T(i,3);++n<o;){var l=t[n];i(l,n,t)&&(e.push(l),r.push(n))}return eh(t,r),e},u.rest=function Xd(t,i){if("function"!=typeof t)throw new Et(gt);return P(t,i=i===h?i:B(i))},u.reverse=Cs,u.sampleSize=function bd(t,i,e){return i=(e?ct(t,i,e):i===h)?1:B(i),(S(t)?Da:fl)(t,i)},u.set=function Lc(t,i,e){return null==t?t:de(t,i,e)},u.setWith=function Pc(t,i,e,n){return n="function"==typeof n?n:h,null==t?t:de(t,i,e,n)},u.shuffle=function vd(t){return(S(t)?Fa:cl)(t)},u.slice=function wf(t,i,e){var n=null==t?0:t.length;return n?(e&&"number"!=typeof e&&ct(t,i,e)?(i=0,e=n):(i=null==i?0:B(i),e=e===h?n:B(e)),Bt(t,i,e)):[]},u.sortBy=Ad,u.sortedUniq=function kf(t){return t&&t.length?sh(t):[]},u.sortedUniqBy=function xf(t,i){return t&&t.length?sh(t,T(i,2)):[]},u.split=function up(t,i,e){return e&&"number"!=typeof e&&ct(t,i,e)&&(i=e=h),(e=e===h?a:e>>>0)?(t=N(t))&&("string"==typeof i||null!=i&&!Ms(i))&&!(i=Ct(i))&&Li(t)?vi(Dt(t),0,e):t.split(i,e):[]},u.spread=function Ed(t,i){if("function"!=typeof t)throw new Et(gt);return i=null==i?0:rt(B(i),0),P(function(e){var n=e[i],r=vi(e,0,i);return n&&gi(r,n),yt(t,this,r)})},u.tail=function Rf(t){var i=null==t?0:t.length;return i?Bt(t,1,i):[]},u.take=function Tf(t,i,e){return t&&t.length?Bt(t,0,(i=e||i===h?1:B(i))<0?0:i):[]},u.takeRight=function Mf(t,i,e){var n=null==t?0:t.length;return n?Bt(t,(i=n-(i=e||i===h?1:B(i)))<0?0:i,n):[]},u.takeRightWhile=function Yf(t,i){return t&&t.length?Je(t,T(i,3),!1,!0):[]},u.takeWhile=function Xf(t,i){return t&&t.length?Je(t,T(i,3)):[]},u.tap=function qf(t,i){return i(t),t},u.throttle=function Ud(t,i,e){var n=!0,r=!0;if("function"!=typeof t)throw new Et(gt);return Q(e)&&(n="leading"in e?!!e.leading:n,r="trailing"in e?!!e.trailing:r),jh(t,i,{leading:n,maxWait:i,trailing:r})},u.thru=hn,u.toArray=ru,u.toPairs=fu,u.toPairsIn=du,u.toPath=function Dp(t){return S(t)?J(t,Zt):kt(t)?[t]:_t(Lh(N(t)))},u.toPlainObject=uu,u.transform=function Hc(t,i,e){var n=S(t),r=n||Ii(t)||Ki(t);if(i=T(i,4),null==e){var o=t&&t.constructor;e=r?n?new o:[]:Q(t)&&ri(o)?Fi(Le(t)):{}}return(r?Xt:qt)(t,function(l,f,p){return i(e,l,f,p)}),e},u.unary=function Sd(t){return zh(t,1)},u.union=Ef,u.unionBy=Uf,u.unionWith=Sf,u.uniq=function Bf(t){return t&&t.length?wi(t):[]},u.uniqBy=function Lf(t,i){return t&&t.length?wi(t,T(i,2)):[]},u.uniqWith=function Pf(t,i){return i="function"==typeof i?i:h,t&&t.length?wi(t,h,i):[]},u.unset=function Oc(t,i){return null==t||as(t,i)},u.unzip=ks,u.unzipWith=Nh,u.update=function Dc(t,i,e){return null==t?t:hh(t,i,ds(e))},u.updateWith=function Fc(t,i,e,n){return n="function"==typeof n?n:h,null==t?t:hh(t,i,ds(e),n)},u.values=qi,u.valuesIn=function Gc(t){return null==t?[]:Nn(t,wt(t))},u.without=Hf,u.words=gu,u.wrap=function Bd(t,i){return Rs(ds(i),t)},u.xor=Of,u.xorBy=Df,u.xorWith=Ff,u.zip=Gf,u.zipObject=function Nf(t,i){return oh(t||[],i||[],oe)},u.zipObjectDeep=function $f(t,i){return oh(t||[],i||[],de)},u.zipWith=Kf,u.entries=fu,u.entriesIn=du,u.extend=ou,u.extendWith=cn,Bs(u,u),u.add=Gp,u.attempt=mu,u.camelCase=qc,u.capitalize=cu,u.ceil=Np,u.clamp=function Nc(t,i,e){return e===h&&(e=i,i=h),e!==h&&(e=(e=Pt(e))==e?e:0),i!==h&&(i=(i=Pt(i))==i?i:0),xi(Pt(t),i,e)},u.clone=function Pd(t){return St(t,4)},u.cloneDeep=function Od(t){return St(t,5)},u.cloneDeepWith=function Dd(t,i){return St(t,5,i="function"==typeof i?i:h)},u.cloneWith=function Hd(t,i){return St(t,4,i="function"==typeof i?i:h)},u.conformsTo=function Fd(t,i){return null==i||Dr(t,i,ut(i))},u.deburr=pu,u.defaultTo=function Ip(t,i){return null==t||t!=t?i:t},u.divide=$p,u.endsWith=function zc(t,i,e){t=N(t),i=Ct(i);var n=t.length,r=e=e===h?n:xi(B(e),0,n);return(e-=i.length)>=0&&t.slice(e,r)==i},u.eq=Gt,u.escape=function Zc(t){return(t=N(t))&&xu.test(t)?t.replace(Ns,Lo):t},u.escapeRegExp=function Jc(t){return(t=N(t))&&Eu.test(t)?t.replace(Tn,"\\$&"):t},u.every=function nd(t,i,e){var n=S(t)?br:Ka;return e&&ct(t,i,e)&&(i=h),n(t,T(i,3))},u.find=rd,u.findIndex=Hh,u.findKey=function Wc(t,i){return vr(t,T(i,3),qt)},u.findLast=hd,u.findLastIndex=Oh,u.findLastKey=function wc(t,i){return vr(t,T(i,3),jn)},u.floor=Kp,u.forEach=Kh,u.forEachRight=qh,u.forIn=function bc(t,i){return null==t?t:Vn(t,T(i,3),wt)},u.forInRight=function vc(t,i){return null==t?t:$r(t,T(i,3),wt)},u.forOwn=function Ic(t,i){return t&&qt(t,T(i,3))},u.forOwnRight=function yc(t,i){return t&&jn(t,T(i,3))},u.get=Ys,u.gt=Gd,u.gte=Nd,u.has=function kc(t,i){return null!=t&&Rh(t,i,za)},u.hasIn=Xs,u.head=Fh,u.identity=bt,u.includes=function fd(t,i,e,n){t=Wt(t)?t:qi(t),e=e&&!n?B(e):0;var r=t.length;return e<0&&(e=rt(r+e,0)),dn(t)?e<=r&&t.indexOf(i,e)>-1:!!r&&Bi(t,i,e)>-1},u.indexOf=function hf(t,i,e){var n=null==t?0:t.length;if(!n)return-1;var r=null==e?0:B(e);return r<0&&(r=rt(n+r,0)),Bi(t,i,r)},u.inRange=function $c(t,i,e){return i=hi(i),e===h?(e=i,i=0):e=hi(e),function Ja(t,i,e){return t>=lt(i,e)&&t<rt(i,e)}(t=Pt(t),i,e)},u.invoke=Tc,u.isArguments=Yi,u.isArray=S,u.isArrayBuffer=$d,u.isArrayLike=Wt,u.isArrayLikeObject=tt,u.isBoolean=function Kd(t){return!0===t||!1===t||V(t)&&dt(t)==U},u.isBuffer=Ii,u.isDate=qd,u.isElement=function zd(t){return V(t)&&1===t.nodeType&&!me(t)},u.isEmpty=function Zd(t){if(null==t)return!0;if(Wt(t)&&(S(t)||"string"==typeof t||"function"==typeof t.splice||Ii(t)||Ki(t)||Yi(t)))return!t.length;var i=ft(t);if(i==Ht||i==Ot)return!t.size;if(pe(t))return!ns(t).length;for(var e in t)if($.call(t,e))return!1;return!0},u.isEqual=function Jd(t,i){return fe(t,i)},u.isEqualWith=function Qd(t,i,e){var n=(e="function"==typeof e?e:h)?e(t,i):h;return n===h?fe(t,i,h,e):!!n},u.isError=Ts,u.isFinite=function Vd(t){return"number"==typeof t&&Sr(t)},u.isFunction=ri,u.isInteger=iu,u.isLength=fn,u.isMap=eu,u.isMatch=function jd(t,i){return t===i||es(t,i,ws(i))},u.isMatchWith=function tc(t,i,e){return e="function"==typeof e?e:h,es(t,i,ws(i),e)},u.isNaN=function ic(t){return nu(t)&&t!=+t},u.isNative=function ec(t){if(Pl(t))throw new E("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return zr(t)},u.isNil=function sc(t){return null==t},u.isNull=function nc(t){return null===t},u.isNumber=nu,u.isObject=Q,u.isObjectLike=V,u.isPlainObject=me,u.isRegExp=Ms,u.isSafeInteger=function rc(t){return iu(t)&&t>=-Kt&&t<=Kt},u.isSet=su,u.isString=dn,u.isSymbol=kt,u.isTypedArray=Ki,u.isUndefined=function hc(t){return t===h},u.isWeakMap=function uc(t){return V(t)&&ft(t)==ji},u.isWeakSet=function oc(t){return V(t)&&"[object WeakSet]"==dt(t)},u.join=function ff(t,i){return null==t?"":ha.call(t,i)},u.kebabCase=Qc,u.last=Lt,u.lastIndexOf=function df(t,i,e){var n=null==t?0:t.length;if(!n)return-1;var r=n;return e!==h&&(r=(r=B(e))<0?rt(n+r,0):lt(r,n-1)),i==i?function No(d,m,g){for(var C=g+1;C--;)if(d[C]===m)return C;return C}(t,i,r):Re(t,Ir,r,!0)},u.lowerCase=Vc,u.lowerFirst=jc,u.lt=ac,u.lte=lc,u.max=function qp(t){return t&&t.length?Ke(t,bt,ts):h},u.maxBy=function zp(t,i){return t&&t.length?Ke(t,T(i,2),ts):h},u.mean=function Zp(t){return yr(t,bt)},u.meanBy=function Jp(t,i){return yr(t,T(i,2))},u.min=function Qp(t){return t&&t.length?Ke(t,bt,ss):h},u.minBy=function Vp(t,i){return t&&t.length?Ke(t,T(i,2),ss):h},u.stubArray=Ps,u.stubFalse=Hs,u.stubObject=function Lp(){return{}},u.stubString=function Pp(){return""},u.stubTrue=function Hp(){return!0},u.multiply=jp,u.nth=function cf(t,i){return t&&t.length?jr(t,B(i)):h},u.noConflict=function Tp(){return ot._===this&&(ot._=ta),this},u.noop=Ls,u.now=on,u.pad=function tp(t,i,e){t=N(t);var n=(i=B(i))?Pi(t):0;if(!i||n>=i)return t;var r=(i-n)/2;return tn(De(r),e)+t+tn(Oe(r),e)},u.padEnd=function ip(t,i,e){t=N(t);var n=(i=B(i))?Pi(t):0;return i&&n<i?t+tn(i-n,e):t},u.padStart=function ep(t,i,e){t=N(t);var n=(i=B(i))?Pi(t):0;return i&&n<i?tn(i-n,e)+t:t},u.parseInt=function np(t,i,e){return e||null==i?i=0:i&&(i=+i),aa(N(t).replace(Mn,""),i||0)},u.random=function Kc(t,i,e){if(e&&"boolean"!=typeof e&&ct(t,i,e)&&(i=e=h),e===h&&("boolean"==typeof i?(e=i,i=h):"boolean"==typeof t&&(e=t,t=h)),t===h&&i===h?(t=0,i=1):(t=hi(t),i===h?(i=t,t=0):i=hi(i)),t>i){var n=t;t=i,i=n}if(e||t%1||i%1){var r=Br();return lt(t+r*(i-t+yo("1e-"+((r+"").length-1))),i)}return hs(t,i)},u.reduce=function md(t,i,e){var n=S(t)?Pn:Ar,r=arguments.length<3;return n(t,T(i,4),e,r,Wi)},u.reduceRight=function _d(t,i,e){var n=S(t)?Ro:Ar,r=arguments.length<3;return n(t,T(i,4),e,r,Gr)},u.repeat=function sp(t,i,e){return i=(e?ct(t,i,e):i===h)?1:B(i),us(N(t),i)},u.replace=function rp(){var t=arguments,i=N(t[0]);return t.length<3?i:i.replace(t[1],t[2])},u.result=function Bc(t,i,e){var n=-1,r=(i=bi(i,t)).length;for(r||(r=1,t=h);++n<r;){var o=null==t?h:t[Zt(i[n])];o===h&&(n=r,o=e),t=ri(o)?o.call(t):o}return t},u.round=tg,u.runInContext=d,u.sample=function wd(t){return(S(t)?Hr:ll)(t)},u.size=function Id(t){if(null==t)return 0;if(Wt(t))return dn(t)?Pi(t):t.length;var i=ft(t);return i==Ht||i==Ot?t.size:ns(t).length},u.snakeCase=hp,u.some=function yd(t,i,e){var n=S(t)?Hn:pl;return e&&ct(t,i,e)&&(i=h),n(t,T(i,3))},u.sortedIndex=function bf(t,i){return Ze(t,i)},u.sortedIndexBy=function vf(t,i,e){return os(t,i,T(e,2))},u.sortedIndexOf=function If(t,i){var e=null==t?0:t.length;if(e){var n=Ze(t,i);if(n<e&&Gt(t[n],i))return n}return-1},u.sortedLastIndex=function yf(t,i){return Ze(t,i,!0)},u.sortedLastIndexBy=function Af(t,i,e){return os(t,i,T(e,2),!0)},u.sortedLastIndexOf=function Cf(t,i){if(null!=t&&t.length){var n=Ze(t,i,!0)-1;if(Gt(t[n],i))return n}return-1},u.startCase=op,u.startsWith=function ap(t,i,e){return t=N(t),e=null==e?0:xi(B(e),0,t.length),i=Ct(i),t.slice(e,e+i.length)==i},u.subtract=ig,u.sum=function eg(t){return t&&t.length?Fn(t,bt):0},u.sumBy=function ng(t,i){return t&&t.length?Fn(t,T(i,2)):0},u.template=function lp(t,i,e){var n=u.templateSettings;e&&ct(t,i,e)&&(i=h),t=N(t),i=cn({},i,n,Ah);var f,p,r=cn({},i.imports,n.imports,Ah),o=ut(r),l=Nn(r,o),w=0,b=i.interpolate||Ae,v="__p += '",A=Kn((i.escape||Ae).source+"|"+b.source+"|"+(b===$s?Du:Ae).source+"|"+(i.evaluate||Ae).source+"|$","g"),x="//# sourceURL="+($.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wo+"]")+"\n";t.replace(A,function(Y,H,D,xt,pt,Rt){return D||(D=xt),v+=t.slice(w,Rt).replace(zu,Po),H&&(f=!0,v+="' +\n__e("+H+") +\n'"),pt&&(p=!0,v+="';\n"+pt+";\n__p += '"),D&&(v+="' +\n((__t = ("+D+")) == null ? '' : __t) +\n'"),w=Rt+Y.length,Y}),v+="';\n";var M=$.call(i,"variable")&&i.variable;if(M){if(Hu.test(M))throw new E("Invalid `variable` option passed into `_.template`")}else v="with (obj) {\n"+v+"\n}\n";v=(p?v.replace(yu,""):v).replace(Au,"$1").replace(Cu,"$1;"),v="function("+(M||"obj")+") {\n"+(M?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(f?", __e = _.escape":"")+(p?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+v+"return __p\n}";var L=mu(function(){return G(o,x+"return "+v).apply(h,l)});if(L.source=v,Ts(L))throw L;return L},u.times=function Op(t,i){if((t=B(t))<1||t>Kt)return[];var e=a,n=lt(t,a);i=T(i),t-=a;for(var r=Gn(n,i);++e<t;)i(e);return r},u.toFinite=hi,u.toInteger=B,u.toLength=hu,u.toLower=function fp(t){return N(t).toLowerCase()},u.toNumber=Pt,u.toSafeInteger=function fc(t){return t?xi(B(t),-Kt,Kt):0===t?t:0},u.toString=N,u.toUpper=function dp(t){return N(t).toUpperCase()},u.trim=function cp(t,i,e){if((t=N(t))&&(e||i===h))return Cr(t);if(!t||!(i=Ct(i)))return t;var n=Dt(t),r=Dt(i);return vi(n,kr(n,r),xr(n,r)+1).join("")},u.trimEnd=function pp(t,i,e){if((t=N(t))&&(e||i===h))return t.slice(0,Tr(t)+1);if(!t||!(i=Ct(i)))return t;var n=Dt(t);return vi(n,0,xr(n,Dt(i))+1).join("")},u.trimStart=function gp(t,i,e){if((t=N(t))&&(e||i===h))return t.replace(Mn,"");if(!t||!(i=Ct(i)))return t;var n=Dt(t);return vi(n,kr(n,Dt(i))).join("")},u.truncate=function mp(t,i){var e=30,n="...";if(Q(i)){var r="separator"in i?i.separator:r;e="length"in i?B(i.length):e,n="omission"in i?Ct(i.omission):n}var o=(t=N(t)).length;if(Li(t)){var l=Dt(t);o=l.length}if(e>=o)return t;var f=e-Pi(n);if(f<1)return n;var p=l?vi(l,0,f).join(""):t.slice(0,f);if(r===h)return p+n;if(l&&(f+=p.length-f),Ms(r)){if(t.slice(f).search(r)){var w,b=p;for(r.global||(r=Kn(r.source,N(Ks.exec(r))+"g")),r.lastIndex=0;w=r.exec(b);)var v=w.index;p=p.slice(0,v===h?f:v)}}else if(t.indexOf(Ct(r),f)!=f){var A=p.lastIndexOf(r);A>-1&&(p=p.slice(0,A))}return p+n},u.unescape=function _p(t){return(t=N(t))&&ku.test(t)?t.replace(Gs,$o):t},u.uniqueId=function Fp(t){var i=++Vo;return N(t)+i},u.upperCase=Wp,u.upperFirst=Es,u.each=Kh,u.eachRight=qh,u.first=Fh,Bs(u,function(){var t={};return qt(u,function(i,e){$.call(u.prototype,e)||(t[e]=i)}),t}(),{chain:!1}),u.VERSION="4.17.21",Xt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){u[t].placeholder=u}),Xt(["drop","take"],function(t,i){O.prototype[t]=function(e){e=e===h?1:rt(B(e),0);var n=this.__filtered__&&!i?new O(this):this.clone();return n.__filtered__?n.__takeCount__=lt(e,n.__takeCount__):n.__views__.push({size:lt(e,a),type:t+(n.__dir__<0?"Right":"")}),n},O.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Xt(["filter","map","takeWhile"],function(t,i){var e=i+1,n=1==e||3==e;O.prototype[t]=function(r){var o=this.clone();return o.__iteratees__.push({iteratee:T(r,3),type:e}),o.__filtered__=o.__filtered__||n,o}}),Xt(["head","last"],function(t,i){var e="take"+(i?"Right":"");O.prototype[t]=function(){return this[e](1).value()[0]}}),Xt(["initial","tail"],function(t,i){var e="drop"+(i?"":"Right");O.prototype[t]=function(){return this.__filtered__?new O(this):this[e](1)}}),O.prototype.compact=function(){return this.filter(bt)},O.prototype.find=function(t){return this.filter(t).head()},O.prototype.findLast=function(t){return this.reverse().find(t)},O.prototype.invokeMap=P(function(t,i){return"function"==typeof t?new O(this):this.map(function(e){return le(e,t,i)})}),O.prototype.reject=function(t){return this.filter(ln(T(t)))},O.prototype.slice=function(t,i){t=B(t);var e=this;return e.__filtered__&&(t>0||i<0)?new O(e):(t<0?e=e.takeRight(-t):t&&(e=e.drop(t)),i!==h&&(e=(i=B(i))<0?e.dropRight(-i):e.take(i-t)),e)},O.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},O.prototype.toArray=function(){return this.take(a)},qt(O.prototype,function(t,i){var e=/^(?:filter|find|map|reject)|While$/.test(i),n=/^(?:head|last)$/.test(i),r=u[n?"take"+("last"==i?"Right":""):i],o=n||/^find/.test(i);!r||(u.prototype[i]=function(){var l=this.__wrapped__,f=n?[1]:arguments,p=l instanceof O,w=f[0],b=p||S(l),v=function(H){var D=r.apply(u,gi([H],f));return n&&A?D[0]:D};b&&e&&"function"==typeof w&&1!=w.length&&(p=b=!1);var A=this.__chain__,x=!!this.__actions__.length,M=o&&!A,L=p&&!x;if(!o&&b){l=L?l:new O(this);var Y=t.apply(l,f);return Y.__actions__.push({func:hn,args:[v],thisArg:h}),new Ut(Y,A)}return M&&L?t.apply(this,f):(Y=this.thru(v),M?n?Y.value()[0]:Y.value():Y)})}),Xt(["pop","push","shift","sort","splice","unshift"],function(t){var i=Ye[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);u.prototype[t]=function(){var r=arguments;if(n&&!this.__chain__){var o=this.value();return i.apply(S(o)?o:[],r)}return this[e](function(l){return i.apply(S(l)?l:[],r)})}}),qt(O.prototype,function(t,i){var e=u[i];if(e){var n=e.name+"";$.call(Di,n)||(Di[n]=[]),Di[n].push({name:i,func:e})}}),Di[Ve(h,2).name]=[{name:"wrapper",func:h}],O.prototype.clone=function ma(){var t=new O(this.__wrapped__);return t.__actions__=_t(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=_t(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=_t(this.__views__),t},O.prototype.reverse=function _a(){if(this.__filtered__){var t=new O(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},O.prototype.value=function Wa(){var t=this.__wrapped__.value(),i=this.__dir__,e=S(t),n=i<0,r=e?t.length:0,o=function Ml(t,i,e){for(var n=-1,r=e.length;++n<r;){var o=e[n],l=o.size;switch(o.type){case"drop":t+=l;break;case"dropRight":i-=l;break;case"take":i=lt(i,t+l);break;case"takeRight":t=rt(t,i-l)}}return{start:t,end:i}}(0,r,this.__views__),l=o.start,f=o.end,p=f-l,w=n?f:l-1,b=this.__iteratees__,v=b.length,A=0,x=lt(p,this.__takeCount__);if(!e||!n&&r==p&&x==p)return uh(t,this.__actions__);var M=[];t:for(;p--&&A<x;){for(var L=-1,Y=t[w+=i];++L<v;){var H=b[L],xt=H.type,pt=(0,H.iteratee)(Y);if(2==xt)Y=pt;else if(!pt){if(1==xt)continue t;break t}}M[A++]=Y}return M},u.prototype.at=zf,u.prototype.chain=function Zf(){return $h(this)},u.prototype.commit=function Jf(){return new Ut(this.value(),this.__chain__)},u.prototype.next=function Qf(){this.__values__===h&&(this.__values__=ru(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?h:this.__values__[this.__index__++]}},u.prototype.plant=function jf(t){for(var i,e=this;e instanceof Ne;){var n=Ph(e);n.__index__=0,n.__values__=h,i?r.__wrapped__=n:i=n;var r=n;e=e.__wrapped__}return r.__wrapped__=t,i},u.prototype.reverse=function td(){var t=this.__wrapped__;if(t instanceof O){var i=t;return this.__actions__.length&&(i=new O(this)),(i=i.reverse()).__actions__.push({func:hn,args:[Cs],thisArg:h}),new Ut(i,this.__chain__)}return this.thru(Cs)},u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=function id(){return uh(this.__wrapped__,this.__actions__)},u.prototype.first=u.prototype.head,ne&&(u.prototype[ne]=function Vf(){return this}),u}();ot._=Me,(Xi=function(){return Me}.call(ai,vt,ai,oi))!==h&&(oi.exports=Xi)}.call(this)},2339:(oi,ai,vt)=>{"use strict";vt.r(ai),vt.d(ai,{DemoModule:()=>Kt});var Xi=vt(8692);function h(X,s,a){return s in X?Object.defineProperty(X,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):X[s]=a,X}class R{constructor(s,a){h(this,"X",0),h(this,"Y",0),this.X=s,this.Y=a}}class y{}h(y,"right",0),h(y,"bottom",1),h(y,"left",2),h(y,"top",3);class gt{constructor(s,a,c){h(this,"road",0),h(this,"wall",1),h(this,"closeRoad",2),h(this,"redBase",3),h(this,"blueBase",4),h(this,"bullet",5),h(this,"water",6),h(this,"sand",7),h(this,"hpRegenRed",8),h(this,"hpRegenBlue",9),h(this,"cpRegen",10),h(this,"next",11),h(this,"units",[]),h(this,"towers",[]),h(this,"mobs",[]),h(this,"homes",[]);for(let W=0;W<s;++W)this.units.push(this.next+W);for(let W=0;W<s;++W)this.homes.push(this.next+s+W);for(let W=0;W<a;++W)this.towers.push(this.next+2*s+W);for(let W=0;W<c;++W)this.mobs.push(this.next+2*s+a+W)}}class _e{constructor(){h(this,"coords",new R(0,0)),h(this,"pastCoords",new R(0,0)),h(this,"renderCoords",new R(0,0)),h(this,"crashCoords",new R(0,0)),h(this,"renderCrashCoords",new R(0,0)),h(this,"deltaCoords",new R(0,0)),h(this,"perimCoords",[])}}class I{constructor(s=0,a=0,c=0,W=0,k=0){this.id=k,this.width=c,this.height=W,this.TLX=s,this.TLY=a,this.BRX=this.TLX+this.width,this.BRY=this.TLY+this.height}update(s){this.TLX=s.X,this.TLY=s.Y,this.BRX=this.TLX+this.width,this.BRY=this.TLY+this.height}}class We{constructor(s="T_2",a=20,c=20,W=6,k=2,F=200,z=600,nt=1,U=0,ht=0){this.model=s,this.health=a,this.armor=c,this.speed=W,this.shotPower=k,this.shotDistance=F,this.respawnTime=z,this.level=nt,this.experience=U,this.commandPoints=ht}}function li(X,s){return Math.floor(Math.random()*(s-X)+X)}class $t extends I{constructor(s){super(),h(this,"map",null),h(this,"pos",null),h(this,"owner",null),h(this,"target",null),h(this,"turn",0),h(this,"speed",0),h(this,"bulletType",{model:"bullet_1",damage:1,quantity:1e4,shot_model:"bullet_1_shot",boom_model:"bullet_1_boom",shot_coords:new R(0,0),boom_coords:new R(0,0)}),h(this,"hit",!1),h(this,"hitMiss",!1),h(this,"degree",0),this.map=s.map,this.pos=new _e,this.owner=s,this.id=s.id,this.bulletType=s.ammunition[s.bulletType]}look(){let s=this.pos.coords.X+Math.round(this.map.unitWidth/3),a=this.pos.coords.Y+Math.round(this.map.unitWidth/3),c=[];this.update(new R(s,a));for(let W=0;W<this.map.backArray.length;++W)this.BRX<this.map.backArray[W].TLX||this.TLX>this.map.backArray[W].BRX||this.BRY<this.map.backArray[W].TLY||this.TLY>this.map.backArray[W].BRY||c.push(this.map.backArray[W].id);return 0===c.length&&c.push(this.map.backId.road),c}fatalHit(){return null!==this.target&&this.target.uc.health<=0?(this.target.uc.health=0,this.target):(this.target=null,null)}hitResult(){return li(this.bulletType.damage,this.owner.uc.shotPower+this.bulletType.damage)}checkHitMiss(s){return s.forEach(a=>{this.hitMiss=a===this.map.backId.wall}),this.hitMiss}checkHit(s){this.hit=!1;for(let a of this.owner.targets)s.forEach(c=>{if(c===a.id&&a.uc.health>0){this.target=a;let W=this.hitResult();a.uc.armor=a.uc.armor-2*W/3,a.uc.armor<=0?(a.uc.armor=0,a.uc.health=a.uc.health-W):a.uc.health=a.uc.health-W/3,this.hit=!0}});return this.hit}moveHelper(s,a){let c=Math.cos(this.degree*Math.PI/180)*a,W=Math.sin(this.degree*Math.PI/180)*a;s.X+=Math.round(c),s.Y+=Math.round(W)}move(){0===this.speed&&(this.pos.coords=Object.assign({},this.owner.pos.coords),this.pos.renderCoords=Object.assign({},this.owner.pos.renderCoords),this.degree=this.owner.gun.degree,this.turn=this.owner.turn,this.bulletType=this.owner.ammunition[this.owner.bulletType],--this.owner.ammunition[this.owner.bulletType].quantity);let s=Math.floor(this.owner.uc.shotDistance/10);this.moveHelper(this.pos.coords,s),this.moveHelper(this.pos.renderCoords,s);let a=this.look();++this.speed,(this.checkHitMiss(a)||this.checkHit(a))&&(this.speed=0),this.speed>10&&(this.speed=0)}}class zi extends I{constructor(s=new We,a={model:"gun_2",degree:0},c=[{model:"bullet_1",damage:1,quantity:1e4,shot_model:"bullet_1_shot",boom_model:"bullet_1_boom",shot_coords:new R(0,0),boom_coords:new R(0,0)}],W=0){super(),h(this,"userId","None"),h(this,"name","NoName"),h(this,"side","red"),h(this,"homeId",1111),h(this,"ability",0),h(this,"turn",0),h(this,"bulletType",0),h(this,"reload",0),h(this,"speedController",1),h(this,"trigger",!1),h(this,"uc",null),h(this,"etalonUc",null),h(this,"kill",null),h(this,"map",null),h(this,"bullet",null),h(this,"pos",null),h(this,"targets",null),h(this,"allies",null),h(this,"ammunition",null),h(this,"gun",null),this.uc=s,this.etalonUc=Object.assign({},this.uc),this.ammunition=c,this.bullet=new $t(this),this.pos=new _e,this.gun=a,this.ability=W}levelUp(){null!==this.kill&&(this.uc.experience+=this.kill.etalonUc.health,this.uc.experience>20*this.uc.level&&(this.uc.experience-=20*this.uc.level,++this.uc.level,++this.etalonUc.level,++this.uc.commandPoints,++this.etalonUc.commandPoints,this.uc.level%2==0&&(this.etalonUc.health+=5),this.uc.level%2!=0&&(this.etalonUc.armor+=5),this.etalonUc.speed<12&&this.uc.level%3==0&&(this.uc.speed+=1,this.etalonUc.speed+=1),this.etalonUc.shotPower<=10&&this.uc.level%2!=0&&(this.uc.shotPower+=1,this.etalonUc.shotPower+=1))),this.experienceToLevel=20*this.uc.level}roadEffect(s){"red"===this.side?(s===this.map.backId.hpRegenRed&&this.uc.health<this.etalonUc.health&&(this.uc.health+=.1),s===this.map.backId.hpRegenBlue&&this.uc.health>=0&&(this.uc.health-=.1)):(s===this.map.backId.hpRegenBlue&&this.uc.health<this.etalonUc.health&&(this.uc.health+=.1),s===this.map.backId.hpRegenRed&&this.uc.health>=0&&(this.uc.health-=.1)),s===this.map.backId.cpRegen&&this.uc.armor<this.etalonUc.armor&&(this.uc.armor+=.1),s===this.map.backId.sand&&(this.uc.speed=2,this.speedController=2)}checkFrontWay(s){let a=!1,c=this.look(s),W=!0;return c.forEach(k=>{k===this.map.backId.hpRegenRed||k===this.map.backId.cpRegen||k===this.map.backId.hpRegenBlue||k===this.map.backId.sand?a=!0:W=k===this.map.backId.road,a?this.roadEffect(k):this.uc.speed=this.etalonUc.speed}),W}look(s){this.update(this.pos.coords);let a=[];switch(this.turn){case y.right:for(let c=0;c<this.map.backArray.length;++c)this.BRX+s+1<this.map.backArray[c].TLX||this.TLX+s+1>this.map.backArray[c].BRX||this.BRY<this.map.backArray[c].TLY||this.TLY>this.map.backArray[c].BRY||this.id===this.map.backArray[c].id||this.homeId===this.map.backArray[c].id||a.push(this.map.backArray[c].id);break;case y.bottom:for(let c=0;c<this.map.backArray.length;++c)this.BRX<this.map.backArray[c].TLX||this.TLX>this.map.backArray[c].BRX||this.BRY+s+1<this.map.backArray[c].TLY||this.TLY+s+1>this.map.backArray[c].BRY||this.id===this.map.backArray[c].id||this.homeId===this.map.backArray[c].id||a.push(this.map.backArray[c].id);break;case y.left:for(let c=0;c<this.map.backArray.length;++c)this.BRX-s-1<this.map.backArray[c].TLX||this.TLX-s-1>this.map.backArray[c].BRX||this.BRY<this.map.backArray[c].TLY||this.TLY>this.map.backArray[c].BRY||this.id===this.map.backArray[c].id||this.homeId===this.map.backArray[c].id||a.push(this.map.backArray[c].id);break;case y.top:for(let c=0;c<this.map.backArray.length;++c)this.BRX<this.map.backArray[c].TLX||this.TLX>this.map.backArray[c].BRX||this.BRY-s-1<this.map.backArray[c].TLY||this.TLY-s-1>this.map.backArray[c].BRY||this.id===this.map.backArray[c].id||this.homeId===this.map.backArray[c].id||a.push(this.map.backArray[c].id)}return 0===a.length&&a.push(this.map.backId.road),a}setPosition(s,a){switch(this.turn){case y.right:this.pos.coords.X=a?this.pos.coords.X+s:this.pos.coords.X-s;break;case y.bottom:this.pos.coords.Y=a?this.pos.coords.Y+s:this.pos.coords.Y-s;break;case y.left:this.pos.coords.X=a?this.pos.coords.X-s:this.pos.coords.X+s;break;case y.top:this.pos.coords.Y=a?this.pos.coords.Y-s:this.pos.coords.Y+s}this.update(this.pos.coords)}searchTarget(s){return s.pos.coords.X<this.pos.coords.X+this.uc.shotDistance&&s.pos.coords.X>this.pos.coords.X-this.uc.shotDistance&&s.pos.coords.Y<this.pos.coords.Y+this.uc.shotDistance&&s.pos.coords.Y>this.pos.coords.Y-this.uc.shotDistance&&s.uc.health>0}}class et extends zi{constructor(s="Blue",a="T_2",c=100,W=20,k=5,F=1,z=200,nt=100,U={model:"gun_2",degree:0,coords:new R(0,0)},ht=[{model:"bullet_1",damage:1,quantity:1e4,shot_model:"bullet_1_shot",boom_model:"bullet_1_boom",shot_coords:new R(0,0),boom_coords:new R(0,0)}],wn=0){super(new We(a,c,W,k,F,z,nt),U,ht,wn),h(this,"directionPriority",!0),h(this,"turnFlag",!0),h(this,"counter",0),h(this,"target",null),this.side=s.toLowerCase()}checkTarget1(s){switch(this.turn){case y.right:{this.turn=this.directionPriority?y.top:y.bottom;let a=this.checkCollision(!1);return this.turn=y.right,this.pos.coords.X<s.pos.coords.X||a}case y.bottom:{this.turn=this.directionPriority?y.right:y.left;let a=this.checkCollision(!1);return this.turn=y.bottom,this.pos.coords.Y<s.pos.coords.Y||a}case y.left:{this.turn=this.directionPriority?y.bottom:y.top;let a=this.checkCollision(!1);return this.turn=y.left,this.pos.coords.X>s.pos.coords.X||a}case y.top:{this.turn=this.directionPriority?y.left:y.right;let a=this.checkCollision(!1);return this.turn=y.top,this.pos.coords.Y>s.pos.coords.Y||a}}return!0}checkTarget2(s){let a=this.uc.shotDistance-Math.round(this.uc.shotDistance/4),c=s.id!==this.map.backId.redBase&&s.id!==this.map.backId.blueBase?this.map.unitWidth+2:Math.round(this.map.unitWidth/2);switch(this.turn){case y.right:return this.pos.coords.X<s.pos.coords.X-a||this.pos.coords.Y>s.pos.coords.Y+c||this.pos.coords.Y<s.pos.coords.Y-c;case y.bottom:return this.pos.coords.Y<s.pos.coords.Y-a||this.pos.coords.X>s.pos.coords.X+c||this.pos.coords.X<s.pos.coords.X-c;case y.left:return this.pos.coords.X>s.pos.coords.X+a||this.pos.coords.Y>s.pos.coords.Y+c||this.pos.coords.Y<s.pos.coords.Y-c;case y.top:return this.pos.coords.Y>s.pos.coords.Y+a||this.pos.coords.X>s.pos.coords.X+c||this.pos.coords.X<s.pos.coords.X-c}return!0}checkCollision(s){let a=!1;if(s)for(let c=this.uc.speed;c>0&&(a=!1,this.setPosition(c,!0),this.checkFrontWay(c)||(this.setPosition(c,!1),a=!0),!1!==a);--c);else this.checkFrontWay(this.uc.speed)||(a=!0);return a}hunt(s){this.turnGun(s),null!==s&&this.uc.health>0&&(this.directionPriority?!1===this.turnFlag&&this.turn===y.top?this.turn=y.right:!1===this.turnFlag&&(this.turn+=1):!1===this.turnFlag&&this.turn===y.right?this.turn=y.top:!1===this.turnFlag&&(this.turn-=1),"red"===this.side&&this.turnFlag?this.directionPriority=this.pos.coords.Y<Math.round(this.map.frontHeight/2):this.turnFlag&&(this.directionPriority=this.pos.coords.Y>Math.round(this.map.frontHeight/2)),this.turnFlag=!0,this.checkTarget1(s)?this.checkTarget2(s)&&this.checkCollision(!0)&&this.checkCollision(!1)&&(this.turn=this.directionPriority?this.turn-1:this.turn+1,this.turnClosure(),this.turnFlag=this.checkCollision(!0)):this.turn=this.directionPriority?this.turn-1:this.turn+1,this.turnClosure())}turnClosure(){this.turn<y.right&&(this.turn=y.top),this.turn>y.top&&(this.turn=y.right)}turnGun(s){let a=Math.round(this.map.unitWidth/2),c=Math.round(this.map.unitWidth/2),W=s.pos.coords.X+Math.round(this.map.unitWidth/2),k=s.pos.coords.Y+Math.round(this.map.unitWidth/2),F=this.pos.coords.X+a,nt=(k-(this.pos.coords.Y+c))/(W-F);this.gun.degree=F<=W?180*Math.atan(nt)/Math.PI:180*Math.atan(nt)/Math.PI+180}shot(){this.counter++;let s=null;for(let a of this.targets)if(this.uc.health>0&&a.uc.health>0&&this.searchTarget(a)){s=a;break}null!==s&&(this.turnGun(s),this.trigger=!0),this.trigger&&(this.counter%2==0&&this.reload===this.bullet.speed&&this.bullet.move(),this.counter%2==0&&this.reload++,this.kill=this.bullet.fatalHit(),this.reload>10&&(this.trigger=!1,this.bullet.hit=!1,this.bullet.hitMiss=!1,this.reload=0))}}class fi extends class pn{constructor(s,a,c){h(this,"renderX",0),h(this,"renderY",0),h(this,"deltaWidth",0),h(this,"deltaHeight",0),h(this,"unitWidth",0),h(this,"unitPerim",0),h(this,"baseWidth",280),h(this,"frontWidth",0),h(this,"frontHeight",0),h(this,"backWidth",0),h(this,"backHeight",0),h(this,"barrier",1e3),this.canvas=s,this.mapImg=a,this.unitWidth=c.width,this.unitPerim=4*c.width,this.frontWidth=a.width,this.frontHeight=a.height,this.backWidth=this.frontWidth+2*this.barrier,this.backHeight=this.frontHeight+2*this.barrier}calculateDelta(){this.deltaWidth=this.frontWidth-this.canvas.width,this.deltaHeight=this.frontHeight-this.canvas.height}moveMap(s,a){this.calculateDelta(),s<=10&&this.renderX>0?this.renderX-=10:this.renderX<0&&(this.renderX=0),a<=10&&this.renderY>0?this.renderY-=10:this.renderY<0&&(this.renderY=0),s>=this.canvas.width-10&&this.renderX<this.deltaWidth?this.renderX+=10:this.renderX>this.deltaWidth&&(this.renderX=this.deltaWidth),a>=this.canvas.height-10&&this.renderY<this.deltaHeight?this.renderY+=10:this.renderY>this.deltaHeight&&(this.renderY=this.deltaHeight)}}{constructor(s,a,c){super(s,a,c),h(this,"unitsCount",8),h(this,"towersCount",18),h(this,"mobsCount",6),h(this,"backArray",[]),h(this,"unitsCoords",[]),h(this,"startUnitsTurn",[]),h(this,"baseTowers",[]),h(this,"towers",[]),h(this,"mobs",[]),h(this,"etalonMobs",[]),h(this,"redBase",null),h(this,"blueBase",null),h(this,"etalonTower",null),h(this,"backId",null),this.backId=new gt(this.unitsCount,this.towersCount,this.mobsCount);const W={model:"gun_1",degree:0},k={model:"gun_3",degree:0},F={model:"gun_5",degree:0};this.redBase=new et("Red","",200,0),this.redBase.tower1=new et("Red","tower_1",100,0,0,3,350,0,_.cloneDeep(W)),this.redBase.tower2=new et("Red","tower_1",100,0,0,3,350,0,_.cloneDeep(W)),this.blueBase=new et("Blue","",200,0),this.blueBase.tower1=new et("Blue","tower_2",100,0,0,3,350,0,_.cloneDeep(k)),this.blueBase.tower2=new et("Blue","tower_2",100,0,0,3,350,0,_.cloneDeep(k)),this.etalonTower=new et("","",100,0,0,3,350),Math.round(2*this.unitWidth/3);const nt=Math.round(this.unitWidth/3),U=Math.round(this.unitWidth/2);this.unitsCoords=[new R(3*this.unitWidth-U,this.frontHeight-12*this.unitWidth-U),new R(3*this.unitWidth-U,this.frontHeight-9*this.unitWidth-U),new R(9*this.unitWidth-U,this.frontHeight-3*this.unitWidth-U),new R(12*this.unitWidth-U,this.frontHeight-3*this.unitWidth-U),new R(this.frontWidth-3*this.unitWidth-U,this.frontHeight-13*this.unitWidth+U),new R(this.frontWidth-3*this.unitWidth-U,this.frontHeight-10*this.unitWidth+U),new R(this.frontWidth-9*this.unitWidth-U,this.frontHeight-3*this.unitWidth-U),new R(this.frontWidth-12*this.unitWidth-U,this.frontHeight-3*this.unitWidth-U)],this.startUnitsTurn=[y.right,y.right,y.top,y.top,y.left,y.left,y.top,y.top],this.baseTowers=[this.redBase.tower1,this.redBase.tower2,this.blueBase.tower1,this.blueBase.tower2],this.redBase.tower1.pos.coords=new R(9*this.unitWidth+U,10*this.unitWidth+U),this.redBase.tower2.pos.coords=new R(9*this.unitWidth+U,15*this.unitWidth+U),this.blueBase.tower1.pos.coords=new R(this.frontWidth-11*this.unitWidth+U,9*this.unitWidth+U),this.blueBase.tower2.pos.coords=new R(this.frontWidth-11*this.unitWidth+U,14*this.unitWidth+U);for(let ht=0;ht<9;++ht)this.towers.push(new et("Red","tower_1",100,0,0,3,350,0,_.cloneDeep(W)));for(let ht=0;ht<9;++ht)this.towers.push(new et("Blue","tower_2",100,0,0,3,350,0,_.cloneDeep(k)));this.towersCoords=[new R(16*this.unitWidth,8*this.unitWidth),new R(15*this.unitWidth,4*this.unitWidth),new R(17*this.unitWidth,14*this.unitWidth),new R(17*this.unitWidth,18*this.unitWidth),new R(16*this.unitWidth,24*this.unitWidth+nt),new R(15*this.unitWidth,28*this.unitWidth+nt),new R(27*this.unitWidth,2*this.unitWidth),new R(28*this.unitWidth,15*this.unitWidth),new R(27*this.unitWidth,this.frontHeight-3*this.unitWidth),new R(this.frontWidth-16*this.unitWidth,4*this.unitWidth),new R(this.frontWidth-17*this.unitWidth,8*this.unitWidth),new R(this.frontWidth-18*this.unitWidth,14*this.unitWidth),new R(this.frontWidth-18*this.unitWidth,18*this.unitWidth),new R(this.frontWidth-17*this.unitWidth,24*this.unitWidth+nt),new R(this.frontWidth-16*this.unitWidth,28*this.unitWidth+nt),new R(this.frontWidth-28*this.unitWidth,2*this.unitWidth),new R(this.frontWidth-29*this.unitWidth,17*this.unitWidth),new R(this.frontWidth-28*this.unitWidth,this.frontHeight-3*this.unitWidth)];for(let ht=0;ht<6;++ht)this.mobs.push(new et("Green","tower_3",15,0,0,3,250,1e3,_.cloneDeep(F))),this.etalonMobs.push(new et("Green","tower_3",15,0,0,3,250,1e3,_.cloneDeep(F)));this.mobsCoords=[new R(24*this.unitWidth+U,10*this.unitWidth+U),new R(24*this.unitWidth+U,21*this.unitWidth),new R(23*this.unitWidth+U,24*this.unitWidth+U),new R(this.frontWidth-25*this.unitWidth-U,9*this.unitWidth+U),new R(this.frontWidth-25*this.unitWidth-U,20*this.unitWidth),new R(this.frontWidth-24*this.unitWidth-U,24*this.unitWidth)],this.mapInit()}mapInit(){const s=Math.round(2*this.unitWidth/3),a=Math.round(this.unitWidth/3);this.backArray.push(new I(0,0,7*this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new I(0,this.frontHeight-8*this.unitWidth,4*this.unitWidth,8*this.unitWidth,this.backId.wall)),this.backArray.push(new I(4*this.unitWidth,this.frontHeight-6*this.unitWidth,this.unitWidth,6*this.unitWidth,this.backId.wall)),this.backArray.push(new I(5*this.unitWidth,this.frontHeight-5*this.unitWidth,this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new I(6*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new I(0,5*this.unitWidth,2*this.unitWidth,this.frontHeight-8*this.unitWidth,this.backId.wall)),this.backArray.push(new I(2*this.unitWidth,this.frontHeight-11*this.unitWidth,2*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(2*this.unitWidth,5*this.unitWidth,2*this.unitWidth,15*this.unitWidth+a,this.backId.wall)),this.backArray.push(new I(7*this.unitWidth,0,22*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new I(10*this.unitWidth,2*this.unitWidth,10*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(10*this.unitWidth,3*this.unitWidth,8*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(8*this.unitWidth,this.frontHeight-2*this.unitWidth,21*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new I(10*this.unitWidth,this.frontHeight-4*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new I(13*this.unitWidth,this.frontHeight-3*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(13*this.unitWidth,this.frontHeight-4*this.unitWidth,5*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(17*this.unitWidth,9*this.unitWidth,4*this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new I(20*this.unitWidth,6*this.unitWidth,6*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(23*this.unitWidth,7*this.unitWidth,this.unitWidth,8*this.unitWidth,this.backId.wall)),this.backArray.push(new I(24*this.unitWidth,7*this.unitWidth,2*this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new I(24*this.unitWidth,12*this.unitWidth,2*this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new I(25*this.unitWidth,10*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new I(28*this.unitWidth,6*this.unitWidth,this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new I(28*this.unitWidth,11*this.unitWidth,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new I(17*this.unitWidth,this.frontHeight-14*this.unitWidth-a,4*this.unitWidth,5*this.unitWidth+a,this.backId.wall)),this.backArray.push(new I(23*this.unitWidth,this.frontHeight-14*this.unitWidth-a,3*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(23*this.unitWidth,this.frontHeight-13*this.unitWidth-a,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new I(24*this.unitWidth,this.frontHeight-10*this.unitWidth-a,2*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(25*this.unitWidth,this.frontHeight-13*this.unitWidth-a,this.unitWidth,3*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new I(25*this.unitWidth,this.frontHeight-9*this.unitWidth-a,this.unitWidth,3*this.unitWidth+a,this.backId.wall)),this.backArray.push(new I(20*this.unitWidth,this.frontHeight-7*this.unitWidth,5*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(23*this.unitWidth,this.frontHeight-9*this.unitWidth-a,this.unitWidth,2*this.unitWidth+a,this.backId.closeRoad)),this.backArray.push(new I(28*this.unitWidth,this.frontHeight-15*this.unitWidth-a,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new I(28*this.unitWidth,this.frontHeight-9*this.unitWidth-a,this.unitWidth,3*this.unitWidth+a,this.backId.wall)),this.backArray.push(new I(this.frontWidth-7*this.unitWidth,0,7*this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-4*this.unitWidth,this.frontHeight-8*this.unitWidth,4*this.unitWidth,8*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-5*this.unitWidth,this.frontHeight-6*this.unitWidth,this.unitWidth,6*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-6*this.unitWidth,this.frontHeight-5*this.unitWidth,this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-8*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-2*this.unitWidth,5*this.unitWidth,2*this.unitWidth,20*this.unitWidth+a,this.backId.wall)),this.backArray.push(new I(this.frontWidth-4*this.unitWidth,this.frontHeight-11*this.unitWidth,2*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-4*this.unitWidth,5*this.unitWidth,2*this.unitWidth,15*this.unitWidth+a,this.backId.wall)),this.backArray.push(new I(this.frontWidth-29*this.unitWidth,0,22*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-20*this.unitWidth,2*this.unitWidth,10*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-18*this.unitWidth,3*this.unitWidth,8*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-29*this.unitWidth,this.frontHeight-2*this.unitWidth,21*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-21*this.unitWidth,this.frontHeight-3*this.unitWidth,8*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-18*this.unitWidth,this.frontHeight-4*this.unitWidth,5*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-11*this.unitWidth,this.frontHeight-4*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-21*this.unitWidth,9*this.unitWidth,4*this.unitWidth,5*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-26*this.unitWidth,6*this.unitWidth,6*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-26*this.unitWidth,7*this.unitWidth,3*this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-24*this.unitWidth,9*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-26*this.unitWidth,11*this.unitWidth,3*this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-26*this.unitWidth,9*this.unitWidth,this.unitWidth,2*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new I(this.frontWidth-29*this.unitWidth,6*this.unitWidth,this.unitWidth,3*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-29*this.unitWidth,11*this.unitWidth,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-21*this.unitWidth,this.frontHeight-14*this.unitWidth-a,4*this.unitWidth,5*this.unitWidth+a,this.backId.wall)),this.backArray.push(new I(this.frontWidth-26*this.unitWidth,this.frontHeight-15*this.unitWidth-a,3*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-24*this.unitWidth,this.frontHeight-14*this.unitWidth-a,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-26*this.unitWidth,this.frontHeight-11*this.unitWidth-a,2*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-26*this.unitWidth,this.frontHeight-10*this.unitWidth-a,this.unitWidth,4*this.unitWidth+a,this.backId.wall)),this.backArray.push(new I(this.frontWidth-25*this.unitWidth,this.frontHeight-7*this.unitWidth,5*this.unitWidth,this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-26*this.unitWidth,this.frontHeight-14*this.unitWidth-a,this.unitWidth,2*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new I(this.frontWidth-24*this.unitWidth,this.frontHeight-10*this.unitWidth-a,this.unitWidth,3*this.unitWidth+a,this.backId.closeRoad)),this.backArray.push(new I(this.frontWidth-29*this.unitWidth,this.frontHeight-15*this.unitWidth-a,this.unitWidth,4*this.unitWidth,this.backId.wall)),this.backArray.push(new I(this.frontWidth-29*this.unitWidth,this.frontHeight-9*this.unitWidth-a,this.unitWidth,3*this.unitWidth+a,this.backId.wall)),this.backArray.push(new I(29*this.unitWidth,0,8*this.unitWidth+s,3*this.unitWidth,this.backId.water)),this.backArray.push(new I(29*this.unitWidth,6*this.unitWidth,8*this.unitWidth+s,3*this.unitWidth,this.backId.water)),this.backArray.push(new I(29*this.unitWidth,11*this.unitWidth,8*this.unitWidth+s,4*this.unitWidth,this.backId.water)),this.backArray.push(new I(29*this.unitWidth,18*this.unitWidth,8*this.unitWidth+s,4*this.unitWidth,this.backId.water)),this.backArray.push(new I(29*this.unitWidth,24*this.unitWidth,8*this.unitWidth+s,3*this.unitWidth+a,this.backId.water)),this.backArray.push(new I(29*this.unitWidth,30*this.unitWidth+a,8*this.unitWidth+s,3*this.unitWidth,this.backId.water)),this.backArray.push(new I(29*this.unitWidth,9*this.unitWidth,9*this.unitWidth+s,2*this.unitWidth,this.backId.sand)),this.backArray.push(new I(29*this.unitWidth,22*this.unitWidth,9*this.unitWidth+s,2*this.unitWidth,this.backId.sand)),this.backArray.push(new I(2*this.unitWidth,this.frontHeight-13*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[0])),this.backArray.push(new I(2*this.unitWidth,this.frontHeight-10*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[1])),this.backArray.push(new I(8*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[2])),this.backArray.push(new I(11*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[3])),this.backArray.push(new I(this.frontWidth-4*this.unitWidth,this.frontHeight-13*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[4])),this.backArray.push(new I(this.frontWidth-4*this.unitWidth,this.frontHeight-10*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[5])),this.backArray.push(new I(this.frontWidth-10*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[6])),this.backArray.push(new I(this.frontWidth-13*this.unitWidth,this.frontHeight-4*this.unitWidth,2*this.unitWidth,2*this.unitWidth,this.backId.homes[7])),this.backArray.push(new I(7*this.unitWidth,2*this.unitWidth,3*this.unitWidth,3*this.unitWidth,this.backId.hpRegenRed)),this.backArray.push(new I(4*this.unitWidth,5*this.unitWidth,3*this.unitWidth,3*this.unitWidth,this.backId.cpRegen)),this.backArray.push(new I(this.frontWidth-7*this.unitWidth,5*this.unitWidth,3*this.unitWidth,3*this.unitWidth,this.backId.cpRegen)),this.backArray.push(new I(this.frontWidth-10*this.unitWidth,2*this.unitWidth,3*this.unitWidth,3*this.unitWidth,this.backId.hpRegenBlue)),this.backArray.push(new I(4*this.unitWidth,11*this.unitWidth,6*this.unitWidth,5*this.unitWidth,this.backId.redBase)),this.backArray.push(new I(4*this.unitWidth,10*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.closeRoad)),this.backArray.push(new I(10*this.unitWidth,11*this.unitWidth,this.unitWidth,5*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new I(4*this.unitWidth,16*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.closeRoad)),this.backArray.push(new I(this.frontWidth-10*this.unitWidth,10*this.unitWidth,6*this.unitWidth,5*this.unitWidth,this.backId.blueBase)),this.backArray.push(new I(this.frontWidth-11*this.unitWidth,9*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.closeRoad)),this.backArray.push(new I(this.frontWidth-11*this.unitWidth,10*this.unitWidth,this.unitWidth,5*this.unitWidth,this.backId.closeRoad)),this.backArray.push(new I(this.frontWidth-11*this.unitWidth,15*this.unitWidth,7*this.unitWidth,this.unitWidth,this.backId.closeRoad))}}class Ei{constructor(){h(this,"images",new Map([["testGameMap",new Image(4e3,2e3)],["bullet_1",new Image(60,60)],["bullet_1_shot",new Image(60,60)],["bullet_1_boom",new Image(60,60)],["T_1",new Image(60,60)],["T_2",new Image(60,60)],["T_3",new Image(60,60)],["T_4",new Image(60,60)],["tower_1",new Image(60,60)],["tower_2",new Image(60,60)],["tower_3",new Image(60,60)],["gun_1",new Image(60,60)],["gun_2",new Image(60,60)],["gun_3",new Image(60,60)],["gun_4",new Image(60,60)],["gun_5",new Image(60,60)],["redCrash",new Image(60,60)],["blueCrash",new Image(60,60)],["smoke_1",new Image(60,60)]])),h(this,"counter",0),this.images.get("testGameMap").src="../../images/testGame/map_1.png",this.images.get("bullet_1").src="../../images/testGame/bullet_1.png",this.images.get("bullet_1_shot").src="../../images/testGame/bullet_1_shot.png",this.images.get("bullet_1_boom").src="../../images/testGame/bullet_1_boom.png",this.images.get("T_1").src="../../images/testGame/T_1.png",this.images.get("T_2").src="../../images/testGame/T_2.png",this.images.get("T_3").src="../../images/testGame/T_3.png",this.images.get("T_4").src="../../images/testGame/T_4.png",this.images.get("tower_1").src="../../images/testGame/tower_1.png",this.images.get("tower_2").src="../../images/testGame/tower_2.png",this.images.get("tower_3").src="../../images/testGame/tower_3.png",this.images.get("gun_1").src="../../images/testGame/gun_1.png",this.images.get("gun_2").src="../../images/testGame/gun_2.png",this.images.get("gun_3").src="../../images/testGame/gun_3.png",this.images.get("gun_4").src="../../images/testGame/gun_4.png",this.images.get("gun_5").src="../../images/testGame/gun_5.png",this.images.get("redCrash").src="../../images/testGame/redCrash.png",this.images.get("blueCrash").src="../../images/testGame/blueCrash.png",this.images.get("smoke_1").src="../../images/testGame/smoke_1.png"}allUploaded(s){let a=()=>{++this.counter===this.images.size&&s()};this.images.forEach(c=>{c.onload=a})}}class mt{constructor(s,a,c,W,k,F){h(this,"sounds",new Map),h(this,"counter",0),W.forEach(z=>{this.sounds.set(z.id,z.id===c.id?new Audio("../../sounds/ShotLoud.mp3"):new Audio("../../sounds/ShotQuit.mp3"))}),k.forEach(z=>{this.sounds.set(z.id,new Audio("../../sounds/ShotQuit.mp3"))}),F.forEach(z=>{this.sounds.set(z.id,new Audio("../../sounds/ShotQuit.mp3"))}),this.sounds.set(s.tower1.id,new Audio("../../sounds/ShotQuit.mp3")),this.sounds.set(s.tower2.id,new Audio("../../sounds/ShotQuit.mp3")),this.sounds.set(a.tower1.id,new Audio("../../sounds/ShotQuit.mp3")),this.sounds.set(a.tower2.id,new Audio("../../sounds/ShotQuit.mp3")),this.sounds.set("Wind",new Audio("../../sounds/Wind.mp3"))}}class Jt{constructor(s,a,c){h(this,"map",null),h(this,"uI",0),h(this,"etalonUnits",[]),h(this,"cloneUnits",[]),this.map=s,this.etalonUnits=a,this.userId=c,this.uI=this.findUser(),this.preparation(),this.counter=0,this.pause=!1,this.defeat=!1,this.win=!1,this.bonus=0}findUser(){for(let s=0;s<this.etalonUnits.length;++s)if(this.userId===this.etalonUnits[s].userId)return s}preparation(){this.etalonUnits.forEach((s,a)=>{s.pos.coords.X=this.map.unitsCoords[a].X,s.pos.coords.Y=this.map.unitsCoords[a].Y,s.turn=this.map.startUnitsTurn[a],s.id=this.map.backId.units[a],s.homeId=this.map.backId.homes[a],s.gun.degree=90*s.turn,this.cloneUnits[a]=_.cloneDeep(s),this.cloneUnits[a].map=s.map=this.map,this.cloneUnits[a].width=this.cloneUnits[a].height=this.map.unitWidth,this.cloneUnits[a].bullet.map=s.bullet.map=this.map,this.cloneUnits[a].bullet.width=this.cloneUnits[a].bullet.height=Math.round(this.map.unitWidth/5),this.map.backArray.push(this.cloneUnits[a]),this.userId===s.userId&&(this.cloneUnits[a].control=s.control,this.cloneUnits[a].control.mouseMove(),this.cloneUnits[a].control.mouseDown(),this.cloneUnits[a].control.mouseUp(),this.cloneUnits[a].control.keyDown(),this.cloneUnits[a].control.keyUp())}),this.map.towers.forEach((s,a)=>{s.map=this.map,s.bullet.map=this.map,s.id=this.map.backId.towers[a],s.pos.coords=this.map.towersCoords[a],s.turn="blue"===s.side?y.left:y.right,s.gun.degree="blue"===s.side?180:0,s.targets=this.cloneUnits.filter(c=>s.side!==c.side),s.allies=this.cloneUnits.filter(c=>s.side===c.side),s.width=s.height=this.map.unitWidth,this.map.backArray.push(s),s.update(s.pos.coords)}),this.map.mobs.forEach((s,a)=>{s.map=this.map,s.bullet.map=this.map,s.id=this.map.backId.mobs[a],s.pos.coords=this.map.mobsCoords[a],s.targets=this.cloneUnits.filter(c=>s.side!==c.side),s.allies=this.cloneUnits.filter(c=>s.side===c.side),s.width=s.height=this.map.unitWidth,this.map.backArray.push(s),s.update(s.pos.coords)}),this.map.etalonMobs.forEach((s,a)=>{s.map=this.map,s.bullet.map=this.map,s.id=this.map.backId.mobs[a],s.pos.coords=this.map.mobsCoords[a],s.targets=this.cloneUnits.filter(c=>s.side!==c.side),s.allies=this.cloneUnits.filter(c=>s.side===c.side)}),this.cloneUnits.forEach(s=>{s.targets=this.cloneUnits.filter(a=>s.side!==a.side),this.map.towers.filter(a=>s.side!==a.side).forEach(a=>{s.targets.push(a)}),this.map.mobs.filter(a=>s.side!==a.side).forEach(a=>{s.targets.push(a)}),s.targets.push("red"===s.side?this.map.blueBase:this.map.redBase),s.allies=this.cloneUnits.filter(a=>s.side===a.side)}),this.map.baseTowers.forEach(s=>{s.map=this.map,s.bullet.map=this.map,s.targets=this.cloneUnits.filter(a=>s.side!==a.side),s.allies=this.cloneUnits.filter(a=>s.side===a.side)}),this.map.redBase.id=this.map.backId.redBase,this.map.blueBase.id=this.map.backId.blueBase,this.map.redBase.tower1.id=1e3,this.map.blueBase.tower2.id=1001,this.map.blueBase.tower1.id=1002,this.map.blueBase.tower2.id=1003,this.sound=new mt(this.map.redBase,this.map.blueBase,this.cloneUnits[this.uI],this.cloneUnits,this.map.towers,this.map.mobs)}unitsBackFill(){this.cloneUnits.forEach(s=>{s.pos.pastCoords.X=s.pos.coords.X,s.pos.pastCoords.Y=s.pos.coords.Y,s.update(s.pos.coords),s.checkFrontWay(1)})}run(){"Space"===this.cloneUnits[this.uI].control.buttonUp&&(this.pause=!1===this.pause,this.cloneUnits[this.uI].control.buttonUp=""),!this.pause&&!this.win&&!this.defeat&&(this.counter++,this.counter>5400&&(this.counter=0),this.unitsBackFill(),this.cloneUnits.forEach((s,a)=>{this.uI!==a&&(this.botLogic(s),null!==s.target&&s.hunt(s.target),s.shot(),this.crash(s,this.etalonUnits[a]),this.rebirth(s,this.etalonUnits[a]))}),this.map.baseTowers.forEach(s=>{s.shot()}),this.map.towers.forEach(s=>{s.shot()}),this.map.mobs.forEach((s,a)=>{s.uc.health<s.etalonUc.health&&s.shot(),this.crash(s,this.map.etalonMobs[a]),this.rebirth(s,this.map.etalonMobs[a])}),this.cloneUnits[this.uI].controlHandling(),this.cloneUnits[this.uI].shot(),this.cloneUnits[this.uI].levelUp(),this.crash(this.cloneUnits[this.uI],this.etalonUnits[this.uI]),this.rebirth(this.cloneUnits[this.uI],this.etalonUnits[this.uI]),this.gameOver())}gameOver(){"red"===this.cloneUnits[this.uI].side&&this.map.blueBase.uc.health<=0||"blue"===this.cloneUnits[this.uI].side&&this.map.redBase.uc.health<=0?(++this.etalonUnits[this.uI].wins,++this.etalonUnits[this.uI].battles,this.etalonUnits[this.uI].kills=this.cloneUnits[this.uI].kills,this.bonus=li(500,1e3),this.etalonUnits[this.uI].money+=this.bonus,this.win=!0):("red"===this.cloneUnits[this.uI].side&&this.map.redBase.uc.health<=0||"blue"===this.cloneUnits[this.uI].side&&this.map.blueBase.uc.health<=0)&&(++this.etalonUnits[this.uI].defeats,++this.etalonUnits[this.uI].battles,this.etalonUnits[this.uI].kills=this.cloneUnits[this.uI].kills,this.bonus=li(200,300),this.etalonUnits[this.uI].money+=this.bonus,this.defeat=!0)}botLogic(s){if(this.counter%1200==0||1===this.counter||null===s.target||s.target.uc.health<=0){let a=new Map;s.targets.forEach((k,F)=>{let z=Math.abs(k.pos.coords.X-s.pos.coords.X),nt=Math.abs(k.pos.coords.Y-s.pos.coords.Y);a.set(F,Math.round(Math.sqrt(Math.pow(z,2)+Math.pow(nt,2))))});const c=new Map([...a.entries()].sort((k,F)=>k[1]-F[1]));let W=!1;for(let k of c.keys()){for(let F of this.cloneUnits){if(F.target===F.targets[k])break;if(s.targets[k].uc.health>0){s.target=s.targets[k],W=!0;break}}if(W)break}}}crash(s,a){s.uc.health<=0&&s.uc.respawnTime===s.etalonUc.respawnTime&&(s.pos.crashCoords.X=s.pos.coords.X,s.pos.crashCoords.Y=s.pos.coords.Y,s.turn=a.turn,s.gun.degree=a.gun.degree,s.pos.coords.X=a.pos.coords.X,s.pos.coords.Y=a.pos.coords.Y),s.uc.health<=0&&--s.uc.respawnTime}rebirth(s){s.uc.respawnTime<=0&&(s.uc.respawnTime=s.etalonUc.respawnTime,s.uc.armor=s.etalonUc.armor,s.uc.health=s.etalonUc.health)}}class we extends zi{constructor(s,a,c){super(),h(this,"experienceToLevel",0),h(this,"money",0),h(this,"battles",0),h(this,"wins",0),h(this,"kills",0),h(this,"killsInGame",0),h(this,"defeats",0),h(this,"counter",0),h(this,"control",null),super.userId=a,super.side=c.team.toLowerCase(),this.control=s,this.uc.model=c.tankBody,this.etalonUc.model=c.tankBody,this.gun.model=c.tankHead}checkCollision(s){let a=!1;for(let k=this.speedController;k>0&&(a=!1,this.setPosition(k,!0),this.checkFrontWay(k)||(this.setPosition(k,!1),a=!0),!1!==a);k--);let W=this.pos.coords.Y-this.pos.pastCoords.Y;if(this.pos.deltaCoords.X=this.pos.coords.X-this.pos.pastCoords.X,this.pos.deltaCoords.Y=W,s&&!a){let F=this.pos.renderCoords.Y+this.pos.deltaCoords.Y;this.pos.renderCoords.X=this.pos.renderCoords.X+this.pos.deltaCoords.X,this.pos.renderCoords.Y=F}}shot(){!0===this.trigger&&(this.counter%2==0&&this.reload===this.bullet.speed&&this.bullet.move(),this.counter%2==0&&this.reload++,this.kill=this.bullet.fatalHit(),null!==this.kill&&(++this.kills,++this.killsInGame,this.bullet.target=null),this.reload>10&&(this.trigger=!1,this.bullet.hit=!1,this.bullet.hitMiss=!1,this.reload=0))}extraMove(s){this.uc.health>0&&(this.speedController<this.uc.speed&&this.counter%2==0&&++this.speedController,this.checkCollision(s))}checkMapSides(){let s=this.map.renderY>=this.uc.speed,a=this.pos.coords.Y<=this.map.frontHeight-Math.floor(this.control.canvas.height/2),c=this.map.renderY<=this.map.frontHeight-this.control.canvas.height-this.uc.speed,W=this.pos.coords.Y>=Math.floor(this.control.canvas.height/2),k=this.map.renderX>=this.uc.speed,F=this.pos.coords.X<=this.map.frontWidth-Math.floor(this.control.canvas.width/2),z=this.map.renderX<=this.map.frontWidth-this.control.canvas.width-this.uc.speed,nt=this.pos.coords.X>=Math.floor(this.control.canvas.width/2);return this.turn===y.top?s&&a:this.turn===y.bottom?c&&W:this.turn===y.left?k&&F:this.turn===y.right?z&&nt:void 0}correctRenderCoords1(){this.map.renderX-=this.pos.deltaCoords.X,this.map.renderY-=this.pos.deltaCoords.Y,this.targets.forEach(s=>{s.bullet.pos.renderCoords.X+=this.pos.deltaCoords.X,s.bullet.pos.renderCoords.Y+=this.pos.deltaCoords.Y}),this.allies.forEach(s=>{s.bullet.pos.renderCoords.X+=this.pos.deltaCoords.X,s.bullet.pos.renderCoords.Y+=this.pos.deltaCoords.Y})}correctRenderCoords2(){this.map.renderX+=this.pos.deltaCoords.X,this.map.renderY+=this.pos.deltaCoords.Y,this.targets.forEach(s=>{s.bullet.pos.renderCoords.X-=this.pos.deltaCoords.X,s.bullet.pos.renderCoords.Y-=this.pos.deltaCoords.Y}),this.allies.forEach(s=>{s.bullet.pos.renderCoords.X-=this.pos.deltaCoords.X,s.bullet.pos.renderCoords.Y-=this.pos.deltaCoords.Y})}move(s){this.checkMapSides()?(s(!1),this.pos.deltaCoords.X<0||this.pos.deltaCoords.Y<0?this.turn===y.right||this.turn===y.bottom?this.correctRenderCoords1():this.correctRenderCoords2():this.turn===y.right||this.turn===y.bottom?this.correctRenderCoords2():this.correctRenderCoords1()):s(!0)}turnGun(){let s=Math.round(this.map.unitWidth/2),a=Math.round(this.map.unitWidth/2),c=this.pos.renderCoords.X+s,k=(this.control.mouseY-(this.pos.renderCoords.Y+a))/(this.control.mouseX-c);this.gun.degree=c<this.control.mouseX?180*Math.atan(k)/Math.PI:180*Math.atan(k)/Math.PI+180}controlHandling(){if(this.uc.health>0)switch(this.turnGun(),this.counter++,this.counter>1e3&&(this.counter=0),this.control.buttonDown){case"ArrowUp":case"KeyW":this.turn=y.top,this.move(s=>this.extraMove(s));break;case"ArrowDown":case"KeyS":this.turn=y.bottom,this.move(s=>this.extraMove(s));break;case"ArrowLeft":case"KeyA":this.turn=y.left,this.move(s=>this.extraMove(s));break;case"ArrowRight":case"KeyD":this.turn=y.right,this.move(s=>this.extraMove(s));break;default:this.speedController>0&&this.counter%4==0&&""!==this.control.buttonUp&&(--this.speedController,this.move(s=>this.checkCollision(s)))}""!==this.control.buttonUp&&(this.control.buttonDown=""),this.control.checkMouseDown&&this.uc.health>0&&(this.trigger=!0),this.control.checkMouseUp&&(this.control.checkMouseDown=!1,this.control.checkMouseUp=!1)}}class Tt{constructor(s,a,c,W){h(this,"pic",null),h(this,"canvas",null),h(this,"context",null),h(this,"map",null),h(this,"etalonUnits",[]),h(this,"cloneUnits",[]),h(this,"uI",0),h(this,"game",null),this.game=W,this.map=W.map,this.pic=s,this.canvas=a,this.context=c,this.etalonUnits=W.etalonUnits,this.cloneUnits=W.cloneUnits,this.userId=W.userId,this.uI=W.uI,this.crashDegrees=0,this.userPreparation(),this.othersPreparation()}userPreparation(){let s=Math.round(this.canvas.width/2),a=Math.round(this.canvas.height/2),nt=this.cloneUnits[this.uI].pos.coords.Y+a>=this.map.frontHeight?this.map.frontHeight-this.cloneUnits[this.uI].pos.coords.Y:a;this.cloneUnits[this.uI].pos.coords.X>=this.canvas.width?(this.map.renderX=this.cloneUnits[this.uI].pos.coords.X+(this.cloneUnits[this.uI].pos.coords.X+s>=this.map.frontWidth?this.map.frontWidth-this.cloneUnits[this.uI].pos.coords.X:s)-this.canvas.width,this.cloneUnits[this.uI].pos.renderCoords.X=this.cloneUnits[this.uI].pos.coords.X-this.map.renderX,this.etalonUnits[this.uI].pos.renderCoords.X=this.cloneUnits[this.uI].pos.coords.X-this.map.renderX):(this.cloneUnits[this.uI].pos.renderCoords.X=this.cloneUnits[this.uI].pos.coords.X,this.etalonUnits[this.uI].pos.renderCoords.X=this.etalonUnits[this.uI].pos.coords.X),this.cloneUnits[this.uI].pos.coords.Y>this.canvas.height?(this.map.renderY=this.cloneUnits[this.uI].pos.coords.Y+nt-this.canvas.height,this.cloneUnits[this.uI].pos.renderCoords.Y=this.cloneUnits[this.uI].pos.coords.Y-this.map.renderY,this.etalonUnits[this.uI].pos.renderCoords.Y=this.cloneUnits[this.uI].pos.coords.Y-this.map.renderY):(this.cloneUnits[this.uI].pos.renderCoords.Y=this.cloneUnits[this.uI].pos.coords.Y,this.etalonUnits[this.uI].pos.renderCoords.Y=this.etalonUnits[this.uI].pos.coords.Y)}othersPreparation(){for(let s=0;s<this.cloneUnits.length;++s)s!==this.uI&&(this.cloneUnits[s].pos.renderCoords.X=this.cloneUnits[s].pos.coords.X-this.cloneUnits[this.uI].map.renderX,this.cloneUnits[s].pos.renderCoords.Y=this.cloneUnits[s].pos.coords.Y-this.map.renderY,this.cloneUnits[s].bullet.pos.renderCoords.X=this.cloneUnits[s].bullet.pos.coords.X-this.map.renderX,this.cloneUnits[s].bullet.pos.renderCoords.Y=this.cloneUnits[s].bullet.pos.coords.Y-this.map.renderY);this.map.baseTowers.forEach(s=>{s.pos.renderCoords.X=s.pos.coords.X-this.cloneUnits[this.uI].map.renderX,s.pos.renderCoords.Y=s.pos.coords.Y-this.cloneUnits[this.uI].map.renderY,s.bullet.pos.renderCoords.X=s.bullet.pos.coords.X-this.map.renderX,s.bullet.pos.renderCoords.Y=s.bullet.pos.coords.Y-this.map.renderY}),this.map.towers.forEach(s=>{s.pos.renderCoords.X=s.pos.coords.X-this.cloneUnits[this.uI].map.renderX,s.pos.renderCoords.Y=s.pos.coords.Y-this.cloneUnits[this.uI].map.renderY,s.bullet.pos.renderCoords.X=s.bullet.pos.coords.X-this.map.renderX,s.bullet.pos.renderCoords.Y=s.bullet.pos.coords.Y-this.map.renderY}),this.map.mobs.forEach(s=>{s.pos.renderCoords.X=s.pos.coords.X-this.cloneUnits[this.uI].map.renderX,s.pos.renderCoords.Y=s.pos.coords.Y-this.cloneUnits[this.uI].map.renderY,s.bullet.pos.renderCoords.X=s.bullet.pos.coords.X-this.map.renderX,s.bullet.pos.renderCoords.Y=s.bullet.pos.coords.Y-this.map.renderY}),this.map.redBase.pos.renderCoords.X=4*this.map.unitWidth-this.map.renderX,this.map.redBase.pos.renderCoords.Y=11*this.map.unitWidth-this.map.renderY,this.map.blueBase.pos.renderCoords.X=this.map.frontWidth-4*this.map.unitWidth-this.map.renderX,this.map.blueBase.pos.renderCoords.Y=10*this.map.unitWidth-this.map.renderY}showUnitModel(s){let a=0;s.turn===y.right&&(a=0),s.turn===y.bottom&&(a=90),s.turn===y.left&&(a=180),s.turn===y.top&&(a=270),this.rotateImage(a,this.map.unitWidth,this.map.unitWidth,s.pos.renderCoords,()=>{this.context.drawImage(this.pic.images.get(s.uc.model),-Math.floor(this.map.unitWidth/2),-Math.floor(this.map.unitWidth/2))}),this.showGunModel(s)}showGunModel(s){s.uc.health>0&&this.rotateImage(s.gun.degree,this.map.unitWidth,this.map.unitWidth,s.pos.renderCoords,()=>{this.context.drawImage(this.pic.images.get(s.gun.model),-Math.floor(this.map.unitWidth/2),-Math.floor(this.map.unitWidth/2))})}rotateImage(s,a,c,W,k){this.context.save(),this.context.translate(W.X+Math.floor(a/2),W.Y+Math.floor(c/2)),this.context.rotate(s*(Math.PI/180)),k(),this.context.restore()}showShot(s){this.showBullet(s.bullet.degree,s),this.showShotMoment(s.bullet.degree,s),this.showBoomMoment(s.bullet.degree,s)}showBullet(s,a){if(1===a.bullet.speed&&(this.game.sound.sounds.get(a.id).currentTime=0,this.game.sound.sounds.get(a.id).play()),0!==a.bullet.speed){let c=this.pic.images.get(a.ammunition[a.bulletType].model);this.rotateImage(s,c.width,c.height,a.bullet.pos.renderCoords,()=>{this.context.drawImage(c,-Math.floor(c.width/2),-Math.floor(c.height/2))})}}showShotMoment(s,a){if(2===a.bullet.speed||3===a.bullet.speed){let c=this.pic.images.get(a.ammunition[a.bulletType].shot_model);2===a.bullet.speed&&(a.bullet.bulletType.shot_coords.X=a.bullet.pos.renderCoords.X,a.bullet.bulletType.shot_coords.Y=a.bullet.pos.renderCoords.Y),this.rotateImage(s,c.width,c.height,a.bullet.bulletType.shot_coords,()=>{this.context.drawImage(c,-Math.floor(c.width/2),-Math.floor(c.height/2))})}}showBoomMoment(s,a){if(a.bullet.hit||a.bullet.hitMiss){let c=this.pic.images.get(a.ammunition[a.bulletType].boom_model);a.bullet.bulletType.boom_coords.X=a.bullet.pos.renderCoords.X,a.bullet.bulletType.boom_coords.Y=a.bullet.pos.renderCoords.Y,this.rotateImage(s,c.width,c.height,a.bullet.bulletType.boom_coords,()=>{this.context.drawImage(c,-Math.floor(c.width/2),-Math.floor(c.height/2))})}}healthArmorBalancer(s,a,c){return s*c/a}showArmor(s){if(s.uc.health>0){this.context.fillStyle="darkOrange";let W=this.healthArmorBalancer(s.uc.armor,s.etalonUc.armor,this.map.unitWidth);switch(s.turn){case y.right:this.context.fillRect(s.pos.renderCoords.X-26,s.pos.renderCoords.Y+this.map.unitWidth-W,6,W),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X-26,s.pos.renderCoords.Y,6,this.map.unitWidth-W);break;case y.bottom:this.context.fillRect(s.pos.renderCoords.X+this.map.unitWidth-W,s.pos.renderCoords.Y-26,W,6),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X,s.pos.renderCoords.Y-26,this.map.unitWidth-W,6);break;case y.left:this.context.fillRect(s.pos.renderCoords.X+this.map.unitWidth+26,s.pos.renderCoords.Y+this.map.unitWidth-W,6,W),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X+this.map.unitWidth+26,s.pos.renderCoords.Y,6,this.map.unitWidth-W);break;case y.top:this.context.fillRect(s.pos.renderCoords.X+this.map.unitWidth-W,s.pos.renderCoords.Y+this.map.unitWidth+26,W,6),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X,s.pos.renderCoords.Y+this.map.unitWidth+26,this.map.unitWidth-W,6)}}}showHealth(s){if(s.uc.health>0){this.context.fillStyle="red"===s.side?"darkRed":"green"===s.side?"darkGreen":"blue";let W=this.healthArmorBalancer(s.uc.health,s.etalonUc.health,this.map.unitWidth);switch(s.turn){case y.right:this.context.fillRect(s.pos.renderCoords.X-20,s.pos.renderCoords.Y+this.map.unitWidth-W,6,W),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X-20,s.pos.renderCoords.Y,6,this.map.unitWidth-W);break;case y.bottom:this.context.fillRect(s.pos.renderCoords.X+this.map.unitWidth-W,s.pos.renderCoords.Y-20,W,6),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X,s.pos.renderCoords.Y-20,this.map.unitWidth-W,6);break;case y.left:this.context.fillRect(s.pos.renderCoords.X+this.map.unitWidth+20,s.pos.renderCoords.Y+this.map.unitWidth-W,6,W),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X+this.map.unitWidth+20,s.pos.renderCoords.Y,6,this.map.unitWidth-W);break;case y.top:this.context.fillRect(s.pos.renderCoords.X+this.map.unitWidth-W,s.pos.renderCoords.Y+this.map.unitWidth+20,W,6),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X,s.pos.renderCoords.Y+this.map.unitWidth+20,this.map.unitWidth-W,6)}}}showBaseHealth(s){if(s.uc.health>0){let W=this.healthArmorBalancer(s.uc.health,s.etalonUc.health,this.map.baseWidth);this.context.fillStyle="red"===s.side?"darkRed":"blue","red"===s.side?(this.context.fillRect(s.pos.renderCoords.X-20,s.pos.renderCoords.Y+this.map.baseWidth-W,12,W),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X-20,s.pos.renderCoords.Y,12,this.map.baseWidth-W)):(this.context.fillRect(s.pos.renderCoords.X+20,s.pos.renderCoords.Y+this.map.baseWidth-W,12,W),this.context.fillStyle="rgb(60, 50, 50)",this.context.fillRect(s.pos.renderCoords.X+20,s.pos.renderCoords.Y,12,this.map.baseWidth-W))}}showCrash(s){s.uc.health<=0&&(s.pos.renderCrashCoords.X=s.pos.crashCoords.X-this.map.renderX,s.pos.renderCrashCoords.Y=s.pos.crashCoords.Y-this.map.renderY,this.rotateImage(0,this.map.unitWidth,this.map.unitWidth,s.pos.renderCrashCoords,()=>{this.context.drawImage(this.pic.images.get(s.uc.model),-Math.floor(this.map.unitWidth/2),-Math.floor(this.map.unitWidth/2))}),++this.crashDegrees,this.rotateImage(this.crashDegrees,this.map.unitWidth,this.map.unitWidth,s.pos.renderCrashCoords,()=>{this.context.drawImage(this.pic.images.get("smoke_1"),-Math.floor(this.map.unitWidth/2),-Math.floor(this.map.unitWidth/2))}))}isVisible(s){return!(s.pos.renderCoords.X>this.canvas.width+this.map.unitWidth||s.pos.renderCoords.X<-this.map.unitWidth||s.pos.renderCoords.Y>this.canvas.height+this.map.unitWidth||s.pos.renderCoords.X<-this.map.unitWidth)}render(){if(5===this.game.counter&&(this.game.sound.sounds.get("Wind").currentTime=0,this.game.sound.sounds.get("Wind").play()),this.othersPreparation(),1===this.cloneUnits[this.uI].uc.respawnTime?(this.map.renderX=0,this.map.renderY=0,this.userPreparation()):this.cloneUnits[this.uI].uc.health<=0&&this.map.moveMap(this.cloneUnits[this.uI].control.mouseX,this.cloneUnits[this.uI].control.mouseY),this.context.drawImage(this.map.mapImg,this.map.renderX,this.map.renderY,this.canvas.width,this.canvas.height,0,0,this.canvas.width,this.canvas.height),this.cloneUnits.forEach(s=>{this.showCrash(s)}),this.cloneUnits.forEach(s=>{s.uc.health>0&&this.isVisible(s)&&this.showUnitModel(s)}),this.map.towers.forEach(s=>{this.isVisible(s)&&this.showUnitModel(s)}),this.map.baseTowers.forEach(s=>{this.isVisible(s)&&this.showUnitModel(s)}),this.map.mobs.forEach(s=>{this.isVisible(s)&&this.showUnitModel(s)}),this.cloneUnits.forEach(s=>{s.uc.health>0&&this.isVisible(s)&&this.showShot(s)}),this.map.towers.forEach(s=>{s.uc.health>0&&this.isVisible(s)&&this.showShot(s)}),this.map.baseTowers.forEach(s=>{s.uc.health>0&&this.isVisible(s)&&this.showShot(s)}),this.map.mobs.forEach(s=>{s.uc.health>0&&this.isVisible(s)&&this.showShot(s)}),this.cloneUnits.forEach(s=>{s.uc.health>0&&this.isVisible(s)&&(this.showHealth(s),this.showArmor(s))}),this.map.towers.forEach(s=>{this.isVisible(s)&&this.showHealth(s)}),this.map.mobs.forEach(s=>{this.isVisible(s)&&this.showHealth(s)}),this.isVisible(this.map.redBase)&&this.showBaseHealth(this.map.redBase),this.isVisible(this.map.blueBase)&&this.showBaseHealth(this.map.blueBase),this.showUC(),this.game.win||this.game.defeat){this.cloneUnits[this.uI].pos.renderCoords.X=this.cloneUnits[this.uI].pos.coords.X-this.map.renderX,this.cloneUnits[this.uI].pos.renderCoords.Y=this.cloneUnits[this.uI].pos.coords.Y-this.map.renderY,this.cloneUnits[this.uI].bullet.pos.renderCoords.X=this.cloneUnits[this.uI].bullet.pos.coords.X-this.map.renderX,this.cloneUnits[this.uI].bullet.pos.renderCoords.Y=this.cloneUnits[this.uI].bullet.pos.coords.Y-this.map.renderY,this.map.moveMap(this.cloneUnits[this.uI].control.mouseX,this.cloneUnits[this.uI].control.mouseY),this.context.fillStyle="rgba(60, 50, 50, 0.8)",this.context.strokeStyle="rgb(20, 20, 20)";let s=Math.round(this.canvas.width/10),a=Math.round(this.canvas.height/10),c=8*s,W=8*a,k=20;this.context.lineJoin="round",this.context.lineWidth=k,this.context.strokeRect(s+k/2,a+k/2,c-k,W-k),this.context.fillRect(s+k/2,a+k/2,c-k,W-k),this.game.win&&this.winMessage(a),this.game.defeat&&this.defeatMessage(a)}}showUC(){this.context.fillStyle="rgb(0, 0, 0)",this.context.font="20px Palatino Linotype",this.context.lineWidth=2;let s=20;this.text(`Level: ${this.cloneUnits[this.uI].uc.level}`,s,20),this.text(`Exp: ${Math.floor(this.cloneUnits[this.uI].uc.experience)} / ${Math.floor(this.cloneUnits[this.uI].experienceToLevel)}`,s,40),this.text(`Health: ${Math.floor(this.cloneUnits[this.uI].uc.health)} / ${Math.floor(this.cloneUnits[this.uI].etalonUc.health)}`,s,60),this.text(`Armor: ${Math.floor(this.cloneUnits[this.uI].uc.armor)} / ${Math.floor(this.cloneUnits[this.uI].etalonUc.armor)}`,s,80),this.text(`Speed: ${Math.floor(this.cloneUnits[this.uI].uc.speed)} / ${Math.floor(this.cloneUnits[this.uI].etalonUc.speed)}`,s,100),this.text(`Power: ${Math.floor(this.cloneUnits[this.uI].uc.shotPower)} / ${Math.floor(this.cloneUnits[this.uI].etalonUc.shotPower)}`,s,120)}winMessage(s){this.context.textAlign="center";let a=Math.round(this.canvas.width/2);this.context.fillStyle="rgb(255, 255, 255)",this.context.font="48px Palatino Linotype",this.context.lineWidth=5,this.text("PERFECT VICTORY",a,2*s),this.context.font="36px Palatino Linotype",this.context.lineWidth=3,this.text("Congratulations! Your awards / achievements:",a,3*s),this.message(s)}defeatMessage(s){this.context.textAlign="center";let a=Math.round(this.canvas.width/2);this.context.fillStyle="rgb(255, 255, 255)",this.context.font="48px Palatino Linotype",this.context.lineWidth=5,this.text("UNFORTUNATE DEFEAT",a,2*s),this.context.font="36px Palatino Linotype",this.context.lineWidth=3,this.text("Your awards / achievements:",a,3*s),this.message(s)}message(s){let a=Math.round(this.canvas.width/2),c=Math.round(s/2);this.context.lineWidth=3,this.context.font="28px Palatino Linotype",this.text(`Money: +${this.game.bonus}`,a,4*s+c),this.text(`Kills in game: ${this.cloneUnits[this.uI].killsInGame}`,a,4*s+2*c),this.text(`Level in game: ${this.cloneUnits[this.uI].uc.level}`,a,4*s+3*c),this.text(`Total kills: ${this.etalonUnits[this.uI].kills}`,a,4*s+4*c),this.text(`Wins: ${this.etalonUnits[this.uI].wins}`,a,4*s+5*c),this.text(`Defeats: ${this.etalonUnits[this.uI].defeats}`,a,4*s+6*c),this.text(`Battles: ${this.etalonUnits[this.uI].battles}`,a,4*s+7*c)}text(s,a,c){this.context.strokeText(s,a,c,this.canvas.width),this.context.fillText(s,a,c,this.canvas.width)}}class di{constructor(s){h(this,"mouseX",0),h(this,"mouseY",0),h(this,"buttonDown",""),h(this,"buttonUp",""),h(this,"checkMouseDown",!1),h(this,"checkMouseUp",!1),this.canvas=s}mouseMove(){this.canvas.addEventListener("mousemove",s=>{this.mouseX=s.offsetX,this.mouseY=s.offsetY})}mouseDown(){this.canvas.addEventListener("mousedown",()=>{this.checkMouseDown=!0})}mouseUp(){this.canvas.addEventListener("mouseup",()=>{this.checkMouseUp=!0})}keyDown(){document.addEventListener("keydown",s=>{this.buttonDown=s.code,this.buttonUp=""})}keyUp(){document.addEventListener("keyup",s=>{this.buttonUp=s.code})}}window._=vt(3815);class Mt{constructor(){h(this,"position",0),h(this,"team","red"),h(this,"tankHead","gun_1"),h(this,"tankBody","T_1")}}class ci{constructor(s,a=new Mt){h(this,"map",void 0),h(this,"game",void 0),h(this,"control",void 0),h(this,"units",void 0),h(this,"render",void 0),this.canvas=s,this.context=this.canvas.getContext("2d"),this.control=new di(s),this.pictures=new Ei,this.start=(new Date).getTime(),this.fps=0,this.settings=a}draw(){this.game.run(),setTimeout(()=>this.render.render(),0);let s=(new Date).getTime();this.fps++,s-this.start>=1e3&&(console.log(this.fps),this.start=s,this.fps=0),requestAnimationFrame(this.draw.bind(this))}run(){this.pictures.allUploaded(()=>{this.map=new fi(this.canvas,this.pictures.images.get("testGameMap"),this.pictures.images.get("T_2")),this.canvas.style.cursor=this.pictures.images.get("cursor"),this.units=this.getUnits(),this.game=new Jt(this.map,this.units,"user"),this.render=new Tt(this.pictures,this.canvas,this.context,this.game),this.draw()})}getUnits(){const a=()=>new et("Red","T_1",30,30,5,1,200,600,{model:"gun_1",degree:0,coords:new R(0,0)}),c=()=>new et("Blue","T_3",30,30,5,1,200,600,{model:"gun_3",degree:0,coords:new R(0,0)}),W="red"===this.settings.team?this.settings.position:this.settings.position+4,k=[a(),a(),a(),a(),c(),c(),c(),c()];return k.splice(W,1,(()=>new we(this.control,"user",this.settings))()),k}}var It=vt(9865),yi=vt(9670),j=vt(6796),gn=vt(3941),mn=vt(1928),Zi=vt(36);const _n=["demoPanel"],be=["canvas"],Wn=[{path:"",component:(()=>{class X{constructor(a,c,W){this.demoService=a,this.lsService=c,this.router=W}ngOnInit(){localStorage.getItem(It.$.inDemo)&&this.router.navigate([yi.RK.HOME]).then()}ngAfterViewInit(){this.lsService.setItem(It.$.inDemo,"inDemo");const a=this.demoPanelRef.nativeElement,c=this.canvasRef.nativeElement;a.clientHeight>a.clientWidth?(c.width=a.clientHeight-160,c.height=a.clientWidth-10,c.style.transform="rotate(90deg)"):(c.width=a.clientWidth-160,c.height=a.clientHeight-10),this.startGame(c)}ngOnDestroy(){localStorage.removeItem(It.$.inDemo)}startGame(a){new ci(a,this.demoService.demoSettings).run()}}return X.\u0275fac=function(a){return new(a||X)(j.Y36(gn.e),j.Y36(mn.n),j.Y36(Zi.F0))},X.\u0275cmp=j.Xpm({type:X,selectors:[["app-demo"]],viewQuery:function(a,c){if(1&a&&(j.Gf(_n,5),j.Gf(be,5)),2&a){let W;j.iGM(W=j.CRH())&&(c.demoPanelRef=W.first),j.iGM(W=j.CRH())&&(c.canvasRef=W.first)}},decls:5,vars:0,consts:[[1,"wrapper"],[1,"demo-panel"],["demoPanel",""],[1,"demo-canvas"],["canvas",""]],template:function(a,c){1&a&&(j.TgZ(0,"div",0)(1,"div",1,2),j._UZ(3,"canvas",3,4),j.qZA()())},styles:["@keyframes make_visible_move_right_on_start{0%{left:0;transform:translate(-100%,-50%)}to{left:0;transform:translateY(-50%)}}@keyframes make_hidden_move_left_from_start{0%{left:0;transform:translateY(-50%)}to{left:0;transform:translate(-100%,-50%)}}@keyframes make_visible_move_right_on_center{0%{left:0;transform:translate(-100%,-50%)}to{left:50%;transform:translate(-50%,-50%)}}@keyframes make_hidden_move_left_from_center{0%{left:50%;transform:translate(-50%,-50%)}to{left:0;transform:translate(-100%,-50%)}}@keyframes make_visible_move_right_on_end{0%{left:0;transform:translate(-100%,-50%)}to{left:100%;transform:translate(-100%,-50%)}}@keyframes make_hidden_move_left_from_end{0%{left:100%;transform:translate(-100%,-50%)}to{left:0;transform:translate(-100%,-50%)}}@keyframes make_visible_move_left_on_end{0%{left:100%;transform:translateY(-50%)}to{left:100%;transform:translate(-100%,-50%)}}@keyframes make_hidden_move_right_from_end{0%{left:100%;transform:translate(-100%,-50%)}to{left:100%;transform:translateY(-50%)}}@keyframes make_visible_move_left_on_center{0%{left:100%;transform:translateY(-50%)}to{left:50%;transform:translate(-50%,-50%)}}@keyframes make_hidden_move_right_from_center{0%{left:50%;transform:translate(-50%,-50%)}to{left:100%;transform:translateY(-50%)}}@keyframes make_visible_move_left_on_start{0%{left:100%;transform:translateY(-50%)}to{left:0;transform:translateY(-50%)}}@keyframes make_hidden_move_right_from_start{0%{left:0;transform:translateY(-50%)}to{left:100%;transform:translateY(-50%)}}@keyframes switch-blue{0%{left:0;right:50%}to{left:50%;right:0}}@keyframes switch-red{0%{left:50%;right:0}to{left:0;right:50%}}.wrapper[_ngcontent-%COMP%]{width:100vw;height:100vh;overflow:hidden}.wrapper[_ngcontent-%COMP%]   .demo-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden;margin:0;width:100%;height:100%}.wrapper[_ngcontent-%COMP%]   .demo-panel[_ngcontent-%COMP%]   .demo-canvas[_ngcontent-%COMP%]{border:2px solid #EB3636;cursor:url(cursor.8e939e809d527865.png) 20 20,auto}"]}),X})()}];let Qt=(()=>{class X{}return X.\u0275fac=function(a){return new(a||X)},X.\u0275mod=j.oAB({type:X}),X.\u0275inj=j.cJS({imports:[Xi.ez,Zi.Bz.forChild(Wn),Zi.Bz]}),X})(),Kt=(()=>{class X{}return X.\u0275fac=function(a){return new(a||X)},X.\u0275mod=j.oAB({type:X}),X.\u0275inj=j.cJS({imports:[Xi.ez,Qt]}),X})()}}]);